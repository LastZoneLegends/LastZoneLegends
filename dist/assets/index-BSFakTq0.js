function dT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mv={exports:{}},cu={},Lv={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),fT=Symbol.for("react.portal"),mT=Symbol.for("react.fragment"),pT=Symbol.for("react.strict_mode"),gT=Symbol.for("react.profiler"),yT=Symbol.for("react.provider"),vT=Symbol.for("react.context"),xT=Symbol.for("react.forward_ref"),wT=Symbol.for("react.suspense"),_T=Symbol.for("react.memo"),ET=Symbol.for("react.lazy"),Bg=Symbol.iterator;function TT(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uv=Object.assign,Fv={};function qi(t,e,n){this.props=t,this.context=e,this.refs=Fv,this.updater=n||Vv}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bv(){}Bv.prototype=qi.prototype;function Vf(t,e,n){this.props=t,this.context=e,this.refs=Fv,this.updater=n||Vv}var Uf=Vf.prototype=new Bv;Uf.constructor=Vf;Uv(Uf,qi.prototype);Uf.isPureReactComponent=!0;var zg=Array.isArray,zv=Object.prototype.hasOwnProperty,Ff={current:null},$v={key:!0,ref:!0,__self:!0,__source:!0};function Wv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zv.call(e,r)&&!$v.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ma,type:t,key:i,ref:o,props:s,_owner:Ff.current}}function NT(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function IT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function Ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?IT(""+t.key):e.toString(36)}function $l(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case fT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ed(o,0):r,zg(s)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),$l(s,e,n,"",function(d){return d})):s!=null&&(Bf(s)&&(s=NT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($g,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",zg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Ed(i,c);o+=$l(i,e,n,u,s)}else if(u=TT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Ed(i,c++),o+=$l(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xl(t,e,n){if(t==null)return t;var r=[],s=0;return $l(t,r,"","",function(i){return e.call(n,i,s++)}),r}function bT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Wl={transition:null},kT={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Ff};function qv(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:xl,forEach:function(t,e,n){xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xl(t,function(){e++}),e},toArray:function(t){return xl(t,function(e){return e})||[]},only:function(t){if(!Bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=qi;ie.Fragment=mT;ie.Profiler=gT;ie.PureComponent=Vf;ie.StrictMode=pT;ie.Suspense=wT;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kT;ie.act=qv;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ff.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)zv.call(e,u)&&!$v.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ma,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:vT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yT,_context:t},t.Consumer=t};ie.createElement=Wv;ie.createFactory=function(t){var e=Wv.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:xT,render:t}};ie.isValidElement=Bf;ie.lazy=function(t){return{$$typeof:ET,_payload:{_status:-1,_result:t},_init:bT}};ie.memo=function(t,e){return{$$typeof:_T,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};ie.unstable_act=qv;ie.useCallback=function(t,e){return Dt.current.useCallback(t,e)};ie.useContext=function(t){return Dt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return Dt.current.useEffect(t,e)};ie.useId=function(){return Dt.current.useId()};ie.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Dt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};ie.useRef=function(t){return Dt.current.useRef(t)};ie.useState=function(t){return Dt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Dt.current.useTransition()};ie.version="18.3.1";Lv.exports=ie;var P=Lv.exports;const Hv=hT(P),ST=dT({__proto__:null,default:Hv},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT=P,PT=Symbol.for("react.element"),jT=Symbol.for("react.fragment"),AT=Object.prototype.hasOwnProperty,RT=CT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DT={key:!0,ref:!0,__self:!0,__source:!0};function Gv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AT.call(e,r)&&!DT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PT,type:t,key:i,ref:o,props:s,_owner:RT.current}}cu.Fragment=jT;cu.jsx=Gv;cu.jsxs=Gv;Mv.exports=cu;var a=Mv.exports,hh={},Kv={exports:{}},Zt={},Qv={exports:{}},Yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var te=$.length;$.push(X);e:for(;0<te;){var Te=te-1>>>1,ue=$[Te];if(0<s(ue,X))$[Te]=X,$[te]=ue,te=Te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],te=$.pop();if(te!==X){$[0]=te;e:for(var Te=0,ue=$.length,Pe=ue>>>1;Te<Pe;){var cn=2*(Te+1)-1,un=$[cn],dn=cn+1,tn=$[dn];if(0>s(un,te))dn<ue&&0>s(tn,un)?($[Te]=tn,$[dn]=te,Te=dn):($[Te]=un,$[cn]=te,Te=cn);else if(dn<ue&&0>s(tn,te))$[Te]=tn,$[dn]=te,Te=dn;else break e}}return X}function s($,X){var te=$.sortIndex-X.sortIndex;return te!==0?te:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,f=null,p=3,y=!1,N=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=$)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function A($){if(b=!1,T($),!N)if(n(u)!==null)N=!0,Bn(L);else{var X=n(d);X!==null&&Mt(A,X.startTime-$)}}function L($,X){N=!1,b&&(b=!1,w(x),x=-1),y=!0;var te=p;try{for(T(X),f=n(u);f!==null&&(!(f.expirationTime>X)||$&&!j());){var Te=f.callback;if(typeof Te=="function"){f.callback=null,p=f.priorityLevel;var ue=Te(f.expirationTime<=X);X=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(u)&&r(u),T(X)}else r(u);f=n(u)}if(f!==null)var Pe=!0;else{var cn=n(d);cn!==null&&Mt(A,cn.startTime-X),Pe=!1}return Pe}finally{f=null,p=te,y=!1}}var M=!1,v=null,x=-1,I=5,S=-1;function j(){return!(t.unstable_now()-S<I)}function R(){if(v!==null){var $=t.unstable_now();S=$;var X=!0;try{X=v(!0,$)}finally{X?k():(M=!1,v=null)}}else M=!1}var k;if(typeof E=="function")k=function(){E(R)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,Fn=mt.port2;mt.port1.onmessage=R,k=function(){Fn.postMessage(null)}}else k=function(){C(R,0)};function Bn($){v=$,M||(M=!0,k())}function Mt($,X){x=C(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,Bn(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var te=p;p=X;try{return $()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var te=p;p=$;try{return X()}finally{p=te}},t.unstable_scheduleCallback=function($,X,te){var Te=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Te+te:Te):te=Te,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=te+ue,$={id:m++,callback:X,priorityLevel:$,startTime:te,expirationTime:ue,sortIndex:-1},te>Te?($.sortIndex=te,e(d,$),n(u)===null&&$===n(d)&&(b?(w(x),x=-1):b=!0,Mt(A,te-Te))):($.sortIndex=ue,e(u,$),N||y||(N=!0,Bn(L))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var X=p;return function(){var te=p;p=X;try{return $.apply(this,arguments)}finally{p=te}}}})(Yv);Qv.exports=Yv;var OT=Qv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=P,Jt=OT;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xv=new Set,na={};function Us(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(na[t]=e,t=0;t<e.length;t++)Xv.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=Object.prototype.hasOwnProperty,LT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wg={},qg={};function VT(t){return fh.call(qg,t)?!0:fh.call(Wg,t)?!1:LT.test(t)?qg[t]=!0:(Wg[t]=!0,!1)}function UT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FT(t,e,n,r){if(e===null||typeof e>"u"||UT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ot(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function $f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,$f);dt[e]=new Ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,$f);dt[e]=new Ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,$f);dt[e]=new Ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wf(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FT(e,n,s,r)&&(n=null),r||s===null?VT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wl=Symbol.for("react.element"),ni=Symbol.for("react.portal"),ri=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Zv=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),gh=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),ex=Symbol.for("react.offscreen"),Hg=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=Hg&&t[Hg]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Td;function Ao(t){if(Td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Td=e&&e[1]||""}return`
`+Td+t}var Nd=!1;function Id(t,e){if(!t||Nd)return"";Nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ao(t):""}function BT(t){switch(t.tag){case 5:return Ao(t.type);case 16:return Ao("Lazy");case 13:return Ao("Suspense");case 19:return Ao("SuspenseList");case 0:case 2:case 15:return t=Id(t.type,!1),t;case 11:return t=Id(t.type.render,!1),t;case 1:return t=Id(t.type,!0),t;default:return""}}function yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ri:return"Fragment";case ni:return"Portal";case mh:return"Profiler";case qf:return"StrictMode";case ph:return"Suspense";case gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zv:return(t.displayName||"Context")+".Consumer";case Jv:return(t._context.displayName||"Context")+".Provider";case Hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:yh(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return yh(t(e))}catch{}}return null}function zT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yh(e);case 8:return e===qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $T(t){var e=tx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _l(t){t._valueTracker||(t._valueTracker=$T(t))}function nx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vh(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rx(t,e){e=e.checked,e!=null&&Wf(t,"checked",e,!1)}function xh(t,e){rx(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wh(t,e.type,n):e.hasOwnProperty("defaultValue")&&wh(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wh(t,e,n){(e!=="number"||mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ro=Array.isArray;function pi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ro(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function sx(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Yg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ix(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ix(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var El,ox=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=El.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WT=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){WT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function ax(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function lx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ax(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qT=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(qT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ih=null;function Kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bh=null,gi=null,yi=null;function Xg(t){if(t=Ua(t)){if(typeof bh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=mu(e),bh(t.stateNode,t.type,e))}}function cx(t){gi?yi?yi.push(t):yi=[t]:gi=t}function ux(){if(gi){var t=gi,e=yi;if(yi=gi=null,Xg(t),e)for(t=0;t<e.length;t++)Xg(e[t])}}function dx(t,e){return t(e)}function hx(){}var bd=!1;function fx(t,e,n){if(bd)return t(e,n);bd=!0;try{return dx(t,e,n)}finally{bd=!1,(gi!==null||yi!==null)&&(hx(),ux())}}function sa(t,e){var n=t.stateNode;if(n===null)return null;var r=mu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var kh=!1;if(nr)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){kh=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{kh=!1}function HT(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var $o=!1,pc=null,gc=!1,Sh=null,GT={onError:function(t){$o=!0,pc=t}};function KT(t,e,n,r,s,i,o,c,u){$o=!1,pc=null,HT.apply(GT,arguments)}function QT(t,e,n,r,s,i,o,c,u){if(KT.apply(this,arguments),$o){if($o){var d=pc;$o=!1,pc=null}else throw Error(F(198));gc||(gc=!0,Sh=d)}}function Fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jg(t){if(Fs(t)!==t)throw Error(F(188))}function YT(t){var e=t.alternate;if(!e){if(e=Fs(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jg(s),t;if(i===r)return Jg(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function px(t){return t=YT(t),t!==null?gx(t):null}function gx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gx(t);if(e!==null)return e;t=t.sibling}return null}var yx=Jt.unstable_scheduleCallback,Zg=Jt.unstable_cancelCallback,XT=Jt.unstable_shouldYield,JT=Jt.unstable_requestPaint,$e=Jt.unstable_now,ZT=Jt.unstable_getCurrentPriorityLevel,Qf=Jt.unstable_ImmediatePriority,vx=Jt.unstable_UserBlockingPriority,yc=Jt.unstable_NormalPriority,eN=Jt.unstable_LowPriority,xx=Jt.unstable_IdlePriority,uu=null,Sn=null;function tN(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(uu,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:sN,nN=Math.log,rN=Math.LN2;function sN(t){return t>>>=0,t===0?32:31-(nN(t)/rN|0)|0}var Tl=64,Nl=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Do(c):(i&=o,i!==0&&(r=Do(i)))}else o=n&~s,o!==0?r=Do(o):i!==0&&(r=Do(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),s=1<<n,r|=t[n],e&=~s;return r}function iN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=iN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wx(){var t=Tl;return Tl<<=1,!(Tl&4194240)&&(Tl=64),t}function kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function aN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function _x(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ex,Xf,Tx,Nx,Ix,Ph=!1,Il=[],Dr=null,Or=null,Mr=null,ia=new Map,oa=new Map,Nr=[],lN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e0(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oa.delete(e.pointerId)}}function Eo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&Xf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cN(t,e,n,r,s){switch(e){case"focusin":return Dr=Eo(Dr,t,e,n,r,s),!0;case"dragenter":return Or=Eo(Or,t,e,n,r,s),!0;case"mouseover":return Mr=Eo(Mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ia.set(i,Eo(ia.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,oa.set(i,Eo(oa.get(i)||null,t,e,n,r,s)),!0}return!1}function bx(t){var e=gs(t.target);if(e!==null){var n=Fs(e);if(n!==null){if(e=n.tag,e===13){if(e=mx(n),e!==null){t.blockedOn=e,Ix(t.priority,function(){Tx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ih=r,n.target.dispatchEvent(r),Ih=null}else return e=Ua(n),e!==null&&Xf(e),t.blockedOn=n,!1;e.shift()}return!0}function t0(t,e,n){ql(t)&&n.delete(e)}function uN(){Ph=!1,Dr!==null&&ql(Dr)&&(Dr=null),Or!==null&&ql(Or)&&(Or=null),Mr!==null&&ql(Mr)&&(Mr=null),ia.forEach(t0),oa.forEach(t0)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,Ph||(Ph=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,uN)))}function aa(t){function e(s){return To(s,t)}if(0<Il.length){To(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&To(Dr,t),Or!==null&&To(Or,t),Mr!==null&&To(Mr,t),ia.forEach(e),oa.forEach(e),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)bx(n),n.blockedOn===null&&Nr.shift()}var vi=ur.ReactCurrentBatchConfig,xc=!0;function dN(t,e,n,r){var s=ge,i=vi.transition;vi.transition=null;try{ge=1,Jf(t,e,n,r)}finally{ge=s,vi.transition=i}}function hN(t,e,n,r){var s=ge,i=vi.transition;vi.transition=null;try{ge=4,Jf(t,e,n,r)}finally{ge=s,vi.transition=i}}function Jf(t,e,n,r){if(xc){var s=jh(t,e,n,r);if(s===null)Ld(t,e,r,wc,n),e0(t,r);else if(cN(s,t,e,n,r))r.stopPropagation();else if(e0(t,r),e&4&&-1<lN.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&Ex(i),i=jh(t,e,n,r),i===null&&Ld(t,e,r,wc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ld(t,e,r,null,n)}}var wc=null;function jh(t,e,n,r){if(wc=null,t=Kf(r),t=gs(t),t!==null)if(e=Fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wc=t,null}function kx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZT()){case Qf:return 1;case vx:return 4;case yc:case eN:return 16;case xx:return 536870912;default:return 16}default:return 16}}var Pr=null,Zf=null,Hl=null;function Sx(){if(Hl)return Hl;var t,e=Zf,n=e.length,r,s="value"in Pr?Pr.value:Pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Hl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function n0(){return!1}function en(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bl:n0,this.isPropagationStopped=n0,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=en(Hi),Va=Oe({},Hi,{view:0,detail:0}),fN=en(Va),Sd,Cd,No,du=Oe({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(Sd=t.screenX-No.screenX,Cd=t.screenY-No.screenY):Cd=Sd=0,No=t),Sd)},movementY:function(t){return"movementY"in t?t.movementY:Cd}}),r0=en(du),mN=Oe({},du,{dataTransfer:0}),pN=en(mN),gN=Oe({},Va,{relatedTarget:0}),Pd=en(gN),yN=Oe({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),vN=en(yN),xN=Oe({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wN=en(xN),_N=Oe({},Hi,{data:0}),s0=en(_N),EN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NN[t])?!!e[t]:!1}function tm(){return IN}var bN=Oe({},Va,{key:function(t){if(t.key){var e=EN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kN=en(bN),SN=Oe({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=en(SN),CN=Oe({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),PN=en(CN),jN=Oe({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),AN=en(jN),RN=Oe({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DN=en(RN),ON=[9,13,27,32],nm=nr&&"CompositionEvent"in window,Wo=null;nr&&"documentMode"in document&&(Wo=document.documentMode);var MN=nr&&"TextEvent"in window&&!Wo,Cx=nr&&(!nm||Wo&&8<Wo&&11>=Wo),o0=" ",a0=!1;function Px(t,e){switch(t){case"keyup":return ON.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function LN(t,e){switch(t){case"compositionend":return jx(e);case"keypress":return e.which!==32?null:(a0=!0,o0);case"textInput":return t=e.data,t===o0&&a0?null:t;default:return null}}function VN(t,e){if(si)return t==="compositionend"||!nm&&Px(t,e)?(t=Sx(),Hl=Zf=Pr=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cx&&e.locale!=="ko"?null:e.data;default:return null}}var UN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UN[t.type]:e==="textarea"}function Ax(t,e,n,r){cx(r),e=_c(e,"onChange"),0<e.length&&(n=new em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qo=null,la=null;function FN(t){$x(t,0)}function hu(t){var e=ai(t);if(nx(e))return t}function BN(t,e){if(t==="change")return e}var Rx=!1;if(nr){var jd;if(nr){var Ad="oninput"in document;if(!Ad){var c0=document.createElement("div");c0.setAttribute("oninput","return;"),Ad=typeof c0.oninput=="function"}jd=Ad}else jd=!1;Rx=jd&&(!document.documentMode||9<document.documentMode)}function u0(){qo&&(qo.detachEvent("onpropertychange",Dx),la=qo=null)}function Dx(t){if(t.propertyName==="value"&&hu(la)){var e=[];Ax(e,la,t,Kf(t)),fx(FN,e)}}function zN(t,e,n){t==="focusin"?(u0(),qo=e,la=n,qo.attachEvent("onpropertychange",Dx)):t==="focusout"&&u0()}function $N(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(la)}function WN(t,e){if(t==="click")return hu(e)}function qN(t,e){if(t==="input"||t==="change")return hu(e)}function HN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:HN;function ca(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fh.call(e,s)||!_n(t[s],e[s]))return!1}return!0}function d0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h0(t,e){var n=d0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d0(n)}}function Ox(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ox(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mx(){for(var t=window,e=mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mc(t.document)}return e}function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GN(t){var e=Mx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ox(n.ownerDocument.documentElement,n)){if(r!==null&&rm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=h0(n,i);var o=h0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KN=nr&&"documentMode"in document&&11>=document.documentMode,ii=null,Ah=null,Ho=null,Rh=!1;function f0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rh||ii==null||ii!==mc(r)||(r=ii,"selectionStart"in r&&rm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ho&&ca(Ho,r)||(Ho=r,r=_c(Ah,"onSelect"),0<r.length&&(e=new em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ii)))}function kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oi={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Rd={},Lx={};nr&&(Lx=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function fu(t){if(Rd[t])return Rd[t];if(!oi[t])return t;var e=oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lx)return Rd[t]=e[n];return t}var Vx=fu("animationend"),Ux=fu("animationiteration"),Fx=fu("animationstart"),Bx=fu("transitionend"),zx=new Map,m0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){zx.set(t,e),Us(e,[t])}for(var Dd=0;Dd<m0.length;Dd++){var Od=m0[Dd],QN=Od.toLowerCase(),YN=Od[0].toUpperCase()+Od.slice(1);ts(QN,"on"+YN)}ts(Vx,"onAnimationEnd");ts(Ux,"onAnimationIteration");ts(Fx,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(Bx,"onTransitionEnd");Ii("onMouseEnter",["mouseout","mouseover"]);Ii("onMouseLeave",["mouseout","mouseover"]);Ii("onPointerEnter",["pointerout","pointerover"]);Ii("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function p0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QT(r,e,void 0,t),t.currentTarget=null}function $x(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;p0(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;p0(s,c,d),i=u}}}if(gc)throw t=Sh,gc=!1,Sh=null,t}function Ie(t,e){var n=e[Vh];n===void 0&&(n=e[Vh]=new Set);var r=t+"__bubble";n.has(r)||(Wx(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),Wx(n,t,r,e)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[Sl]){t[Sl]=!0,Xv.forEach(function(n){n!=="selectionchange"&&(XN.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sl]||(e[Sl]=!0,Md("selectionchange",!1,e))}}function Wx(t,e,n,r){switch(kx(e)){case 1:var s=dN;break;case 4:s=hN;break;default:s=Jf}n=s.bind(null,e,n,t),s=void 0,!kh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ld(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=gs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}fx(function(){var d=i,m=Kf(n),f=[];e:{var p=zx.get(t);if(p!==void 0){var y=em,N=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":y=kN;break;case"focusin":N="focus",y=Pd;break;case"focusout":N="blur",y=Pd;break;case"beforeblur":case"afterblur":y=Pd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=r0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=pN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=PN;break;case Vx:case Ux:case Fx:y=vN;break;case Bx:y=AN;break;case"scroll":y=fN;break;case"wheel":y=DN;break;case"copy":case"cut":case"paste":y=wN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=i0}var b=(e&4)!==0,C=!b&&t==="scroll",w=b?p!==null?p+"Capture":null:p;b=[];for(var E=d,T;E!==null;){T=E;var A=T.stateNode;if(T.tag===5&&A!==null&&(T=A,w!==null&&(A=sa(E,w),A!=null&&b.push(da(E,A,T)))),C)break;E=E.return}0<b.length&&(p=new y(p,N,null,n,m),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Ih&&(N=n.relatedTarget||n.fromElement)&&(gs(N)||N[rr]))break e;if((y||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,y?(N=n.relatedTarget||n.toElement,y=d,N=N?gs(N):null,N!==null&&(C=Fs(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(b=r0,A="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=i0,A="onPointerLeave",w="onPointerEnter",E="pointer"),C=y==null?p:ai(y),T=N==null?p:ai(N),p=new b(A,E+"leave",y,n,m),p.target=C,p.relatedTarget=T,A=null,gs(m)===d&&(b=new b(w,E+"enter",N,n,m),b.target=T,b.relatedTarget=C,A=b),C=A,y&&N)t:{for(b=y,w=N,E=0,T=b;T;T=Ys(T))E++;for(T=0,A=w;A;A=Ys(A))T++;for(;0<E-T;)b=Ys(b),E--;for(;0<T-E;)w=Ys(w),T--;for(;E--;){if(b===w||w!==null&&b===w.alternate)break t;b=Ys(b),w=Ys(w)}b=null}else b=null;y!==null&&g0(f,p,y,b,!1),N!==null&&C!==null&&g0(f,C,N,b,!0)}}e:{if(p=d?ai(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var L=BN;else if(l0(p))if(Rx)L=qN;else{L=$N;var M=zN}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=WN);if(L&&(L=L(t,d))){Ax(f,L,n,m);break e}M&&M(t,p,d),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&wh(p,"number",p.value)}switch(M=d?ai(d):window,t){case"focusin":(l0(M)||M.contentEditable==="true")&&(ii=M,Ah=d,Ho=null);break;case"focusout":Ho=Ah=ii=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,f0(f,n,m);break;case"selectionchange":if(KN)break;case"keydown":case"keyup":f0(f,n,m)}var v;if(nm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else si?Px(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Cx&&n.locale!=="ko"&&(si||x!=="onCompositionStart"?x==="onCompositionEnd"&&si&&(v=Sx()):(Pr=m,Zf="value"in Pr?Pr.value:Pr.textContent,si=!0)),M=_c(d,x),0<M.length&&(x=new s0(x,t,null,n,m),f.push({event:x,listeners:M}),v?x.data=v:(v=jx(n),v!==null&&(x.data=v)))),(v=MN?LN(t,n):VN(t,n))&&(d=_c(d,"onBeforeInput"),0<d.length&&(m=new s0("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:d}),m.data=v))}$x(f,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=sa(t,n),i!=null&&r.unshift(da(t,i,s)),i=sa(t,e),i!=null&&r.push(da(t,i,s))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=sa(n,i),u!=null&&o.unshift(da(n,u,c))):s||(u=sa(n,i),u!=null&&o.push(da(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JN=/\r\n?/g,ZN=/\u0000|\uFFFD/g;function y0(t){return(typeof t=="string"?t:""+t).replace(JN,`
`).replace(ZN,"")}function Cl(t,e,n){if(e=y0(e),y0(t)!==e&&n)throw Error(F(425))}function Ec(){}var Dh=null,Oh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lh=typeof setTimeout=="function"?setTimeout:void 0,e2=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,t2=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(t){return v0.resolve(null).then(t).catch(n2)}:Lh;function n2(t){setTimeout(function(){throw t})}function Vd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);aa(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),bn="__reactFiber$"+Gi,ha="__reactProps$"+Gi,rr="__reactContainer$"+Gi,Vh="__reactEvents$"+Gi,r2="__reactListeners$"+Gi,s2="__reactHandles$"+Gi;function gs(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x0(t);t!==null;){if(n=t[bn])return n;t=x0(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[bn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ai(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function mu(t){return t[ha]||null}var Uh=[],li=-1;function ns(t){return{current:t}}function ke(t){0>li||(t.current=Uh[li],Uh[li]=null,li--)}function _e(t,e){li++,Uh[li]=t.current,t.current=e}var Gr={},It=ns(Gr),Bt=ns(!1),Is=Gr;function bi(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zt(t){return t=t.childContextTypes,t!=null}function Tc(){ke(Bt),ke(It)}function w0(t,e,n){if(It.current!==Gr)throw Error(F(168));_e(It,e),_e(Bt,n)}function qx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,zT(t)||"Unknown",s));return Oe({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Is=It.current,_e(It,t),_e(Bt,Bt.current),!0}function _0(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=qx(t,e,Is),r.__reactInternalMemoizedMergedChildContext=t,ke(Bt),ke(It),_e(It,t)):ke(Bt),_e(Bt,n)}var qn=null,pu=!1,Ud=!1;function Hx(t){qn===null?qn=[t]:qn.push(t)}function i2(t){pu=!0,Hx(t)}function rs(){if(!Ud&&qn!==null){Ud=!0;var t=0,e=ge;try{var n=qn;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,pu=!1}catch(s){throw qn!==null&&(qn=qn.slice(t+1)),yx(Qf,rs),s}finally{ge=e,Ud=!1}}return null}var ci=[],ui=0,Ic=null,bc=0,nn=[],rn=0,bs=null,Hn=1,Gn="";function hs(t,e){ci[ui++]=bc,ci[ui++]=Ic,Ic=t,bc=e}function Gx(t,e,n){nn[rn++]=Hn,nn[rn++]=Gn,nn[rn++]=bs,bs=t;var r=Hn;t=Gn;var s=32-vn(r)-1;r&=~(1<<s),n+=1;var i=32-vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-vn(e)+s|n<<s|r,Gn=i+t}else Hn=1<<i|n<<s|r,Gn=t}function sm(t){t.return!==null&&(hs(t,1),Gx(t,1,0))}function im(t){for(;t===Ic;)Ic=ci[--ui],ci[ui]=null,bc=ci[--ui],ci[ui]=null;for(;t===bs;)bs=nn[--rn],nn[rn]=null,Gn=nn[--rn],nn[rn]=null,Hn=nn[--rn],nn[rn]=null}var Yt=null,Kt=null,Ce=!1,gn=null;function Kx(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function E0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Kt=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bs!==null?{id:Hn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Kt=null,!0):!1;default:return!1}}function Fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bh(t){if(Ce){var e=Kt;if(e){var n=e;if(!E0(t,e)){if(Fh(t))throw Error(F(418));e=Lr(n.nextSibling);var r=Yt;e&&E0(t,e)?Kx(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Yt=t)}}else{if(Fh(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ce=!1,Yt=t}}}function T0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function Pl(t){if(t!==Yt)return!1;if(!Ce)return T0(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=Kt)){if(Fh(t))throw Qx(),Error(F(418));for(;e;)Kx(t,e),e=Lr(e.nextSibling)}if(T0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Yt?Lr(t.stateNode.nextSibling):null;return!0}function Qx(){for(var t=Kt;t;)t=Lr(t.nextSibling)}function ki(){Kt=Yt=null,Ce=!1}function om(t){gn===null?gn=[t]:gn.push(t)}var o2=ur.ReactCurrentBatchConfig;function Io(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function N0(t){var e=t._init;return e(t._payload)}function Yx(t){function e(w,E){if(t){var T=w.deletions;T===null?(w.deletions=[E],w.flags|=16):T.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=Br(w,E),w.index=0,w.sibling=null,w}function i(w,E,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<E?(w.flags|=2,E):T):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function c(w,E,T,A){return E===null||E.tag!==6?(E=Hd(T,w.mode,A),E.return=w,E):(E=s(E,T),E.return=w,E)}function u(w,E,T,A){var L=T.type;return L===ri?m(w,E,T.props.children,A,T.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Er&&N0(L)===E.type)?(A=s(E,T.props),A.ref=Io(w,E,T),A.return=w,A):(A=ec(T.type,T.key,T.props,null,w.mode,A),A.ref=Io(w,E,T),A.return=w,A)}function d(w,E,T,A){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Gd(T,w.mode,A),E.return=w,E):(E=s(E,T.children||[]),E.return=w,E)}function m(w,E,T,A,L){return E===null||E.tag!==7?(E=_s(T,w.mode,A,L),E.return=w,E):(E=s(E,T),E.return=w,E)}function f(w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Hd(""+E,w.mode,T),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wl:return T=ec(E.type,E.key,E.props,null,w.mode,T),T.ref=Io(w,null,E),T.return=w,T;case ni:return E=Gd(E,w.mode,T),E.return=w,E;case Er:var A=E._init;return f(w,A(E._payload),T)}if(Ro(E)||wo(E))return E=_s(E,w.mode,T,null),E.return=w,E;jl(w,E)}return null}function p(w,E,T,A){var L=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:c(w,E,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wl:return T.key===L?u(w,E,T,A):null;case ni:return T.key===L?d(w,E,T,A):null;case Er:return L=T._init,p(w,E,L(T._payload),A)}if(Ro(T)||wo(T))return L!==null?null:m(w,E,T,A,null);jl(w,T)}return null}function y(w,E,T,A,L){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(T)||null,c(E,w,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case wl:return w=w.get(A.key===null?T:A.key)||null,u(E,w,A,L);case ni:return w=w.get(A.key===null?T:A.key)||null,d(E,w,A,L);case Er:var M=A._init;return y(w,E,T,M(A._payload),L)}if(Ro(A)||wo(A))return w=w.get(T)||null,m(E,w,A,L,null);jl(E,A)}return null}function N(w,E,T,A){for(var L=null,M=null,v=E,x=E=0,I=null;v!==null&&x<T.length;x++){v.index>x?(I=v,v=null):I=v.sibling;var S=p(w,v,T[x],A);if(S===null){v===null&&(v=I);break}t&&v&&S.alternate===null&&e(w,v),E=i(S,E,x),M===null?L=S:M.sibling=S,M=S,v=I}if(x===T.length)return n(w,v),Ce&&hs(w,x),L;if(v===null){for(;x<T.length;x++)v=f(w,T[x],A),v!==null&&(E=i(v,E,x),M===null?L=v:M.sibling=v,M=v);return Ce&&hs(w,x),L}for(v=r(w,v);x<T.length;x++)I=y(v,w,x,T[x],A),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?x:I.key),E=i(I,E,x),M===null?L=I:M.sibling=I,M=I);return t&&v.forEach(function(j){return e(w,j)}),Ce&&hs(w,x),L}function b(w,E,T,A){var L=wo(T);if(typeof L!="function")throw Error(F(150));if(T=L.call(T),T==null)throw Error(F(151));for(var M=L=null,v=E,x=E=0,I=null,S=T.next();v!==null&&!S.done;x++,S=T.next()){v.index>x?(I=v,v=null):I=v.sibling;var j=p(w,v,S.value,A);if(j===null){v===null&&(v=I);break}t&&v&&j.alternate===null&&e(w,v),E=i(j,E,x),M===null?L=j:M.sibling=j,M=j,v=I}if(S.done)return n(w,v),Ce&&hs(w,x),L;if(v===null){for(;!S.done;x++,S=T.next())S=f(w,S.value,A),S!==null&&(E=i(S,E,x),M===null?L=S:M.sibling=S,M=S);return Ce&&hs(w,x),L}for(v=r(w,v);!S.done;x++,S=T.next())S=y(v,w,x,S.value,A),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?x:S.key),E=i(S,E,x),M===null?L=S:M.sibling=S,M=S);return t&&v.forEach(function(R){return e(w,R)}),Ce&&hs(w,x),L}function C(w,E,T,A){if(typeof T=="object"&&T!==null&&T.type===ri&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wl:e:{for(var L=T.key,M=E;M!==null;){if(M.key===L){if(L=T.type,L===ri){if(M.tag===7){n(w,M.sibling),E=s(M,T.props.children),E.return=w,w=E;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Er&&N0(L)===M.type){n(w,M.sibling),E=s(M,T.props),E.ref=Io(w,M,T),E.return=w,w=E;break e}n(w,M);break}else e(w,M);M=M.sibling}T.type===ri?(E=_s(T.props.children,w.mode,A,T.key),E.return=w,w=E):(A=ec(T.type,T.key,T.props,null,w.mode,A),A.ref=Io(w,E,T),A.return=w,w=A)}return o(w);case ni:e:{for(M=T.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(w,E.sibling),E=s(E,T.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Gd(T,w.mode,A),E.return=w,w=E}return o(w);case Er:return M=T._init,C(w,E,M(T._payload),A)}if(Ro(T))return N(w,E,T,A);if(wo(T))return b(w,E,T,A);jl(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,T),E.return=w,w=E):(n(w,E),E=Hd(T,w.mode,A),E.return=w,w=E),o(w)):n(w,E)}return C}var Si=Yx(!0),Xx=Yx(!1),kc=ns(null),Sc=null,di=null,am=null;function lm(){am=di=Sc=null}function cm(t){var e=kc.current;ke(kc),t._currentValue=e}function zh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xi(t,e){Sc=t,am=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function an(t){var e=t._currentValue;if(am!==t)if(t={context:t,memoizedValue:e,next:null},di===null){if(Sc===null)throw Error(F(308));di=t,Sc.dependencies={lanes:0,firstContext:t}}else di=di.next=t;return e}var ys=null;function um(t){ys===null?ys=[t]:ys.push(t)}function Jx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,um(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,um(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}function I0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cc(t,e,n,r){var s=t.updateQueue;Tr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,m=d=u=null,c=i;do{var p=c.lane,y=c.eventTime;if((r&p)===p){m!==null&&(m=m.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,b=c;switch(p=e,y=n,b.tag){case 1:if(N=b.payload,typeof N=="function"){f=N.call(y,f,p);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=b.payload,p=typeof N=="function"?N.call(y,f,p):N,p==null)break e;f=Oe({},f,p);break e;case 2:Tr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else y={eventTime:y,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=y,u=f):m=m.next=y,o|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=f}}function b0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Fa={},Cn=ns(Fa),fa=ns(Fa),ma=ns(Fa);function vs(t){if(t===Fa)throw Error(F(174));return t}function hm(t,e){switch(_e(ma,e),_e(fa,t),_e(Cn,Fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}ke(Cn),_e(Cn,e)}function Ci(){ke(Cn),ke(fa),ke(ma)}function ew(t){vs(ma.current);var e=vs(Cn.current),n=Eh(e,t.type);e!==n&&(_e(fa,t),_e(Cn,n))}function fm(t){fa.current===t&&(ke(Cn),ke(fa))}var je=ns(0);function Pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fd=[];function mm(){for(var t=0;t<Fd.length;t++)Fd[t]._workInProgressVersionPrimary=null;Fd.length=0}var Ql=ur.ReactCurrentDispatcher,Bd=ur.ReactCurrentBatchConfig,ks=0,Re=null,Ye=null,tt=null,jc=!1,Go=!1,pa=0,a2=0;function vt(){throw Error(F(321))}function pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function gm(t,e,n,r,s,i){if(ks=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ql.current=t===null||t.memoizedState===null?d2:h2,t=n(r,s),Go){i=0;do{if(Go=!1,pa=0,25<=i)throw Error(F(301));i+=1,tt=Ye=null,e.updateQueue=null,Ql.current=f2,t=n(r,s)}while(Go)}if(Ql.current=Ac,e=Ye!==null&&Ye.next!==null,ks=0,tt=Ye=Re=null,jc=!1,e)throw Error(F(300));return t}function ym(){var t=pa!==0;return pa=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Re.memoizedState=tt=t:tt=tt.next=t,tt}function ln(){if(Ye===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?Re.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(F(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?Re.memoizedState=tt=t:tt=tt.next=t}return tt}function ga(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=ln(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var m=d.lane;if((ks&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,Re.lanes|=m,Ss|=m}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,_n(r,e.memoizedState)||(Ut=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $d(t){var e=ln(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);_n(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tw(){}function nw(t,e){var n=Re,r=ln(),s=e(),i=!_n(r.memoizedState,s);if(i&&(r.memoizedState=s,Ut=!0),r=r.queue,vm(iw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ya(9,sw.bind(null,n,r,s,e),void 0,null),nt===null)throw Error(F(349));ks&30||rw(n,e,s)}return s}function rw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sw(t,e,n,r){e.value=n,e.getSnapshot=r,ow(e)&&aw(t)}function iw(t,e,n){return n(function(){ow(e)&&aw(t)})}function ow(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function aw(t){var e=sr(t,1);e!==null&&xn(e,t,1,-1)}function k0(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=u2.bind(null,Re,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lw(){return ln().memoizedState}function Yl(t,e,n,r){var s=In();Re.flags|=t,s.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function gu(t,e,n,r){var s=ln();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,r!==null&&pm(r,o.deps)){s.memoizedState=ya(e,n,i,r);return}}Re.flags|=t,s.memoizedState=ya(1|e,n,i,r)}function S0(t,e){return Yl(8390656,8,t,e)}function vm(t,e){return gu(2048,8,t,e)}function cw(t,e){return gu(4,2,t,e)}function uw(t,e){return gu(4,4,t,e)}function dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hw(t,e,n){return n=n!=null?n.concat([t]):null,gu(4,4,dw.bind(null,e,t),n)}function xm(){}function fw(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mw(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pw(t,e,n){return ks&21?(_n(n,e)||(n=wx(),Re.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function l2(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Bd.transition;Bd.transition={};try{t(!1),e()}finally{ge=n,Bd.transition=r}}function gw(){return ln().memoizedState}function c2(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yw(t))vw(e,n);else if(n=Jx(t,e,n,r),n!==null){var s=jt();xn(n,t,r,s),xw(n,e,r)}}function u2(t,e,n){var r=Fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yw(t))vw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,_n(c,o)){var u=e.interleaved;u===null?(s.next=s,um(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Jx(t,e,s,r),n!==null&&(s=jt(),xn(n,t,r,s),xw(n,e,r))}}function yw(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function vw(t,e){Go=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}var Ac={readContext:an,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},d2={readContext:an,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:S0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yl(4194308,4,dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c2.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:k0,useDebugValue:xm,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=k0(!1),e=t[0];return t=l2.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=In();if(Ce){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),nt===null)throw Error(F(349));ks&30||rw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,S0(iw.bind(null,r,i,t),[t]),r.flags|=2048,ya(9,sw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=nt.identifierPrefix;if(Ce){var n=Gn,r=Hn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h2={readContext:an,useCallback:fw,useContext:an,useEffect:vm,useImperativeHandle:hw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:mw,useReducer:zd,useRef:lw,useState:function(){return zd(ga)},useDebugValue:xm,useDeferredValue:function(t){var e=ln();return pw(e,Ye.memoizedState,t)},useTransition:function(){var t=zd(ga)[0],e=ln().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1},f2={readContext:an,useCallback:fw,useContext:an,useEffect:vm,useImperativeHandle:hw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:mw,useReducer:$d,useRef:lw,useState:function(){return $d(ga)},useDebugValue:xm,useDeferredValue:function(t){var e=ln();return Ye===null?e.memoizedState=t:pw(e,Ye.memoizedState,t)},useTransition:function(){var t=$d(ga)[0],e=ln().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yu={isMounted:function(t){return(t=t._reactInternals)?Fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),s=Fr(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(xn(e,t,s,r),Kl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),s=Fr(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(xn(e,t,s,r),Kl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Fr(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vr(t,s,r),e!==null&&(xn(e,t,r,n),Kl(e,t,r))}};function C0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ca(n,r)||!ca(s,i):!0}function ww(t,e,n){var r=!1,s=Gr,i=e.contextType;return typeof i=="object"&&i!==null?i=an(i):(s=zt(e)?Is:It.current,r=e.contextTypes,i=(r=r!=null)?bi(t,s):Gr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function P0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yu.enqueueReplaceState(e,e.state,null)}function Wh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},dm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=an(i):(i=zt(e)?Is:It.current,s.context=bi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($h(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yu.enqueueReplaceState(s,s.state,null),Cc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=BT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var m2=typeof WeakMap=="function"?WeakMap:Map;function _w(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,tf=r),qh(t,e)},n}function Ew(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function j0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new m2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=S2.bind(null,t,e,n),e.then(t,t))}function A0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var p2=ur.ReactCurrentOwner,Ut=!1;function Pt(t,e,n,r){e.child=t===null?Xx(e,null,n,r):Si(e,t.child,n,r)}function D0(t,e,n,r,s){n=n.render;var i=e.ref;return xi(e,s),r=gm(t,e,n,r,i,s),n=ym(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&n&&sm(e),e.flags|=1,Pt(t,e,r,s),e.child)}function O0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!km(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Tw(t,e,i,r,s)):(t=ec(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ca,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=Br(i,r),t.ref=e.ref,t.return=e,e.child=t}function Tw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ca(i,r)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,ir(t,e,s)}return Hh(t,e,n,r,s)}function Nw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(fi,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(fi,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(fi,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(fi,Gt),Gt|=r;return Pt(t,e,s,n),e.child}function Iw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hh(t,e,n,r,s){var i=zt(n)?Is:It.current;return i=bi(e,i),xi(e,s),n=gm(t,e,n,r,i,s),r=ym(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(Ce&&r&&sm(e),e.flags|=1,Pt(t,e,n,s),e.child)}function M0(t,e,n,r,s){if(zt(n)){var i=!0;Nc(e)}else i=!1;if(xi(e,s),e.stateNode===null)Xl(t,e),ww(e,n,r),Wh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=an(d):(d=zt(n)?Is:It.current,d=bi(e,d));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&P0(e,o,r,d),Tr=!1;var p=e.memoizedState;o.state=p,Cc(e,r,o,s),u=e.memoizedState,c!==r||p!==u||Bt.current||Tr?(typeof m=="function"&&($h(e,n,m,r),u=e.memoizedState),(c=Tr||C0(e,n,c,r,p,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:mn(e.type,c),o.props=d,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=an(u):(u=zt(n)?Is:It.current,u=bi(e,u));var y=n.getDerivedStateFromProps;(m=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||p!==u)&&P0(e,o,r,u),Tr=!1,p=e.memoizedState,o.state=p,Cc(e,r,o,s);var N=e.memoizedState;c!==f||p!==N||Bt.current||Tr?(typeof y=="function"&&($h(e,n,y,r),N=e.memoizedState),(d=Tr||C0(e,n,d,r,p,N,u)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Gh(t,e,n,r,i,s)}function Gh(t,e,n,r,s,i){Iw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_0(e,n,!1),ir(t,e,i);r=e.stateNode,p2.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,i),e.child=Si(e,null,c,i)):Pt(t,e,c,i),e.memoizedState=r.state,s&&_0(e,n,!0),e.child}function bw(t){var e=t.stateNode;e.pendingContext?w0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w0(t,e.context,!1),hm(t,e.containerInfo)}function L0(t,e,n,r,s){return ki(),om(s),e.flags|=256,Pt(t,e,n,r),e.child}var Kh={dehydrated:null,treeContext:null,retryLane:0};function Qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function kw(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(je,s&1),t===null)return Bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wu(o,r,0,null),t=_s(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qh(n),e.memoizedState=Kh,t):wm(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return g2(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Br(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Br(c,i):(i=_s(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kh,r}return i=t.child,t=i.sibling,r=Br(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wm(t,e){return e=wu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&om(r),Si(e,t.child,null,n),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g2(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(F(422))),Al(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wu({mode:"visible",children:r.children},s,0,null),i=_s(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=Qh(o),e.memoizedState=Kh,i);if(!(e.mode&1))return Al(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(F(419)),r=Wd(i,r,void 0),Al(t,e,o,r)}if(c=(o&t.childLanes)!==0,Ut||c){if(r=nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),xn(r,t,s,-1))}return bm(),r=Wd(Error(F(421))),Al(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=C2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Kt=Lr(s.nextSibling),Yt=e,Ce=!0,gn=null,t!==null&&(nn[rn++]=Hn,nn[rn++]=Gn,nn[rn++]=bs,Hn=t.id,Gn=t.overflow,bs=e),e=wm(e,r.children),e.flags|=4096,e)}function V0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zh(t.return,e,n)}function qd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V0(t,n,e);else if(t.tag===19)V0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qd(e,!0,n,null,i);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y2(t,e,n){switch(e.tag){case 3:bw(e),ki();break;case 5:ew(e);break;case 1:zt(e.type)&&Nc(e);break;case 4:hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(kc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?kw(t,e,n):(_e(je,je.current&1),t=ir(t,e,n),t!==null?t.sibling:null);_e(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,Nw(t,e,n)}return ir(t,e,n)}var Cw,Yh,Pw,jw;Cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yh=function(){};Pw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vs(Cn.current);var i=null;switch(n){case"input":s=vh(t,s),r=vh(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=_h(t,s),r=_h(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ec)}Th(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(na.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(na.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ie("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};jw=function(t,e,n,r){n!==r&&(e.flags|=4)};function bo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function v2(t,e,n){var r=e.pendingProps;switch(im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return zt(e.type)&&Tc(),xt(e),null;case 3:return r=e.stateNode,Ci(),ke(Bt),ke(It),mm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(sf(gn),gn=null))),Yh(t,e),xt(e),null;case 5:fm(e);var s=vs(ma.current);if(n=e.type,t!==null&&e.stateNode!=null)Pw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return xt(e),null}if(t=vs(Cn.current),Pl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[ha]=i,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ie(Oo[s],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Gg(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":Qg(r,i),Ie("invalid",r)}Th(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",""+c]):na.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":_l(r),Kg(r,i,!0);break;case"textarea":_l(r),Yg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ec)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ix(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[ha]=r,Cw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nh(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),s=r;break;case"iframe":case"object":case"embed":Ie("load",t),s=r;break;case"video":case"audio":for(s=0;s<Oo.length;s++)Ie(Oo[s],t);s=r;break;case"source":Ie("error",t),s=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),s=r;break;case"details":Ie("toggle",t),s=r;break;case"input":Gg(t,r),s=vh(t,r),Ie("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":Qg(t,r),s=_h(t,r),Ie("invalid",t);break;default:s=r}Th(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?lx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ox(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ra(t,u):typeof u=="number"&&ra(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(na.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ie("scroll",t):u!=null&&Wf(t,i,u,o))}switch(n){case"input":_l(t),Kg(t,r,!1);break;case"textarea":_l(t),Yg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?pi(t,!!r.multiple,i,!1):r.defaultValue!=null&&pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)jw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=vs(ma.current),vs(Cn.current),Pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return xt(e),null;case 13:if(ke(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Kt!==null&&e.mode&1&&!(e.flags&128))Qx(),ki(),e.flags|=98560,i=!1;else if(i=Pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[bn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else gn!==null&&(sf(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Xe===0&&(Xe=3):bm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Ci(),Yh(t,e),t===null&&ua(e.stateNode.containerInfo),xt(e),null;case 10:return cm(e.type._context),xt(e),null;case 17:return zt(e.type)&&Tc(),xt(e),null;case 19:if(ke(je),i=e.memoizedState,i===null)return xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bo(i,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pc(t),o!==null){for(e.flags|=128,bo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>ji&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return xt(e),null}else 2*$e()-i.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=je.current,_e(je,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Im(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function x2(t,e){switch(im(e),e.tag){case 1:return zt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),ke(Bt),ke(It),mm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fm(e),null;case 13:if(ke(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(je),null;case 4:return Ci(),null;case 10:return cm(e.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var Rl=!1,Et=!1,w2=typeof WeakSet=="function"?WeakSet:Set,H=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Xh(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var U0=!1;function _2(t,e){if(Dh=xc,t=Mx(),rm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,m=0,f=t,p=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(c=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++d===s&&(c=o),p===i&&++m===r&&(u=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oh={focusedElem:t,selectionRange:n},xc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var b=N.memoizedProps,C=N.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:mn(e.type,b),C);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(A){Fe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=U0,U0=!1,N}function Ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xh(e,n,i)}s=s.next}while(s!==r)}}function vu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aw(t){var e=t.alternate;e!==null&&(t.alternate=null,Aw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[ha],delete e[Vh],delete e[r2],delete e[s2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rw(t){return t.tag===5||t.tag===3||t.tag===4}function F0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(r!==4&&(t=t.child,t!==null))for(Zh(t,e,n),t=t.sibling;t!==null;)Zh(t,e,n),t=t.sibling}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}var st=null,pn=!1;function xr(t,e,n){for(n=n.child;n!==null;)Dw(t,e,n),n=n.sibling}function Dw(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(uu,n)}catch{}switch(n.tag){case 5:Et||hi(n,e);case 6:var r=st,s=pn;st=null,xr(t,e,n),st=r,pn=s,st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?Vd(t.parentNode,n):t.nodeType===1&&Vd(t,n),aa(t)):Vd(st,n.stateNode));break;case 4:r=st,s=pn,st=n.stateNode.containerInfo,pn=!0,xr(t,e,n),st=r,pn=s;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xh(n,e,o),s=s.next}while(s!==r)}xr(t,e,n);break;case 1:if(!Et&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Fe(n,e,c)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,xr(t,e,n),Et=r):xr(t,e,n);break;default:xr(t,e,n)}}function B0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w2),e.forEach(function(r){var s=P2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:st=c.stateNode,pn=!1;break e;case 3:st=c.stateNode.containerInfo,pn=!0;break e;case 4:st=c.stateNode.containerInfo,pn=!0;break e}c=c.return}if(st===null)throw Error(F(160));Dw(i,o,s),st=null,pn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Fe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ow(e,t),e=e.sibling}function Ow(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Nn(t),r&4){try{Ko(3,t,t.return),vu(3,t)}catch(b){Fe(t,t.return,b)}try{Ko(5,t,t.return)}catch(b){Fe(t,t.return,b)}}break;case 1:fn(e,t),Nn(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(fn(e,t),Nn(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var s=t.stateNode;try{ra(s,"")}catch(b){Fe(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&rx(s,i),Nh(c,o);var d=Nh(c,i);for(o=0;o<u.length;o+=2){var m=u[o],f=u[o+1];m==="style"?lx(s,f):m==="dangerouslySetInnerHTML"?ox(s,f):m==="children"?ra(s,f):Wf(s,m,f,d)}switch(c){case"input":xh(s,i);break;case"textarea":sx(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?pi(s,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?pi(s,!!i.multiple,i.defaultValue,!0):pi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ha]=i}catch(b){Fe(t,t.return,b)}}break;case 6:if(fn(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Fe(t,t.return,b)}}break;case 3:if(fn(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(b){Fe(t,t.return,b)}break;case 4:fn(e,t),Nn(t);break;case 13:fn(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Tm=$e())),r&4&&B0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(d=Et)||m,fn(e,t),Et=d):fn(e,t),Nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(H=t,m=t.child;m!==null;){for(f=H=m;H!==null;){switch(p=H,y=p.child,p.tag){case 0:case 11:case 14:case 15:Ko(4,p,p.return);break;case 1:hi(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(b){Fe(r,n,b)}}break;case 5:hi(p,p.return);break;case 22:if(p.memoizedState!==null){$0(f);continue}}y!==null?(y.return=p,H=y):$0(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=ax("display",o))}catch(b){Fe(t,t.return,b)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Fe(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fn(e,t),Nn(t),r&4&&B0(t);break;case 21:break;default:fn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ra(s,""),r.flags&=-33);var i=F0(t);ef(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=F0(t);Zh(t,c,o);break;default:throw Error(F(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E2(t,e,n){H=t,Mw(t)}function Mw(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Et;c=Rl;var d=Et;if(Rl=o,(Et=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?W0(s):u!==null?(u.return=o,H=u):W0(s);for(;i!==null;)H=i,Mw(i),i=i.sibling;H=s,Rl=c,Et=d}z0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):z0(t)}}function z0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||vu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&b0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&aa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Et||e.flags&512&&Jh(e)}catch(p){Fe(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function $0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function W0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vu(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Fe(e,s,u)}}var i=e.return;try{Jh(e)}catch(u){Fe(e,i,u)}break;case 5:var o=e.return;try{Jh(e)}catch(u){Fe(e,o,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){H=null;break}var c=e.sibling;if(c!==null){c.return=e.return,H=c;break}H=e.return}}var T2=Math.ceil,Rc=ur.ReactCurrentDispatcher,_m=ur.ReactCurrentOwner,on=ur.ReactCurrentBatchConfig,he=0,nt=null,qe=null,lt=0,Gt=0,fi=ns(0),Xe=0,va=null,Ss=0,xu=0,Em=0,Qo=null,Lt=null,Tm=0,ji=1/0,Wn=null,Dc=!1,tf=null,Ur=null,Dl=!1,jr=null,Oc=0,Yo=0,nf=null,Jl=-1,Zl=0;function jt(){return he&6?$e():Jl!==-1?Jl:Jl=$e()}function Fr(t){return t.mode&1?he&2&&lt!==0?lt&-lt:o2.transition!==null?(Zl===0&&(Zl=wx()),Zl):(t=ge,t!==0||(t=window.event,t=t===void 0?16:kx(t.type)),t):1}function xn(t,e,n,r){if(50<Yo)throw Yo=0,nf=null,Error(F(185));La(t,n,r),(!(he&2)||t!==nt)&&(t===nt&&(!(he&2)&&(xu|=n),Xe===4&&Ir(t,lt)),$t(t,r),n===1&&he===0&&!(e.mode&1)&&(ji=$e()+500,pu&&rs()))}function $t(t,e){var n=t.callbackNode;oN(t,e);var r=vc(t,t===nt?lt:0);if(r===0)n!==null&&Zg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zg(n),e===1)t.tag===0?i2(q0.bind(null,t)):Hx(q0.bind(null,t)),t2(function(){!(he&6)&&rs()}),n=null;else{switch(_x(r)){case 1:n=Qf;break;case 4:n=vx;break;case 16:n=yc;break;case 536870912:n=xx;break;default:n=yc}n=Ww(n,Lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lw(t,e){if(Jl=-1,Zl=0,he&6)throw Error(F(327));var n=t.callbackNode;if(wi()&&t.callbackNode!==n)return null;var r=vc(t,t===nt?lt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mc(t,r);else{e=r;var s=he;he|=2;var i=Uw();(nt!==t||lt!==e)&&(Wn=null,ji=$e()+500,ws(t,e));do try{b2();break}catch(c){Vw(t,c)}while(!0);lm(),Rc.current=i,he=s,qe!==null?e=0:(nt=null,lt=0,e=Xe)}if(e!==0){if(e===2&&(s=Ch(t),s!==0&&(r=s,e=rf(t,s))),e===1)throw n=va,ws(t,0),Ir(t,r),$t(t,$e()),n;if(e===6)Ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!N2(s)&&(e=Mc(t,r),e===2&&(i=Ch(t),i!==0&&(r=i,e=rf(t,i))),e===1))throw n=va,ws(t,0),Ir(t,r),$t(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:fs(t,Lt,Wn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Tm+500-$e(),10<e)){if(vc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lh(fs.bind(null,t,Lt,Wn),e);break}fs(t,Lt,Wn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T2(r/1960))-r,10<r){t.timeoutHandle=Lh(fs.bind(null,t,Lt,Wn),r);break}fs(t,Lt,Wn);break;case 5:fs(t,Lt,Wn);break;default:throw Error(F(329))}}}return $t(t,$e()),t.callbackNode===n?Lw.bind(null,t):null}function rf(t,e){var n=Qo;return t.current.memoizedState.isDehydrated&&(ws(t,e).flags|=256),t=Mc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&sf(e)),t}function sf(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function N2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!_n(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Em,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function q0(t){if(he&6)throw Error(F(327));wi();var e=vc(t,0);if(!(e&1))return $t(t,$e()),null;var n=Mc(t,e);if(t.tag!==0&&n===2){var r=Ch(t);r!==0&&(e=r,n=rf(t,r))}if(n===1)throw n=va,ws(t,0),Ir(t,e),$t(t,$e()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,Lt,Wn),$t(t,$e()),null}function Nm(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(ji=$e()+500,pu&&rs())}}function Cs(t){jr!==null&&jr.tag===0&&!(he&6)&&wi();var e=he;he|=1;var n=on.transition,r=ge;try{if(on.transition=null,ge=1,t)return t()}finally{ge=r,on.transition=n,he=e,!(he&6)&&rs()}}function Im(){Gt=fi.current,ke(fi)}function ws(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e2(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tc();break;case 3:Ci(),ke(Bt),ke(It),mm();break;case 5:fm(r);break;case 4:Ci();break;case 13:ke(je);break;case 19:ke(je);break;case 10:cm(r.type._context);break;case 22:case 23:Im()}n=n.return}if(nt=t,qe=t=Br(t.current,null),lt=Gt=e,Xe=0,va=null,Em=xu=Ss=0,Lt=Qo=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ys=null}return t}function Vw(t,e){do{var n=qe;try{if(lm(),Ql.current=Ac,jc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(ks=0,tt=Ye=Re=null,Go=!1,pa=0,_m.current=null,n===null||n.return===null){Xe=1,va=e,qe=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=lt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=A0(o);if(y!==null){y.flags&=-257,R0(y,o,c,i,e),y.mode&1&&j0(i,d,e),e=y,u=d;var N=e.updateQueue;if(N===null){var b=new Set;b.add(u),e.updateQueue=b}else N.add(u);break e}else{if(!(e&1)){j0(i,d,e),bm();break e}u=Error(F(426))}}else if(Ce&&c.mode&1){var C=A0(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),R0(C,o,c,i,e),om(Pi(u,c));break e}}i=u=Pi(u,c),Xe!==4&&(Xe=2),Qo===null?Qo=[i]:Qo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=_w(i,u,e);I0(i,w);break e;case 1:c=u;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ur===null||!Ur.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Ew(i,c,e);I0(i,A);break e}}i=i.return}while(i!==null)}Bw(n)}catch(L){e=L,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Uw(){var t=Rc.current;return Rc.current=Ac,t===null?Ac:t}function bm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||!(Ss&268435455)&&!(xu&268435455)||Ir(nt,lt)}function Mc(t,e){var n=he;he|=2;var r=Uw();(nt!==t||lt!==e)&&(Wn=null,ws(t,e));do try{I2();break}catch(s){Vw(t,s)}while(!0);if(lm(),he=n,Rc.current=r,qe!==null)throw Error(F(261));return nt=null,lt=0,Xe}function I2(){for(;qe!==null;)Fw(qe)}function b2(){for(;qe!==null&&!XT();)Fw(qe)}function Fw(t){var e=$w(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Bw(t):qe=e,_m.current=null}function Bw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=x2(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,qe=null;return}}else if(n=v2(n,e,Gt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Xe===0&&(Xe=5)}function fs(t,e,n){var r=ge,s=on.transition;try{on.transition=null,ge=1,k2(t,e,n,r)}finally{on.transition=s,ge=r}return null}function k2(t,e,n,r){do wi();while(jr!==null);if(he&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(aN(t,i),t===nt&&(qe=nt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,Ww(yc,function(){return wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=on.transition,on.transition=null;var o=ge;ge=1;var c=he;he|=4,_m.current=null,_2(t,n),Ow(n,t),GN(Oh),xc=!!Dh,Oh=Dh=null,t.current=n,E2(n),JT(),he=c,ge=o,on.transition=i}else t.current=n;if(Dl&&(Dl=!1,jr=t,Oc=s),i=t.pendingLanes,i===0&&(Ur=null),tN(n.stateNode),$t(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dc)throw Dc=!1,t=tf,tf=null,t;return Oc&1&&t.tag!==0&&wi(),i=t.pendingLanes,i&1?t===nf?Yo++:(Yo=0,nf=t):Yo=0,rs(),null}function wi(){if(jr!==null){var t=_x(Oc),e=on.transition,n=ge;try{if(on.transition=null,ge=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,Oc=0,he&6)throw Error(F(331));var s=he;for(he|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(H=d;H!==null;){var m=H;switch(m.tag){case 0:case 11:case 15:Ko(8,m,i)}var f=m.child;if(f!==null)f.return=m,H=f;else for(;H!==null;){m=H;var p=m.sibling,y=m.return;if(Aw(m),m===d){H=null;break}if(p!==null){p.return=y,H=p;break}H=y}}}var N=i.alternate;if(N!==null){var b=N.child;if(b!==null){N.child=null;do{var C=b.sibling;b.sibling=null,b=C}while(b!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ko(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){o=H;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,H=T;else e:for(o=E;H!==null;){if(c=H,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:vu(9,c)}}catch(L){Fe(c,c.return,L)}if(c===o){H=null;break e}var A=c.sibling;if(A!==null){A.return=c.return,H=A;break e}H=c.return}}if(he=s,rs(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(uu,t)}catch{}r=!0}return r}finally{ge=n,on.transition=e}}return!1}function H0(t,e,n){e=Pi(n,e),e=_w(t,e,1),t=Vr(t,e,1),e=jt(),t!==null&&(La(t,1,e),$t(t,e))}function Fe(t,e,n){if(t.tag===3)H0(t,t,n);else for(;e!==null;){if(e.tag===3){H0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){t=Pi(n,t),t=Ew(e,t,1),e=Vr(e,t,1),t=jt(),e!==null&&(La(e,1,t),$t(e,t));break}}e=e.return}}function S2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(lt&n)===n&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>$e()-Tm?ws(t,0):Em|=n),$t(t,e)}function zw(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=jt();t=sr(t,e),t!==null&&(La(t,e,n),$t(t,n))}function C2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zw(t,n)}function P2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),zw(t,n)}var $w;$w=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,y2(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Ce&&e.flags&1048576&&Gx(e,bc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xl(t,e),t=e.pendingProps;var s=bi(e,It.current);xi(e,n),s=gm(null,e,r,t,s,n);var i=ym();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,dm(e),s.updater=yu,e.stateNode=s,s._reactInternals=e,Wh(e,r,t,n),e=Gh(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&sm(e),Pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=A2(r),t=mn(r,t),s){case 0:e=Hh(null,e,r,t,n);break e;case 1:e=M0(null,e,r,t,n);break e;case 11:e=D0(null,e,r,t,n);break e;case 14:e=O0(null,e,r,mn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Hh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),M0(t,e,r,s,n);case 3:e:{if(bw(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Zx(t,e),Cc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pi(Error(F(423)),e),e=L0(t,e,r,n,s);break e}else if(r!==s){s=Pi(Error(F(424)),e),e=L0(t,e,r,n,s);break e}else for(Kt=Lr(e.stateNode.containerInfo.firstChild),Yt=e,Ce=!0,gn=null,n=Xx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){e=ir(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return ew(e),t===null&&Bh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mh(r,s)?o=null:i!==null&&Mh(r,i)&&(e.flags|=32),Iw(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&Bh(e),null;case 13:return kw(t,e,n);case 4:return hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),D0(t,e,r,s,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(kc,r._currentValue),r._currentValue=o,i!==null)if(_n(i.value,o)){if(i.children===s.children&&!Bt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),zh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),zh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,xi(e,n),s=an(s),r=r(s),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,s=mn(r,e.pendingProps),s=mn(r.type,s),O0(t,e,r,s,n);case 15:return Tw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),Xl(t,e),e.tag=1,zt(r)?(t=!0,Nc(e)):t=!1,xi(e,n),ww(e,r,s),Wh(e,r,s,n),Gh(null,e,r,!0,t,n);case 19:return Sw(t,e,n);case 22:return Nw(t,e,n)}throw Error(F(156,e.tag))};function Ww(t,e){return yx(t,e)}function j2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new j2(t,e,n,r)}function km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A2(t){if(typeof t=="function")return km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hf)return 11;if(t===Gf)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ec(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")km(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ri:return _s(n.children,s,i,e);case qf:o=8,s|=8;break;case mh:return t=sn(12,n,e,s|2),t.elementType=mh,t.lanes=i,t;case ph:return t=sn(13,n,e,s),t.elementType=ph,t.lanes=i,t;case gh:return t=sn(19,n,e,s),t.elementType=gh,t.lanes=i,t;case ex:return wu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jv:o=10;break e;case Zv:o=9;break e;case Hf:o=11;break e;case Gf:o=14;break e;case Er:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _s(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function wu(t,e,n,r){return t=sn(22,t,r,e),t.elementType=ex,t.lanes=n,t.stateNode={isHidden:!1},t}function Hd(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kd(0),this.expirationTimes=kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sm(t,e,n,r,s,i,o,c,u){return t=new R2(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(i),t}function D2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function qw(t){if(!t)return Gr;t=t._reactInternals;e:{if(Fs(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(zt(n))return qx(t,n,e)}return e}function Hw(t,e,n,r,s,i,o,c,u){return t=Sm(n,r,!0,t,s,i,o,c,u),t.context=qw(null),n=t.current,r=jt(),s=Fr(n),i=Jn(r,s),i.callback=e??null,Vr(n,i,s),t.current.lanes=s,La(t,s,r),$t(t,r),t}function _u(t,e,n,r){var s=e.current,i=jt(),o=Fr(s);return n=qw(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(s,e,o),t!==null&&(xn(t,s,o,i),Kl(t,s,o)),o}function Lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cm(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function O2(){return null}var Gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pm(t){this._internalRoot=t}Eu.prototype.render=Pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));_u(t,e,null,null)};Eu.prototype.unmount=Pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cs(function(){_u(null,t,null,null)}),e[rr]=null}};function Eu(t){this._internalRoot=t}Eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&bx(t)}};function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K0(){}function M2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Lc(o);i.call(d)}}var o=Hw(e,r,t,0,null,!1,!1,"",K0);return t._reactRootContainer=o,t[rr]=o.current,ua(t.nodeType===8?t.parentNode:t),Cs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Lc(u);c.call(d)}}var u=Sm(t,0,!1,null,null,!1,!1,"",K0);return t._reactRootContainer=u,t[rr]=u.current,ua(t.nodeType===8?t.parentNode:t),Cs(function(){_u(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Lc(o);c.call(u)}}_u(e,o,t,s)}else o=M2(n,e,t,s,r);return Lc(o)}Ex=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(Yf(e,n|1),$t(e,$e()),!(he&6)&&(ji=$e()+500,rs()))}break;case 13:Cs(function(){var r=sr(t,1);if(r!==null){var s=jt();xn(r,t,1,s)}}),Cm(t,1)}};Xf=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=jt();xn(e,t,134217728,n)}Cm(t,134217728)}};Tx=function(t){if(t.tag===13){var e=Fr(t),n=sr(t,e);if(n!==null){var r=jt();xn(n,t,e,r)}Cm(t,e)}};Nx=function(){return ge};Ix=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};bh=function(t,e,n){switch(e){case"input":if(xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mu(r);if(!s)throw Error(F(90));nx(r),xh(r,s)}}}break;case"textarea":sx(t,n);break;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}};dx=Nm;hx=Cs;var L2={usingClientEntryPoint:!1,Events:[Ua,ai,mu,cx,ux,Nm]},ko={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V2={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=px(t),t===null?null:t.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||O2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{uu=Ol.inject(V2),Sn=Ol}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L2;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jm(e))throw Error(F(200));return D2(t,e,null,n)};Zt.createRoot=function(t,e){if(!jm(t))throw Error(F(299));var n=!1,r="",s=Gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sm(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,ua(t.nodeType===8?t.parentNode:t),new Pm(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=px(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Cs(t)};Zt.hydrate=function(t,e,n){if(!Tu(e))throw Error(F(200));return Nu(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!jm(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Gw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Hw(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,ua(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Eu(e)};Zt.render=function(t,e,n){if(!Tu(e))throw Error(F(200));return Nu(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(F(40));return t._reactRootContainer?(Cs(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Zt.unstable_batchedUpdates=Nm;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Nu(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function Kw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kw)}catch(t){console.error(t)}}Kw(),Kv.exports=Zt;var U2=Kv.exports,Q0=U2;hh.createRoot=Q0.createRoot,hh.hydrateRoot=Q0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var Ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ar||(Ar={}));const Y0="popstate";function F2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return of("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vc(s)}return z2(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Am(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B2(){return Math.random().toString(36).substr(2,8)}function X0(t,e){return{usr:t.state,key:t.key,idx:e}}function of(t,e,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:n,key:e&&e.key||r||B2()})}function Vc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function z2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Ar.Pop,u=null,d=m();d==null&&(d=0,o.replaceState(xa({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function f(){c=Ar.Pop;let C=m(),w=C==null?null:C-d;d=C,u&&u({action:c,location:b.location,delta:w})}function p(C,w){c=Ar.Push;let E=of(b.location,C,w);d=m()+1;let T=X0(E,d),A=b.createHref(E);try{o.pushState(T,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(A)}i&&u&&u({action:c,location:b.location,delta:1})}function y(C,w){c=Ar.Replace;let E=of(b.location,C,w);d=m();let T=X0(E,d),A=b.createHref(E);o.replaceState(T,"",A),i&&u&&u({action:c,location:b.location,delta:0})}function N(C){let w=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof C=="string"?C:Vc(C);return E=E.replace(/ $/,"%20"),De(w,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,w)}let b={get action(){return c},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Y0,f),u=C,()=>{s.removeEventListener(Y0,f),u=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let w=N(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:y,go(C){return o.go(C)}};return b}var J0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(J0||(J0={}));function $2(t,e,n){return n===void 0&&(n="/"),W2(t,e,n)}function W2(t,e,n,r){let s=typeof e=="string"?Ki(e):e,i=Ai(s.pathname||"/",n);if(i==null)return null;let o=Qw(t);q2(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=nI(i);c=eI(o[u],d)}return c}function Qw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=zr([r,u.relativePath]),m=n.concat(u);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Qw(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:J2(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of Yw(i.path))s(i,o,u)}),e}function Yw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Yw(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function q2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Z2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const H2=/^:[\w-]+$/,G2=3,K2=2,Q2=1,Y2=10,X2=-2,Z0=t=>t==="*";function J2(t,e){let n=t.split("/"),r=n.length;return n.some(Z0)&&(r+=X2),e&&(r+=K2),n.filter(s=>!Z0(s)).reduce((s,i)=>s+(H2.test(i)?G2:i===""?Q2:Y2),r)}function Z2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",f=af({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),p=u.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:zr([i,f.pathname]),pathnameBase:aI(zr([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=zr([i,f.pathnameBase]))}return o}function af(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,f)=>{let{paramName:p,isOptional:y}=m;if(p==="*"){let b=c[f]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const N=c[f];return y&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function tI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Am(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Am(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ai(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const rI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sI=t=>rI.test(t);function iI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ki(t):t,i;if(n)if(sI(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Am(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=ey(n.substring(1),"/"):i=ey(n,e)}else i=e;return{pathname:i,search:lI(r),hash:cI(s)}}function ey(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Kd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rm(t,e){let n=oI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Dm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ki(t):(s=xa({},t),De(!s.pathname||!s.pathname.includes("?"),Kd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),Kd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),Kd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}c=f>=0?e[f]:"/"}let u=iI(s,c),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),aI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Xw=["post","put","patch","delete"];new Set(Xw);const dI=["get",...Xw];new Set(dI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wa(){return wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wa.apply(this,arguments)}const Iu=P.createContext(null),Jw=P.createContext(null),dr=P.createContext(null),bu=P.createContext(null),hr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Zw=P.createContext(null);function hI(t,e){let{relative:n}=e===void 0?{}:e;Qi()||De(!1);let{basename:r,navigator:s}=P.useContext(dr),{hash:i,pathname:o,search:c}=ku(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:zr([r,o])),s.createHref({pathname:u,search:c,hash:i})}function Qi(){return P.useContext(bu)!=null}function Bs(){return Qi()||De(!1),P.useContext(bu).location}function e_(t){P.useContext(dr).static||P.useLayoutEffect(t)}function kt(){let{isDataRoute:t}=P.useContext(hr);return t?II():fI()}function fI(){Qi()||De(!1);let t=P.useContext(Iu),{basename:e,future:n,navigator:r}=P.useContext(dr),{matches:s}=P.useContext(hr),{pathname:i}=Bs(),o=JSON.stringify(Rm(s,n.v7_relativeSplatPath)),c=P.useRef(!1);return e_(()=>{c.current=!0}),P.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let f=Dm(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:zr([e,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[e,r,o,i,t])}function t_(){let{matches:t}=P.useContext(hr),e=t[t.length-1];return e?e.params:{}}function ku(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(dr),{matches:s}=P.useContext(hr),{pathname:i}=Bs(),o=JSON.stringify(Rm(s,r.v7_relativeSplatPath));return P.useMemo(()=>Dm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function mI(t,e){return pI(t,e)}function pI(t,e,n,r){Qi()||De(!1);let{navigator:s}=P.useContext(dr),{matches:i}=P.useContext(hr),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Bs(),m;if(e){var f;let C=typeof e=="string"?Ki(e):e;u==="/"||(f=C.pathname)!=null&&f.startsWith(u)||De(!1),m=C}else m=d;let p=m.pathname||"/",y=p;if(u!=="/"){let C=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=$2(t,{pathname:y}),b=wI(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:zr([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:zr([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&b?P.createElement(bu.Provider,{value:{location:wa({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ar.Pop}},b):b}function gI(){let t=NI(),e=uI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const yI=P.createElement(gI,null);class vI extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(hr.Provider,{value:this.props.routeContext},P.createElement(Zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xI(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Iu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(hr.Provider,{value:e},r)}function wI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||De(!1),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let f=o[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=n,N=f.route.loader&&p[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,f,p)=>{let y,N=!1,b=null,C=null;n&&(y=c&&f.route.id?c[f.route.id]:void 0,b=f.route.errorElement||yI,u&&(d<0&&p===0?(bI("route-fallback"),N=!0,C=null):d===p&&(N=!0,C=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),E=()=>{let T;return y?T=b:N?T=C:f.route.Component?T=P.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=m,P.createElement(xI,{match:f,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?P.createElement(vI,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}var n_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(n_||{}),r_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(r_||{});function _I(t){let e=P.useContext(Iu);return e||De(!1),e}function EI(t){let e=P.useContext(Jw);return e||De(!1),e}function TI(t){let e=P.useContext(hr);return e||De(!1),e}function s_(t){let e=TI(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function NI(){var t;let e=P.useContext(Zw),n=EI(),r=s_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function II(){let{router:t}=_I(n_.UseNavigateStable),e=s_(r_.UseNavigateStable),n=P.useRef(!1);return e_(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,wa({fromRouteId:e},i)))},[t,e])}const ty={};function bI(t,e,n){ty[t]||(ty[t]=!0)}function kI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Om(t){let{to:e,replace:n,state:r,relative:s}=t;Qi()||De(!1);let{future:i,static:o}=P.useContext(dr),{matches:c}=P.useContext(hr),{pathname:u}=Bs(),d=kt(),m=Dm(e,Rm(c,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(m);return P.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function we(t){De(!1)}function SI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ar.Pop,navigator:i,static:o=!1,future:c}=t;Qi()&&De(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:wa({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=Ki(r));let{pathname:m="/",search:f="",hash:p="",state:y=null,key:N="default"}=r,b=P.useMemo(()=>{let C=Ai(m,u);return C==null?null:{location:{pathname:C,search:f,hash:p,state:y,key:N},navigationType:s}},[u,m,f,p,y,N,s]);return b==null?null:P.createElement(dr.Provider,{value:d},P.createElement(bu.Provider,{children:n,value:b}))}function CI(t){let{children:e,location:n}=t;return mI(lf(e),n)}new Promise(()=>{});function lf(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,lf(r.props.children,i));return}r.type!==we&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}function i_(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function PI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jI(t,e){return t.button===0&&(!e||e==="_self")&&!PI(t)}const AI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],DI="6";try{window.__reactRouterVersion=DI}catch{}const OI=P.createContext({isTransitioning:!1}),MI="startTransition",ny=ST[MI];function LI(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=F2({window:s,v5Compat:!0}));let o=i.current,[c,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=P.useCallback(f=>{d&&ny?ny(()=>u(f)):u(f)},[u,d]);return P.useLayoutEffect(()=>o.listen(m),[o,m]),P.useEffect(()=>kI(r),[r]),P.createElement(SI,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const VI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:m,viewTransition:f}=e,p=i_(e,AI),{basename:y}=P.useContext(dr),N,b=!1;if(typeof d=="string"&&UI.test(d)&&(N=d,VI))try{let T=new URL(window.location.href),A=d.startsWith("//")?new URL(T.protocol+d):new URL(d),L=Ai(A.pathname,y);A.origin===T.origin&&L!=null?d=L+A.search+A.hash:b=!0}catch{}let C=hI(d,{relative:s}),w=zI(d,{replace:o,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:f});function E(T){r&&r(T),T.defaultPrevented||w(T)}return P.createElement("a",Uc({},p,{href:N||C,onClick:b||i?r:E,ref:n,target:u}))}),FI=P.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:c,to:u,viewTransition:d,children:m}=e,f=i_(e,RI),p=ku(u,{relative:f.relative}),y=Bs(),N=P.useContext(Jw),{navigator:b,basename:C}=P.useContext(dr),w=N!=null&&$I(p)&&d===!0,E=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,T=y.pathname,A=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(T=T.toLowerCase(),A=A?A.toLowerCase():null,E=E.toLowerCase()),A&&C&&(A=Ai(A,C)||A);const L=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=T===E||!o&&T.startsWith(E)&&T.charAt(L)==="/",v=A!=null&&(A===E||!o&&A.startsWith(E)&&A.charAt(E.length)==="/"),x={isActive:M,isPending:v,isTransitioning:w},I=M?r:void 0,S;typeof i=="function"?S=i(x):S=[i,M?"active":null,v?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(x):c;return P.createElement(Ae,Uc({},f,{"aria-current":I,className:S,ref:n,style:j,to:u,viewTransition:d}),typeof m=="function"?m(x):m)});var cf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cf||(cf={}));var ry;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ry||(ry={}));function BI(t){let e=P.useContext(Iu);return e||De(!1),e}function zI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=kt(),d=Bs(),m=ku(t,{relative:o});return P.useCallback(f=>{if(jI(f,n)){f.preventDefault();let p=r!==void 0?r:Vc(d)===Vc(m);u(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,m,r,s,n,t,i,o,c])}function $I(t,e){e===void 0&&(e={});let n=P.useContext(OI);n==null&&De(!1);let{basename:r}=BI(cf.useViewTransitionState),s=ku(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ai(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ai(n.nextLocation.pathname,r)||n.nextLocation.pathname;return af(s.pathname,o)!=null||af(s.pathname,i)!=null}const WI="modulepreload",qI=function(t){return"/"+t},sy={},uf=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=qI(u),u in sy)return;sy[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":WI,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};var iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},HI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},a_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=i>>2,f=(i&3)<<4|c>>4;let p=(c&15)<<2|d>>6,y=d&63;u||(y=64,o||(p=64)),r.push(n[m],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||f==null)throw new GI;const p=i<<2|c>>4;if(r.push(p),d!==64){const y=c<<4&240|d>>2;if(r.push(y),f!==64){const N=d<<6&192|f;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KI=function(t){const e=o_(t);return a_.encodeByteArray(e,!0)},Fc=function(t){return KI(t).replace(/\./g,"")},l_=function(t){try{return a_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=()=>QI().__FIREBASE_DEFAULTS__,XI=()=>{if(typeof process>"u"||typeof iy>"u")return;const t=iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&l_(t[1]);return e&&JSON.parse(e)},Su=()=>{try{return YI()||XI()||JI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c_=t=>{var e,n;return(n=(e=Su())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},u_=t=>{const e=c_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},d_=()=>{var t;return(t=Su())===null||t===void 0?void 0:t.config},h_=t=>{var e;return(e=Su())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fc(JSON.stringify(n)),Fc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function tb(){var t;const e=(t=Su())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ib(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ob(){return!tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ab(){try{return typeof indexedDB=="object"}catch{return!1}}function lb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function q5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cb,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ub(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Vn(s,c,r)}}function ub(t,e){return t.replace(db,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const db=/\{\$([^}]+)}/g;function hb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(oy(i)&&oy(o)){if(!_a(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function oy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Lo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fb(t,e){const n=new mb(t,e);return n.subscribe.bind(n)}class mb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pb(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qd),s.error===void 0&&(s.error=Qd),s.complete===void 0&&(s.complete=Qd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vb(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yb(t){return t===ms?void 0:t}function vb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const wb={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},_b=ae.INFO,Eb={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Tb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Eb[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=_b,this._logHandler=Tb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const Nb=(t,e)=>e.some(n=>t instanceof n);let ay,ly;function Ib(){return ay||(ay=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bb(){return ly||(ly=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m_=new WeakMap,df=new WeakMap,p_=new WeakMap,Yd=new WeakMap,Lm=new WeakMap;function kb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&m_.set(n,t)}).catch(()=>{}),Lm.set(e,t),e}function Sb(t){if(df.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});df.set(t,e)}let hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Cb(t){hf=t(hf)}function Pb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xd(this),e,...n);return p_.set(r,e.sort?e.sort():[e]),Zn(r)}:bb().includes(t)?function(...e){return t.apply(Xd(this),e),Zn(m_.get(this))}:function(...e){return Zn(t.apply(Xd(this),e))}}function jb(t){return typeof t=="function"?Pb(t):(t instanceof IDBTransaction&&Sb(t),Nb(t,Ib())?new Proxy(t,hf):t)}function Zn(t){if(t instanceof IDBRequest)return kb(t);if(Yd.has(t))return Yd.get(t);const e=jb(t);return e!==t&&(Yd.set(t,e),Lm.set(e,t)),e}const Xd=t=>Lm.get(t);function Ab(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Zn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zn(o.result),u.oldVersion,u.newVersion,Zn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}function H5(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Zn(n).then(()=>{})}const Rb=["get","getKey","getAll","getAllKeys","count"],Db=["put","add","delete","clear"],Jd=new Map;function cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Db.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Rb.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Jd.set(e,i),i}Cb(t=>({...t,get:(e,n,r)=>cy(e,n)||t.get(e,n,r),has:(e,n)=>!!cy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",uy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new Mm("@firebase/app"),Lb="@firebase/app-compat",Vb="@firebase/analytics-compat",Ub="@firebase/analytics",Fb="@firebase/app-check-compat",Bb="@firebase/app-check",zb="@firebase/auth",$b="@firebase/auth-compat",Wb="@firebase/database",qb="@firebase/data-connect",Hb="@firebase/database-compat",Gb="@firebase/functions",Kb="@firebase/functions-compat",Qb="@firebase/installations",Yb="@firebase/installations-compat",Xb="@firebase/messaging",Jb="@firebase/messaging-compat",Zb="@firebase/performance",ek="@firebase/performance-compat",tk="@firebase/remote-config",nk="@firebase/remote-config-compat",rk="@firebase/storage",sk="@firebase/storage-compat",ik="@firebase/firestore",ok="@firebase/vertexai-preview",ak="@firebase/firestore-compat",lk="firebase",ck="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",uk={[ff]:"fire-core",[Lb]:"fire-core-compat",[Ub]:"fire-analytics",[Vb]:"fire-analytics-compat",[Bb]:"fire-app-check",[Fb]:"fire-app-check-compat",[zb]:"fire-auth",[$b]:"fire-auth-compat",[Wb]:"fire-rtdb",[qb]:"fire-data-connect",[Hb]:"fire-rtdb-compat",[Gb]:"fire-fn",[Kb]:"fire-fn-compat",[Qb]:"fire-iid",[Yb]:"fire-iid-compat",[Xb]:"fire-fcm",[Jb]:"fire-fcm-compat",[Zb]:"fire-perf",[ek]:"fire-perf-compat",[tk]:"fire-rc",[nk]:"fire-rc-compat",[rk]:"fire-gcs",[sk]:"fire-gcs-compat",[ik]:"fire-fst",[ak]:"fire-fst-compat",[ok]:"fire-vertex","fire-js":"fire-js",[lk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,dk=new Map,pf=new Map;function dy(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ps(t){const e=t.name;if(pf.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;pf.set(e,t);for(const n of Bc.values())dy(n,t);for(const n of dk.values())dy(n,t);return!0}function Cu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ba("app","Firebase",hk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=ck;function g_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=d_()),!n)throw $r.create("no-options");const i=Bc.get(s);if(i){if(_a(n,i.options)&&_a(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new xb(s);for(const u of pf.values())o.addComponent(u);const c=new fk(n,r,o);return Bc.set(s,c),c}function Vm(t=mf){const e=Bc.get(t);if(!e&&t===mf&&d_())return g_();if(!e)throw $r.create("no-app",{appName:t});return e}function Pn(t,e,n){var r;let s=(r=uk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(c.join(" "));return}Ps(new Kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="firebase-heartbeat-database",pk=1,Ea="firebase-heartbeat-store";let Zd=null;function y_(){return Zd||(Zd=Ab(mk,pk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Zd}async function gk(t){try{const n=(await y_()).transaction(Ea),r=await n.objectStore(Ea).get(v_(t));return await n.done,r}catch(e){if(e instanceof Vn)or.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function hy(t,e){try{const r=(await y_()).transaction(Ea,"readwrite");await r.objectStore(Ea).put(e,v_(t)),await r.done}catch(n){if(n instanceof Vn)or.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function v_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=1024,vk=30*24*60*60*1e3;class xk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _k(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=fy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=vk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fy(),{heartbeatsToSend:r,unsentEntries:s}=wk(this._heartbeatsCache.heartbeats),i=Fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return or.warn(n),""}}}function fy(){return new Date().toISOString().substring(0,10)}function wk(t,e=yk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),my(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),my(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _k{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ab()?lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return hy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function my(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ek(t){Ps(new Kr("platform-logger",e=>new Ob(e),"PRIVATE")),Ps(new Kr("heartbeat",e=>new xk(e),"PRIVATE")),Pn(ff,uy,t),Pn(ff,uy,"esm2017"),Pn("fire-js","")}Ek("");var Tk="firebase",Nk="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(Tk,Nk,"app");function Um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function x_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ik=x_,w_=new Ba("auth","Firebase",x_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Mm("@firebase/auth");function bk(t,...e){zc.logLevel<=ae.WARN&&zc.warn(`Auth (${zs}): ${t}`,...e)}function tc(t,...e){zc.logLevel<=ae.ERROR&&zc.error(`Auth (${zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Fm(t,...e)}function jn(t,...e){return Fm(t,...e)}function __(t,e,n){const r=Object.assign(Object.assign({},Ik()),{[e]:n});return new Ba("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return __(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return w_.create(t,...e)}function J(t,e,...n){if(!t)throw Fm(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tc(e),new Error(e)}function ar(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kk(){return py()==="http:"||py()==="https:"}function py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kk()||rb()||"connection"in navigator)?navigator.onLine:!0}function Ck(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.shortDelay=e,this.longDelay=n,ar(n>e,"Short delay should be less than long delay!"),this.isMobile=eb()||sb()}get(){return Sk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new $a(3e4,6e4);function fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mr(t,e,n,r,s={}){return T_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=za(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return nb()||(d.referrerPolicy="no-referrer"),E_.fetch()(N_(t,t.config.apiHost,n,c),d)})}async function T_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pk),e);try{const s=new Rk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ml(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw __(t,m,d);En(t,m)}}catch(s){if(s instanceof Vn)throw s;En(t,"network-request-failed",{message:String(s)})}}async function Wa(t,e,n,r,s={}){const i=await mr(t,e,n,r,s);return"mfaPendingCredential"in i&&En(t,"multi-factor-auth-required",{_serverResponse:i}),i}function N_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Bm(t.config,s):`${t.config.apiScheme}://${s}`}function Ak(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jn(this.auth,"network-request-failed")),jk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jn(t,e,r);return s.customData._tokenResponse=n,s}function gy(t){return t!==void 0&&t.enterprise!==void 0}class Dk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ak(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ok(t,e){return mr(t,"GET","/v2/recaptchaConfig",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){return mr(t,"POST","/v1/accounts:delete",e)}async function I_(t,e){return mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lk(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=zm(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xo(eh(s.auth_time)),issuedAtTime:Xo(eh(s.iat)),expirationTime:Xo(eh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function eh(t){return Number(t)*1e3}function zm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tc("JWT malformed, contained fewer than 3 sections"),null;try{const s=l_(n);return s?JSON.parse(s):(tc("Failed to decode base64 JWT payload"),null)}catch(s){return tc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function yy(t){const e=zm(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&Vk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Vk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xo(this.lastLoginAt),this.creationTime=Xo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ta(t,I_(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?b_(i.providerUserInfo):[],c=Bk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,f)}async function Fk(t){const e=Ge(t);await $c(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function b_(t){return t.map(e=>{var{providerId:n}=e,r=Um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){const n=await T_(t,{},async()=>{const r=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=N_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",E_.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $k(t,e){return mr(t,"POST","/v2/accounts:revokeToken",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=yy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new _i;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _i,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ta(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lk(this,e)}reload(){return Fk(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $c(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Ta(this,Mk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,m;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:T,emailVerified:A,isAnonymous:L,providerData:M,stsTokenManager:v}=n;J(T&&v,e,"internal-error");const x=_i.fromJSON(this.name,v);J(typeof T=="string",e,"internal-error"),wr(f,e.name),wr(p,e.name),J(typeof A=="boolean",e,"internal-error"),J(typeof L=="boolean",e,"internal-error"),wr(y,e.name),wr(N,e.name),wr(b,e.name),wr(C,e.name),wr(w,e.name),wr(E,e.name);const I=new Qn({uid:T,auth:e,email:p,emailVerified:A,displayName:f,isAnonymous:L,photoURL:N,phoneNumber:y,tenantId:b,stsTokenManager:x,createdAt:w,lastLoginAt:E});return M&&Array.isArray(M)&&(I.providerData=M.map(S=>Object.assign({},S))),C&&(I._redirectEventId=C),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new _i;s.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $c(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?b_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new _i;c.updateFromIdToken(r);const u=new Qn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Yn(t){ar(t instanceof Function,"Expected a class definition");let e=vy.get(t);return e?(ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}k_.type="NONE";const xy=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nc(this.userKey,s.apiKey,i),this.fullPersistenceKey=nc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei(Yn(xy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Yn(xy);const o=nc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){const f=Qn._fromJSON(e,m);d!==i&&(c=f),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ei(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(S_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R_(e))return"Blackberry";if(D_(e))return"Webos";if(C_(e))return"Safari";if((e.includes("chrome/")||P_(e))&&!e.includes("edge/"))return"Chrome";if(A_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function S_(t=bt()){return/firefox\//i.test(t)}function C_(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P_(t=bt()){return/crios\//i.test(t)}function j_(t=bt()){return/iemobile/i.test(t)}function A_(t=bt()){return/android/i.test(t)}function R_(t=bt()){return/blackberry/i.test(t)}function D_(t=bt()){return/webos/i.test(t)}function $m(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wk(t=bt()){var e;return $m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qk(){return ib()&&document.documentMode===10}function O_(t=bt()){return $m(t)||A_(t)||D_(t)||R_(t)||/windows phone/i.test(t)||j_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e=[]){let n;switch(t){case"Browser":n=wy(bt());break;case"Worker":n=`${wy(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e={}){return mr(t,"GET","/v2/passwordPolicy",fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=6;class Qk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Kk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new Hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await I_(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $c(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ck()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(er(this));const n=e?Ge(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gk(this),n=new Qk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $k(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&bk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ss(t){return Ge(t)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=fb(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xk(t){Pu=t}function L_(t){return Pu.loadJS(t)}function Jk(){return Pu.recaptchaEnterpriseScript}function Zk(){return Pu.gapiScript}function eS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const tS="recaptcha-enterprise",nS="NO_RECAPTCHA";class rS{constructor(e){this.type=tS,this.auth=ss(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Ok(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Dk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;gy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(nS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&gy(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Jk();u.length!==0&&(u+=c),L_(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Ey(t,e,n,r=!1){const s=new rS(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Wc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ey(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ey(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e){const n=Cu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(_a(i,e??{}))return s;En(s,"already-initialized")}return n.initialize({options:e})}function iS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oS(t,e,n){const r=ss(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=V_(e),{host:o,port:c}=aS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),lS()}function V_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aS(t){const e=V_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ty(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ty(o)}}}function Ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function cS(t,e){return mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uS(t,e){return Wa(t,"POST","/v1/accounts:signInWithPassword",fr(t,e))}async function dS(t,e){return mr(t,"POST","/v1/accounts:sendOobCode",fr(t,e))}async function hS(t,e){return dS(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}async function mS(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Wm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wc(e,n,"signInWithPassword",uS);case"emailLink":return fS(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wc(e,r,"signUpPassword",cS);case"emailLink":return mS(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e){return Wa(t,"POST","/v1/accounts:signInWithIdp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="http://localhost";class js extends Wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Um(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new js(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ti(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ti(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ti(e,n)}buildRequest(){const e={requestUri:pS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yS(t){const e=Mo(Lo(t)).link,n=e?Mo(Lo(e)).deep_link_id:null,r=Mo(Lo(t)).deep_link_id;return(r?Mo(Lo(r)).link:null)||r||n||e||t}class qm{constructor(e){var n,r,s,i,o,c;const u=Mo(Lo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,f=gS((s=u.mode)!==null&&s!==void 0?s:null);J(d&&m&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=m,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=yS(e);try{return new qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.providerId=Yi.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qm.parseLink(n);return J(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}Yi.PROVIDER_ID="password";Yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends U_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends qa{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return js._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends qa{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends qa{constructor(){super("twitter.com")}static credential(e,n){return js._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t,e){return Wa(t,"POST","/v1/accounts:signUp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qn._fromIdTokenResponse(e,r,s),o=Ny(r);return new As({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ny(r);return new As({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Vn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,qc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new qc(e,n,r,s)}}function F_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qc._fromErrorAndOperation(t,i,e,r):i})}async function xS(t,e,n=!1){const r=await Ta(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return As._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Ta(t,F_(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=zm(i.idToken);J(o,r,"internal-error");const{sub:c}=o;return J(t.uid===c,r,"user-mismatch"),As._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&En(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B_(t,e,n=!1){if(kn(t.app))return Promise.reject(er(t));const r="signIn",s=await F_(t,r,e),i=await As._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function _S(t,e){return B_(ss(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(t){const e=ss(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ES(t,e,n){const r=ss(t);await Wc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",hS)}async function TS(t,e,n){if(kn(t.app))return Promise.reject(er(t));const r=ss(t),o=await Wc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&z_(t),u}),c=await As._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function NS(t,e,n){return kn(t.app)?Promise.reject(er(t)):_S(Ge(t),Yi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&z_(t),r})}function IS(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function bS(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function kS(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function SS(t){return Ge(t).signOut()}const Hc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1e3,PS=10;class W_ extends $_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);qk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,PS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W_.type="LOCAL";const jS=W_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends $_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q_.type="SESSION";const H_=q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ju(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await AS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ju.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=Hm("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(p.data.response);break;default:clearTimeout(m),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function DS(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function OS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LS(){return G_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebaseLocalStorageDb",VS=1,Gc="firebaseLocalStorage",Q_="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Au(t,e){return t.transaction([Gc],e?"readwrite":"readonly").objectStore(Gc)}function US(){const t=indexedDB.deleteDatabase(K_);return new Ha(t).toPromise()}function vf(){const t=indexedDB.open(K_,VS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gc,{keyPath:Q_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gc)?e(r):(r.close(),await US(),e(await vf()))})})}async function Iy(t,e,n){const r=Au(t,!0).put({[Q_]:e,value:n});return new Ha(r).toPromise()}async function FS(t,e){const n=Au(t,!1).get(e),r=await new Ha(n).toPromise();return r===void 0?null:r.value}function by(t,e){const n=Au(t,!0).delete(e);return new Ha(n).toPromise()}const BS=800,zS=3;class Y_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ju._getInstance(LS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OS(),!this.activeServiceWorker)return;this.sender=new RS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await Iy(e,Hc,"1"),await by(e,Hc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>by(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Au(s,!1).getAll();return new Ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y_.type="LOCAL";const $S=Y_;new $a(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e){return e?Yn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ti(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ti(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qS(t){return B_(t.auth,new Gm(t),t.bypassAuthState)}function HS(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),wS(n,new Gm(t),t.bypassAuthState)}async function GS(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),xS(n,new Gm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qS;case"linkViaPopup":case"linkViaRedirect":return GS;case"reauthViaPopup":case"reauthViaRedirect":return HS;default:En(this.auth,"internal-error")}}resolve(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new $a(2e3,1e4);class mi extends X_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,mi.currentPopupAction&&mi.currentPopupAction.cancel(),mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){ar(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KS.get())};e()}}mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="pendingRedirect",rc=new Map;class YS extends X_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rc.get(this.auth._key());if(!e){try{const r=await XS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rc.set(this.auth._key(),e)}return this.bypassAuthState||rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XS(t,e){const n=eC(e),r=ZS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JS(t,e){rc.set(t._key(),e)}function ZS(t){return Yn(t._redirectPersistence)}function eC(t){return nc(QS,t.config.apiKey,t.name)}async function tC(t,e,n=!1){if(kn(t.app))return Promise.reject(er(t));const r=ss(t),s=WS(r,e),o=await new YS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=10*60*1e3;class rC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!J_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ky(e))}saveEventToCache(e){this.cachedEventUids.add(ky(e)),this.lastProcessedEventTime=Date.now()}}function ky(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(t,e={}){return mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aC=/^https?/;async function lC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iC(t);for(const n of e)try{if(cC(n))return}catch{}En(t,"unauthorized-domain")}function cC(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aC.test(n))return!1;if(oC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new $a(3e4,6e4);function Sy(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dC(t){return new Promise((e,n)=>{var r,s,i;function o(){Sy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sy(),n(jn(t,"network-request-failed"))},timeout:uC.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const c=eS("iframefcb");return An()[c]=()=>{gapi.load?o():n(jn(t,"network-request-failed"))},L_(`${Zk()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw sc=null,e})}let sc=null;function hC(t){return sc=sc||dC(t),sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new $a(5e3,15e3),mC="__/auth/iframe",pC="emulator/auth/iframe",gC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vC(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Bm(e,pC):`https://${t.config.authDomain}/${mC}`,r={apiKey:e.apiKey,appName:t.name,v:zs},s=yC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${za(r).slice(1)}`}async function xC(t){const e=await hC(t),n=An().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:vC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=jn(t,"network-request-failed"),c=An().setTimeout(()=>{i(o)},fC.get());function u(){An().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_C=500,EC=600,TC="_blank",NC="http://localhost";class Cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IC(t,e,n,r=_C,s=EC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},wC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=bt().toLowerCase();n&&(c=P_(d)?TC:n),S_(d)&&(e=e||NC,u.scrollbars="yes");const m=Object.entries(u).reduce((p,[y,N])=>`${p}${y}=${N},`,"");if(Wk(d)&&c!=="_self")return bC(e||"",c),new Cy(null);const f=window.open(e||"",c,m);J(f,t,"popup-blocked");try{f.focus()}catch{}return new Cy(f)}function bC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="__/auth/handler",SC="emulator/auth/handler",CC=encodeURIComponent("fac");async function Py(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zs,eventId:s};if(e instanceof U_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))o[m]=f}if(e instanceof qa){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${CC}=${encodeURIComponent(u)}`:"";return`${PC(t)}?${za(c).slice(1)}${d}`}function PC({config:t}){return t.emulator?Bm(t,SC):`https://${t.authDomain}/${kC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="webStorageSupport";class jC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H_,this._completeRedirectFn=tC,this._overrideRedirectResult=JS}async _openPopup(e,n,r,s){var i;ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Py(e,n,r,gf(),s);return IC(e,o,Hm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Py(e,n,r,gf(),s);return DS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xC(e),r=new rC(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(th,{type:th},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[th];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O_()||C_()||$m()}}const AC=jC;var jy="@firebase/auth",Ay="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OC(t){Ps(new Kr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M_(t)},d=new Yk(r,s,i,u);return iS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ps(new Kr("auth-internal",e=>{const n=ss(e.getProvider("auth").getImmediate());return(r=>new RC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(jy,Ay,DC(t)),Pn(jy,Ay,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=5*60,LC=h_("authIdTokenMaxAge")||MC;let Ry=null;const VC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LC)return;const s=n==null?void 0:n.token;Ry!==s&&(Ry=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UC(t=Vm()){const e=Cu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sS(t,{popupRedirectResolver:AC,persistence:[$S,jS,H_]}),r=h_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=VC(i.toString());bS(n,o,()=>o(n.currentUser)),IS(n,c=>o(c))}}const s=c_("auth");return s&&oS(n,`http://${s}`),n}function FC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Xk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OC("Browser");var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Z_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,x){function I(){}I.prototype=x.prototype,v.D=x.prototype,v.prototype=new I,v.prototype.constructor=v,v.C=function(S,j,R){for(var k=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)k[mt-2]=arguments[mt];return x.prototype[j].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,x,I){I||(I=0);var S=Array(16);if(typeof x=="string")for(var j=0;16>j;++j)S[j]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(j=0;16>j;++j)S[j]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=v.g[0],I=v.g[1],j=v.g[2];var R=v.g[3],k=x+(R^I&(j^R))+S[0]+3614090360&4294967295;x=I+(k<<7&4294967295|k>>>25),k=R+(j^x&(I^j))+S[1]+3905402710&4294967295,R=x+(k<<12&4294967295|k>>>20),k=j+(I^R&(x^I))+S[2]+606105819&4294967295,j=R+(k<<17&4294967295|k>>>15),k=I+(x^j&(R^x))+S[3]+3250441966&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(R^I&(j^R))+S[4]+4118548399&4294967295,x=I+(k<<7&4294967295|k>>>25),k=R+(j^x&(I^j))+S[5]+1200080426&4294967295,R=x+(k<<12&4294967295|k>>>20),k=j+(I^R&(x^I))+S[6]+2821735955&4294967295,j=R+(k<<17&4294967295|k>>>15),k=I+(x^j&(R^x))+S[7]+4249261313&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(R^I&(j^R))+S[8]+1770035416&4294967295,x=I+(k<<7&4294967295|k>>>25),k=R+(j^x&(I^j))+S[9]+2336552879&4294967295,R=x+(k<<12&4294967295|k>>>20),k=j+(I^R&(x^I))+S[10]+4294925233&4294967295,j=R+(k<<17&4294967295|k>>>15),k=I+(x^j&(R^x))+S[11]+2304563134&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(R^I&(j^R))+S[12]+1804603682&4294967295,x=I+(k<<7&4294967295|k>>>25),k=R+(j^x&(I^j))+S[13]+4254626195&4294967295,R=x+(k<<12&4294967295|k>>>20),k=j+(I^R&(x^I))+S[14]+2792965006&4294967295,j=R+(k<<17&4294967295|k>>>15),k=I+(x^j&(R^x))+S[15]+1236535329&4294967295,I=j+(k<<22&4294967295|k>>>10),k=x+(j^R&(I^j))+S[1]+4129170786&4294967295,x=I+(k<<5&4294967295|k>>>27),k=R+(I^j&(x^I))+S[6]+3225465664&4294967295,R=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(R^x))+S[11]+643717713&4294967295,j=R+(k<<14&4294967295|k>>>18),k=I+(R^x&(j^R))+S[0]+3921069994&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^R&(I^j))+S[5]+3593408605&4294967295,x=I+(k<<5&4294967295|k>>>27),k=R+(I^j&(x^I))+S[10]+38016083&4294967295,R=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(R^x))+S[15]+3634488961&4294967295,j=R+(k<<14&4294967295|k>>>18),k=I+(R^x&(j^R))+S[4]+3889429448&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^R&(I^j))+S[9]+568446438&4294967295,x=I+(k<<5&4294967295|k>>>27),k=R+(I^j&(x^I))+S[14]+3275163606&4294967295,R=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(R^x))+S[3]+4107603335&4294967295,j=R+(k<<14&4294967295|k>>>18),k=I+(R^x&(j^R))+S[8]+1163531501&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(j^R&(I^j))+S[13]+2850285829&4294967295,x=I+(k<<5&4294967295|k>>>27),k=R+(I^j&(x^I))+S[2]+4243563512&4294967295,R=x+(k<<9&4294967295|k>>>23),k=j+(x^I&(R^x))+S[7]+1735328473&4294967295,j=R+(k<<14&4294967295|k>>>18),k=I+(R^x&(j^R))+S[12]+2368359562&4294967295,I=j+(k<<20&4294967295|k>>>12),k=x+(I^j^R)+S[5]+4294588738&4294967295,x=I+(k<<4&4294967295|k>>>28),k=R+(x^I^j)+S[8]+2272392833&4294967295,R=x+(k<<11&4294967295|k>>>21),k=j+(R^x^I)+S[11]+1839030562&4294967295,j=R+(k<<16&4294967295|k>>>16),k=I+(j^R^x)+S[14]+4259657740&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^R)+S[1]+2763975236&4294967295,x=I+(k<<4&4294967295|k>>>28),k=R+(x^I^j)+S[4]+1272893353&4294967295,R=x+(k<<11&4294967295|k>>>21),k=j+(R^x^I)+S[7]+4139469664&4294967295,j=R+(k<<16&4294967295|k>>>16),k=I+(j^R^x)+S[10]+3200236656&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^R)+S[13]+681279174&4294967295,x=I+(k<<4&4294967295|k>>>28),k=R+(x^I^j)+S[0]+3936430074&4294967295,R=x+(k<<11&4294967295|k>>>21),k=j+(R^x^I)+S[3]+3572445317&4294967295,j=R+(k<<16&4294967295|k>>>16),k=I+(j^R^x)+S[6]+76029189&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(I^j^R)+S[9]+3654602809&4294967295,x=I+(k<<4&4294967295|k>>>28),k=R+(x^I^j)+S[12]+3873151461&4294967295,R=x+(k<<11&4294967295|k>>>21),k=j+(R^x^I)+S[15]+530742520&4294967295,j=R+(k<<16&4294967295|k>>>16),k=I+(j^R^x)+S[2]+3299628645&4294967295,I=j+(k<<23&4294967295|k>>>9),k=x+(j^(I|~R))+S[0]+4096336452&4294967295,x=I+(k<<6&4294967295|k>>>26),k=R+(I^(x|~j))+S[7]+1126891415&4294967295,R=x+(k<<10&4294967295|k>>>22),k=j+(x^(R|~I))+S[14]+2878612391&4294967295,j=R+(k<<15&4294967295|k>>>17),k=I+(R^(j|~x))+S[5]+4237533241&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~R))+S[12]+1700485571&4294967295,x=I+(k<<6&4294967295|k>>>26),k=R+(I^(x|~j))+S[3]+2399980690&4294967295,R=x+(k<<10&4294967295|k>>>22),k=j+(x^(R|~I))+S[10]+4293915773&4294967295,j=R+(k<<15&4294967295|k>>>17),k=I+(R^(j|~x))+S[1]+2240044497&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~R))+S[8]+1873313359&4294967295,x=I+(k<<6&4294967295|k>>>26),k=R+(I^(x|~j))+S[15]+4264355552&4294967295,R=x+(k<<10&4294967295|k>>>22),k=j+(x^(R|~I))+S[6]+2734768916&4294967295,j=R+(k<<15&4294967295|k>>>17),k=I+(R^(j|~x))+S[13]+1309151649&4294967295,I=j+(k<<21&4294967295|k>>>11),k=x+(j^(I|~R))+S[4]+4149444226&4294967295,x=I+(k<<6&4294967295|k>>>26),k=R+(I^(x|~j))+S[11]+3174756917&4294967295,R=x+(k<<10&4294967295|k>>>22),k=j+(x^(R|~I))+S[2]+718787259&4294967295,j=R+(k<<15&4294967295|k>>>17),k=I+(R^(j|~x))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+x&4294967295,v.g[1]=v.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,v.g[2]=v.g[2]+j&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.u=function(v,x){x===void 0&&(x=v.length);for(var I=x-this.blockSize,S=this.B,j=this.h,R=0;R<x;){if(j==0)for(;R<=I;)s(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<x;)if(S[j++]=v.charCodeAt(R++),j==this.blockSize){s(this,S),j=0;break}}else for(;R<x;)if(S[j++]=v[R++],j==this.blockSize){s(this,S),j=0;break}}this.h=j,this.o+=x},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var x=1;x<v.length-8;++x)v[x]=0;var I=8*this.o;for(x=v.length-8;x<v.length;++x)v[x]=I&255,I/=256;for(this.u(v),v=Array(16),x=I=0;4>x;++x)for(var S=0;32>S;S+=8)v[I++]=this.g[x]>>>S&255;return v};function i(v,x){var I=c;return Object.prototype.hasOwnProperty.call(I,v)?I[v]:I[v]=x(v)}function o(v,x){this.h=x;for(var I=[],S=!0,j=v.length-1;0<=j;j--){var R=v[j]|0;S&&R==x||(I[j]=R,S=!1)}this.g=I}var c={};function u(v){return-128<=v&&128>v?i(v,function(x){return new o([x|0],0>x?-1:0)}):new o([v|0],0>v?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return f;if(0>v)return C(d(-v));for(var x=[],I=1,S=0;v>=I;S++)x[S]=v/I|0,I*=4294967296;return new o(x,0)}function m(v,x){if(v.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v.charAt(0)=="-")return C(m(v.substring(1),x));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(x,8)),S=f,j=0;j<v.length;j+=8){var R=Math.min(8,v.length-j),k=parseInt(v.substring(j,j+R),x);8>R?(R=d(Math.pow(x,R)),S=S.j(R).add(d(k))):(S=S.j(I),S=S.add(d(k)))}return S}var f=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-C(this).m();for(var v=0,x=1,I=0;I<this.g.length;I++){var S=this.i(I);v+=(0<=S?S:4294967296+S)*x,x*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(N(this))return"0";if(b(this))return"-"+C(this).toString(v);for(var x=d(Math.pow(v,6)),I=this,S="";;){var j=A(I,x).g;I=w(I,j.j(x));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(v);if(I=j,N(I))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function N(v){if(v.h!=0)return!1;for(var x=0;x<v.g.length;x++)if(v.g[x]!=0)return!1;return!0}function b(v){return v.h==-1}t.l=function(v){return v=w(this,v),b(v)?-1:N(v)?0:1};function C(v){for(var x=v.g.length,I=[],S=0;S<x;S++)I[S]=~v.g[S];return new o(I,~v.h).add(p)}t.abs=function(){return b(this)?C(this):this},t.add=function(v){for(var x=Math.max(this.g.length,v.g.length),I=[],S=0,j=0;j<=x;j++){var R=S+(this.i(j)&65535)+(v.i(j)&65535),k=(R>>>16)+(this.i(j)>>>16)+(v.i(j)>>>16);S=k>>>16,R&=65535,k&=65535,I[j]=k<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(v,x){return v.add(C(x))}t.j=function(v){if(N(this)||N(v))return f;if(b(this))return b(v)?C(this).j(C(v)):C(C(this).j(v));if(b(v))return C(this.j(C(v)));if(0>this.l(y)&&0>v.l(y))return d(this.m()*v.m());for(var x=this.g.length+v.g.length,I=[],S=0;S<2*x;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var j=0;j<v.g.length;j++){var R=this.i(S)>>>16,k=this.i(S)&65535,mt=v.i(j)>>>16,Fn=v.i(j)&65535;I[2*S+2*j]+=k*Fn,E(I,2*S+2*j),I[2*S+2*j+1]+=R*Fn,E(I,2*S+2*j+1),I[2*S+2*j+1]+=k*mt,E(I,2*S+2*j+1),I[2*S+2*j+2]+=R*mt,E(I,2*S+2*j+2)}for(S=0;S<x;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=x;S<2*x;S++)I[S]=0;return new o(I,0)};function E(v,x){for(;(v[x]&65535)!=v[x];)v[x+1]+=v[x]>>>16,v[x]&=65535,x++}function T(v,x){this.g=v,this.h=x}function A(v,x){if(N(x))throw Error("division by zero");if(N(v))return new T(f,f);if(b(v))return x=A(C(v),x),new T(C(x.g),C(x.h));if(b(x))return x=A(v,C(x)),new T(C(x.g),x.h);if(30<v.g.length){if(b(v)||b(x))throw Error("slowDivide_ only works with positive integers.");for(var I=p,S=x;0>=S.l(v);)I=L(I),S=L(S);var j=M(I,1),R=M(S,1);for(S=M(S,2),I=M(I,2);!N(S);){var k=R.add(S);0>=k.l(v)&&(j=j.add(I),R=k),S=M(S,1),I=M(I,1)}return x=w(v,j.j(x)),new T(j,x)}for(j=f;0<=v.l(x);){for(I=Math.max(1,Math.floor(v.m()/x.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(I),k=R.j(x);b(k)||0<k.l(v);)I-=S,R=d(I),k=R.j(x);N(R)&&(R=p),j=j.add(R),v=w(v,k)}return new T(j,v)}t.A=function(v){return A(this,v).h},t.and=function(v){for(var x=Math.max(this.g.length,v.g.length),I=[],S=0;S<x;S++)I[S]=this.i(S)&v.i(S);return new o(I,this.h&v.h)},t.or=function(v){for(var x=Math.max(this.g.length,v.g.length),I=[],S=0;S<x;S++)I[S]=this.i(S)|v.i(S);return new o(I,this.h|v.h)},t.xor=function(v){for(var x=Math.max(this.g.length,v.g.length),I=[],S=0;S<x;S++)I[S]=this.i(S)^v.i(S);return new o(I,this.h^v.h)};function L(v){for(var x=v.g.length+1,I=[],S=0;S<x;S++)I[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(I,v.h)}function M(v,x){var I=x>>5;x%=32;for(var S=v.g.length-I,j=[],R=0;R<S;R++)j[R]=0<x?v.i(R+I)>>>x|v.i(R+I+1)<<32-x:v.i(R+I);return new o(j,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Es=o}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e1,Vo,t1,ic,xf,n1,r1,s1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var D=l[_];if(!(D in g))break e;g=g[D]}l=l[l.length-1],_=g[l],h=h(_),h!=_&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var g=0,_=!1,D={next:function(){if(!_&&g<l.length){var O=g++;return{value:h(O,l[O]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,g){return l.call.apply(l.bind,arguments)}function f(l,h,g){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),l.apply(h,D)}}return function(){return l.apply(h,arguments)}}function p(l,h,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,p.apply(null,arguments)}function y(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function N(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(_,D,O){for(var z=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)z[xe-2]=arguments[xe];return h.prototype[D].apply(_,z)}}function b(l){const h=l.length;if(0<h){const g=Array(h);for(let _=0;_<h;_++)g[_]=l[_];return g}return[]}function C(l,h){for(let g=1;g<arguments.length;g++){const _=arguments[g];if(u(_)){const D=l.length||0,O=_.length||0;l.length=D+O;for(let z=0;z<O;z++)l[D+z]=_[z]}else l.push(_)}}class w{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function A(l){return A[" "](l),l}A[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(l,h,g){for(const _ in l)h.call(g,l[_],_,l)}function v(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function x(l){const h={};for(const g in l)h[g]=l[g];return h}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let g,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(g in _)l[g]=_[g];for(let O=0;O<I.length;O++)g=I[O],Object.prototype.hasOwnProperty.call(_,g)&&(l[g]=_[g])}}function j(l){var h=1;l=l.split(":");const g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function R(l){c.setTimeout(()=>{throw l},0)}function k(){var l=X;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class mt{constructor(){this.h=this.g=null}add(h,g){const _=Fn.get();_.set(h,g),this.h?this.h.next=_:this.g=_,this.h=_}}var Fn=new w(()=>new Bn,l=>l.reset());class Bn{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,$=!1,X=new mt,te=()=>{const l=c.Promise.resolve(void 0);Mt=()=>{l.then(Te)}};var Te=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(g){R(g)}var h=Fn;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var cn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,h),c.removeEventListener("test",g,h)}catch{}return l}();function un(l,h){if(Pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{A(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:dn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&un.aa.h.call(this)}}N(un,Pe);var dn={2:"touch",3:"pen",4:"mouse"};un.prototype.h=function(){un.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),el=0;function tl(l,h,g,_,D){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!_,this.ha=D,this.key=++el,this.da=this.fa=!1}function os(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function B(l){this.src=l,this.g={},this.h=0}B.prototype.add=function(l,h,g,_,D){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var z=ve(l,h,_,D);return-1<z?(h=l[z],g||(h.fa=!1)):(h=new tl(h,this.src,O,!!_,D),h.fa=g,l.push(h)),h};function q(l,h){var g=h.type;if(g in l.g){var _=l.g[g],D=Array.prototype.indexOf.call(_,h,void 0),O;(O=0<=D)&&Array.prototype.splice.call(_,D,1),O&&(os(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function ve(l,h,g,_){for(var D=0;D<l.length;++D){var O=l[D];if(!O.da&&O.listener==h&&O.capture==!!g&&O.ha==_)return D}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),Ke={};function Qe(l,h,g,_,D){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Qe(l,h[O],g,_,D);return null}return g=qp(g),l&&l[tn]?l.K(h,g,d(_)?!!_.capture:!1,D):io(l,h,g,!1,_,D)}function io(l,h,g,_,D,O){if(!h)throw Error("Invalid event type");var z=d(D)?!!D.capture:!!D,xe=sd(l);if(xe||(l[Le]=xe=new B(l)),g=xe.add(h,g,_,z,O),g.proxy)return g;if(_=nl(),g.proxy=_,_.src=l,_.listener=g,l.addEventListener)cn||(D=z),D===void 0&&(D=!1),l.addEventListener(h.toString(),_,D);else if(l.attachEvent)l.attachEvent(Wp(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function nl(){function l(g){return h.call(l.src,l.listener,g)}const h=VE;return l}function $p(l,h,g,_,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)$p(l,h[O],g,_,D);else _=d(_)?!!_.capture:!!_,g=qp(g),l&&l[tn]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],g=ve(O,g,_,D),-1<g&&(os(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=sd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ve(h,g,_,D)),(g=-1<l?h[l]:null)&&rd(g))}function rd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[tn])q(h.i,l);else{var g=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(g,_,l.capture):h.detachEvent?h.detachEvent(Wp(g),_):h.addListener&&h.removeListener&&h.removeListener(_),(g=sd(h))?(q(g,l),g.h==0&&(g.src=null,h[Le]=null)):os(l)}}}function Wp(l){return l in Ke?Ke[l]:Ke[l]="on"+l}function VE(l,h){if(l.da)l=!0;else{h=new un(h,this);var g=l.listener,_=l.ha||l.src;l.fa&&rd(l),l=g.call(_,h)}return l}function sd(l){return l=l[Le],l instanceof B?l:null}var id="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(l){return typeof l=="function"?l:(l[id]||(l[id]=function(h){return l.handleEvent(h)}),l[id])}function pt(){ue.call(this),this.i=new B(this),this.M=this,this.F=null}N(pt,ue),pt.prototype[tn]=!0,pt.prototype.removeEventListener=function(l,h,g,_){$p(this,l,h,g,_)};function St(l,h){var g,_=l.F;if(_)for(g=[];_;_=_.F)g.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new Pe(h,l);else if(h instanceof Pe)h.target=h.target||l;else{var D=h;h=new Pe(_,l),S(h,D)}if(D=!0,g)for(var O=g.length-1;0<=O;O--){var z=h.g=g[O];D=rl(z,_,!0,h)&&D}if(z=h.g=l,D=rl(z,_,!0,h)&&D,D=rl(z,_,!1,h)&&D,g)for(O=0;O<g.length;O++)z=h.g=g[O],D=rl(z,_,!1,h)&&D}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],_=0;_<g.length;_++)os(g[_]);delete l.g[h],l.h--}}this.F=null},pt.prototype.K=function(l,h,g,_){return this.i.add(String(l),h,!1,g,_)},pt.prototype.L=function(l,h,g,_){return this.i.add(String(l),h,!0,g,_)};function rl(l,h,g,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==g){var xe=z.listener,rt=z.ha||z.src;z.fa&&q(l.i,z),D=xe.call(rt,_)!==!1&&D}}return D&&!_.defaultPrevented}function Hp(l,h,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Gp(l){l.g=Hp(()=>{l.g=null,l.i&&(l.i=!1,Gp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class UE extends ue{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Gp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oo(l){ue.call(this),this.h=l,this.g={}}N(oo,ue);var Kp=[];function Qp(l){M(l.g,function(h,g){this.g.hasOwnProperty(g)&&rd(h)},l),l.g={}}oo.prototype.N=function(){oo.aa.N.call(this),Qp(this)},oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=c.JSON.stringify,FE=c.JSON.parse,BE=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function ad(){}ad.prototype.h=null;function Yp(l){return l.h||(l.h=l.i())}function Xp(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ld(){Pe.call(this,"d")}N(ld,Pe);function cd(){Pe.call(this,"c")}N(cd,Pe);var as={},Jp=null;function sl(){return Jp=Jp||new pt}as.La="serverreachability";function Zp(l){Pe.call(this,as.La,l)}N(Zp,Pe);function lo(l){const h=sl();St(h,new Zp(h))}as.STAT_EVENT="statevent";function eg(l,h){Pe.call(this,as.STAT_EVENT,l),this.stat=h}N(eg,Pe);function Ct(l){const h=sl();St(h,new eg(h,l))}as.Ma="timingevent";function tg(l,h){Pe.call(this,as.Ma,l),this.size=h}N(tg,Pe);function co(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function uo(){this.g=!0}uo.prototype.xa=function(){this.g=!1};function zE(l,h,g,_,D,O){l.info(function(){if(l.g)if(O)for(var z="",xe=O.split("&"),rt=0;rt<xe.length;rt++){var fe=xe[rt].split("=");if(1<fe.length){var gt=fe[0];fe=fe[1];var yt=gt.split("_");z=2<=yt.length&&yt[1]=="type"?z+(gt+"="+fe+"&"):z+(gt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+g+`
`+z})}function $E(l,h,g,_,D,O,z){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+g+`
`+O+" "+z})}function Hs(l,h,g,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qE(l,g)+(_?" "+_:"")})}function WE(l,h){l.info(function(){return"TIMEOUT: "+h})}uo.prototype.info=function(){};function qE(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var _=g[l];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return od(g)}catch{return h}}var il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ng={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ud;function ol(){}N(ol,ad),ol.prototype.g=function(){return new XMLHttpRequest},ol.prototype.i=function(){return{}},ud=new ol;function gr(l,h,g,_){this.j=l,this.i=h,this.l=g,this.R=_||1,this.U=new oo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rg}function rg(){this.i=null,this.g="",this.h=!1}var sg={},dd={};function hd(l,h,g){l.L=1,l.v=ul(zn(h)),l.m=g,l.P=!0,ig(l,null)}function ig(l,h){l.F=Date.now(),al(l),l.A=zn(l.v);var g=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),xg(g.i,"t",_),l.C=0,g=l.j.J,l.h=new rg,l.g=Lg(l.j,g?h:null,!l.m),0<l.O&&(l.M=new UE(p(l.Y,l,l.g),l.O)),h=l.U,g=l.g,_=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(Kp[0]=D.toString()),D=Kp);for(var O=0;O<D.length;O++){var z=Qe(g,D[O],_||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),lo(),zE(l.i,l.u,l.A,l.l,l.R,l.m)}gr.prototype.ca=function(l){l=l.target;const h=this.M;h&&$n(l)==3?h.j():this.Y(l)},gr.prototype.Y=function(l){try{if(l==this.g)e:{const yt=$n(this.g);var h=this.g.Ba();const Qs=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||bg(this.g)))){this.J||yt!=4||h==7||(h==8||0>=Qs?lo(3):lo(2)),fd(this);var g=this.g.Z();this.X=g;t:if(og(this)){var _=bg(this.g);l="";var D=_.length,O=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),ho(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(O&&h==D-1)});_.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,$E(this.i,this.u,this.A,this.l,this.R,yt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,rt=this.g;if((xe=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(xe)){var fe=xe;break t}}fe=null}if(g=fe)Hs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,md(this,g);else{this.o=!1,this.s=3,Ct(12),ls(this),ho(this);break e}}if(this.P){g=!0;let hn;for(;!this.J&&this.C<z.length;)if(hn=HE(this,z),hn==dd){yt==4&&(this.s=4,Ct(14),g=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==sg){this.s=4,Ct(15),Hs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Hs(this.i,this.l,hn,null),md(this,hn);if(og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||z.length!=0||this.h.h||(this.s=1,Ct(16),g=!1),this.o=this.o&&g,!g)Hs(this.i,this.l,z,"[Invalid Chunked Response]"),ls(this),ho(this);else if(0<z.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),wd(gt),gt.M=!0,Ct(11))}}else Hs(this.i,this.l,z,null),md(this,z);yt==4&&ls(this),this.o&&!this.J&&(yt==4?Rg(this.j,this):(this.o=!1,al(this)))}else cT(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),ls(this),ho(this)}}}catch{}finally{}};function og(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function HE(l,h){var g=l.C,_=h.indexOf(`
`,g);return _==-1?dd:(g=Number(h.substring(g,_)),isNaN(g)?sg:(_+=1,_+g>h.length?dd:(h=h.slice(_,_+g),l.C=_+g,h)))}gr.prototype.cancel=function(){this.J=!0,ls(this)};function al(l){l.S=Date.now()+l.I,ag(l,l.I)}function ag(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=co(p(l.ba,l),h)}function fd(l){l.B&&(c.clearTimeout(l.B),l.B=null)}gr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(WE(this.i,this.A),this.L!=2&&(lo(),Ct(17)),ls(this),this.s=2,ho(this)):ag(this,this.S-l)};function ho(l){l.j.G==0||l.J||Rg(l.j,l)}function ls(l){fd(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Qp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function md(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||pd(g.h,l))){if(!l.K&&pd(g.h,l)&&g.G==3){try{var _=g.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)gl(g),ml(g);else break e;xd(g),Ct(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=co(p(g.Za,g),6e3));if(1>=ug(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else us(g,11)}else if((l.K||g.g==l)&&gl(g),!E(h))for(D=g.Da.g.parse(h),h=0;h<D.length;h++){let fe=D[h];if(g.T=fe[0],fe=fe[1],g.G==2)if(fe[0]=="c"){g.K=fe[1],g.ia=fe[2];const gt=fe[3];gt!=null&&(g.la=gt,g.j.info("VER="+g.la));const yt=fe[4];yt!=null&&(g.Aa=yt,g.j.info("SVER="+g.Aa));const Qs=fe[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(_=1.5*Qs,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;const hn=l.g;if(hn){const vl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var O=_.h;O.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(gd(O,O.h),O.h=null))}if(_.D){const _d=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;_d&&(_.ya=_d,Ne(_.I,_.D,_d))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var z=l;if(_.qa=Mg(_,_.J?_.ia:null,_.W),z.K){dg(_.h,z);var xe=z,rt=_.L;rt&&(xe.I=rt),xe.B&&(fd(xe),al(xe)),_.g=z}else jg(_);0<g.i.length&&pl(g)}else fe[0]!="stop"&&fe[0]!="close"||us(g,7);else g.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?us(g,7):vd(g):fe[0]!="noop"&&g.l&&g.l.ta(fe),g.v=0)}}lo(4)}catch{}}var GE=class{constructor(l,h){this.g=l,this.map=h}};function lg(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ug(l){return l.h?1:l.g?l.g.size:0}function pd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function gd(l,h){l.g?l.g.add(h):l.h=h}function dg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}lg.prototype.cancel=function(){if(this.i=hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function hg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.D);return h}return b(l.i)}function KE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],g=l.length,_=0;_<g;_++)h.push(l[_]);return h}h=[],g=0;for(_ in l)h[g++]=l[_];return h}function QE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(const _ in l)h[g++]=_;return h}}}function fg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=QE(l),_=KE(l),D=_.length,O=0;O<D;O++)h.call(void 0,_[O],g&&g[O],l)}var mg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YE(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var _=l[g].indexOf("="),D=null;if(0<=_){var O=l[g].substring(0,_);D=l[g].substring(_+1)}else O=l[g];h(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function cs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof cs){this.h=l.h,ll(this,l.j),this.o=l.o,this.g=l.g,cl(this,l.s),this.l=l.l;var h=l.i,g=new po;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),pg(this,g),this.m=l.m}else l&&(h=String(l).match(mg))?(this.h=!1,ll(this,h[1]||"",!0),this.o=fo(h[2]||""),this.g=fo(h[3]||"",!0),cl(this,h[4]),this.l=fo(h[5]||"",!0),pg(this,h[6]||"",!0),this.m=fo(h[7]||"")):(this.h=!1,this.i=new po(null,this.h))}cs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(mo(h,gg,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(mo(h,gg,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(mo(g,g.charAt(0)=="/"?ZE:JE,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",mo(g,tT)),l.join("")};function zn(l){return new cs(l)}function ll(l,h,g){l.j=g?fo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function cl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function pg(l,h,g){h instanceof po?(l.i=h,nT(l.i,l.h)):(g||(h=mo(h,eT)),l.i=new po(h,l.h))}function Ne(l,h,g){l.i.set(h,g)}function ul(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function fo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function mo(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,XE),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function XE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var gg=/[#\/\?@]/g,JE=/[#\?:]/g,ZE=/[#\?]/g,eT=/[#\?@]/g,tT=/#/g;function po(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function yr(l){l.g||(l.g=new Map,l.h=0,l.i&&YE(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=po.prototype,t.add=function(l,h){yr(this),this.i=null,l=Gs(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function yg(l,h){yr(l),h=Gs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function vg(l,h){return yr(l),h=Gs(l,h),l.g.has(h)}t.forEach=function(l,h){yr(this),this.g.forEach(function(g,_){g.forEach(function(D){l.call(h,D,_,this)},this)},this)},t.na=function(){yr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let _=0;_<h.length;_++){const D=l[_];for(let O=0;O<D.length;O++)g.push(h[_])}return g},t.V=function(l){yr(this);let h=[];if(typeof l=="string")vg(this,l)&&(h=h.concat(this.g.get(Gs(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},t.set=function(l,h){return yr(this),this.i=null,l=Gs(this,l),vg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function xg(l,h,g){yg(l,h),0<g.length&&(l.i=null,l.g.set(Gs(l,h),b(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var _=h[g];const O=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var D=O;z[_]!==""&&(D+="="+encodeURIComponent(String(z[_]))),l.push(D)}}return this.i=l.join("&")};function Gs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function nT(l,h){h&&!l.j&&(yr(l),l.i=null,l.g.forEach(function(g,_){var D=_.toLowerCase();_!=D&&(yg(this,_),xg(this,D,g))},l)),l.j=h}function rT(l,h){const g=new uo;if(c.Image){const _=new Image;_.onload=y(vr,g,"TestLoadImage: loaded",!0,h,_),_.onerror=y(vr,g,"TestLoadImage: error",!1,h,_),_.onabort=y(vr,g,"TestLoadImage: abort",!1,h,_),_.ontimeout=y(vr,g,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function sT(l,h){const g=new uo,_=new AbortController,D=setTimeout(()=>{_.abort(),vr(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(O=>{clearTimeout(D),O.ok?vr(g,"TestPingServer: ok",!0,h):vr(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),vr(g,"TestPingServer: error",!1,h)})}function vr(l,h,g,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(g)}catch{}}function iT(){this.g=new BE}function oT(l,h,g){const _=g||"";try{fg(l,function(D,O){let z=D;d(D)&&(z=od(D)),h.push(_+O+"="+encodeURIComponent(z))})}catch(D){throw h.push(_+"type="+encodeURIComponent("_badmap")),D}}function dl(l){this.l=l.Ub||null,this.j=l.eb||!1}N(dl,ad),dl.prototype.g=function(){return new hl(this.l,this.j)},dl.prototype.i=function(l){return function(){return l}}({});function hl(l,h){pt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(hl,pt),t=hl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,yo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?go(this):yo(this),this.readyState==3&&wg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,go(this))},t.Qa=function(l){this.g&&(this.response=l,go(this))},t.ga=function(){this.g&&go(this)};function go(l){l.readyState=4,l.l=null,l.j=null,l.v=null,yo(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function yo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _g(l){let h="";return M(l,function(g,_){h+=_,h+=":",h+=g,h+=`\r
`}),h}function yd(l,h,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=_g(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Ne(l,h,g))}function Ve(l){pt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ve,pt);var aT=/^https?$/i,lT=["POST","PUT"];t=Ve.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ud.g(),this.v=this.o?Yp(this.o):Yp(ud),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Eg(this,O);return}if(l=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)g.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())g.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),D=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(lT,h,void 0))||_||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ig(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Eg(this,O)}};function Eg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Tg(l),fl(l)}function Tg(l){l.A||(l.A=!0,St(l,"complete"),St(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,St(this,"complete"),St(this,"abort"),fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ng(this):this.bb())},t.bb=function(){Ng(this)};function Ng(l){if(l.h&&typeof o<"u"&&(!l.v[1]||$n(l)!=4||l.Z()!=2)){if(l.u&&$n(l)==4)Hp(l.Ea,0,l);else if(St(l,"readystatechange"),$n(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var _;if(_=z===0){var D=String(l.D).match(mg)[1]||null;!D&&c.self&&c.self.location&&(D=c.self.location.protocol.slice(0,-1)),_=!aT.test(D?D.toLowerCase():"")}g=_}if(g)St(l,"complete"),St(l,"success");else{l.m=6;try{var O=2<$n(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Tg(l)}}finally{fl(l)}}}}function fl(l,h){if(l.g){Ig(l);const g=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||St(l,"ready");try{g.onreadystatechange=_}catch{}}}function Ig(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function $n(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),FE(h)}};function bg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function cT(l){const h={};l=(l.g&&2<=$n(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(E(l[_]))continue;var g=j(l[_]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=h[D]||[];h[D]=O,O.push(g)}v(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function kg(l){this.Aa=0,this.i=[],this.j=new uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vo("baseRetryDelayMs",5e3,l),this.cb=vo("retryDelaySeedMs",1e4,l),this.Wa=vo("forwardChannelMaxRetries",2,l),this.wa=vo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new lg(l&&l.concurrentRequestLimit),this.Da=new iT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kg.prototype,t.la=8,t.G=1,t.connect=function(l,h,g,_){Ct(0),this.W=l,this.H=h||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Mg(this,null,this.W),pl(this)};function vd(l){if(Sg(l),l.G==3){var h=l.U++,g=zn(l.I);if(Ne(g,"SID",l.K),Ne(g,"RID",h),Ne(g,"TYPE","terminate"),xo(l,g),h=new gr(l,l.j,h),h.L=2,h.v=ul(zn(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=h.v,g=!0),g||(h.g=Lg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),al(h)}Og(l)}function ml(l){l.g&&(wd(l),l.g.cancel(),l.g=null)}function Sg(l){ml(l),l.u&&(c.clearTimeout(l.u),l.u=null),gl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function pl(l){if(!cg(l.h)&&!l.s){l.s=!0;var h=l.Ga;Mt||te(),$||(Mt(),$=!0),X.add(h,l),l.B=0}}function uT(l,h){return ug(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=co(p(l.Ga,l,h),Dg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new gr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=x(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=Pg(this,D,h),g=zn(this.I),Ne(g,"RID",l),Ne(g,"CVER",22),this.D&&Ne(g,"X-HTTP-Session-Id",this.D),xo(this,g),O&&(this.O?h="headers="+encodeURIComponent(String(_g(O)))+"&"+h:this.m&&yd(g,this.m,O)),gd(this.h,D),this.Ua&&Ne(g,"TYPE","init"),this.P?(Ne(g,"$req",h),Ne(g,"SID","null"),D.T=!0,hd(D,g,null)):hd(D,g,h),this.G=2}}else this.G==3&&(l?Cg(this,l):this.i.length==0||cg(this.h)||Cg(this))};function Cg(l,h){var g;h?g=h.l:g=l.U++;const _=zn(l.I);Ne(_,"SID",l.K),Ne(_,"RID",g),Ne(_,"AID",l.T),xo(l,_),l.m&&l.o&&yd(_,l.m,l.o),g=new gr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Pg(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),gd(l.h,g),hd(g,_,h)}function xo(l,h){l.H&&M(l.H,function(g,_){Ne(h,_,g)}),l.l&&fg({},function(g,_){Ne(h,_,g)})}function Pg(l,h,g){g=Math.min(l.i.length,g);var _=l.l?p(l.l.Na,l.l,l):null;e:{var D=l.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=D[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let xe=!0;for(let rt=0;rt<g;rt++){let fe=D[rt].g;const gt=D[rt].map;if(fe-=O,0>fe)O=Math.max(0,D[rt].g-100),xe=!1;else try{oT(gt,z,"req"+fe+"_")}catch{_&&_(gt)}}if(xe){_=z.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,_}function jg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Mt||te(),$||(Mt(),$=!0),X.add(h,l),l.v=0}}function xd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=co(p(l.Fa,l),Dg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ag(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=co(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),ml(this),Ag(this))};function wd(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Ag(l){l.g=new gr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=zn(l.qa);Ne(h,"RID","rpc"),Ne(h,"SID",l.K),Ne(h,"AID",l.T),Ne(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(h,"TO",l.ja),Ne(h,"TYPE","xmlhttp"),xo(l,h),l.m&&l.o&&yd(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=ul(zn(h)),g.m=null,g.P=!0,ig(g,l)}t.Za=function(){this.C!=null&&(this.C=null,ml(this),xd(this),Ct(19))};function gl(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Rg(l,h){var g=null;if(l.g==h){gl(l),wd(l),l.g=null;var _=2}else if(pd(l.h,h))g=h.D,dg(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var D=l.B;_=sl(),St(_,new tg(_,g)),pl(l)}else jg(l);else if(D=h.s,D==3||D==0&&0<h.X||!(_==1&&uT(l,h)||_==2&&xd(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),D){case 1:us(l,5);break;case 4:us(l,10);break;case 3:us(l,6);break;default:us(l,2)}}}function Dg(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function us(l,h){if(l.j.info("Error code "+h),h==2){var g=p(l.fb,l),_=l.Xa;const D=!_;_=new cs(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ll(_,"https"),ul(_),D?rT(_.toString(),g):sT(_.toString(),g)}else Ct(2);l.G=0,l.l&&l.l.sa(h),Og(l),Sg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Og(l){if(l.G=0,l.ka=[],l.l){const h=hg(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.ra()}}function Mg(l,h,g){var _=g instanceof cs?zn(g):new cs(g);if(_.g!="")h&&(_.g=h+"."+_.g),cl(_,_.s);else{var D=c.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var O=new cs(null);_&&ll(O,_),h&&(O.g=h),D&&cl(O,D),g&&(O.l=g),_=O}return g=l.D,h=l.ya,g&&h&&Ne(_,g,h),Ne(_,"VER",l.la),xo(l,_),_}function Lg(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ve(new dl({eb:g})):new Ve(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vg(){}t=Vg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yl(){}yl.prototype.g=function(l,h){return new Ht(l,h)};function Ht(l,h){pt.call(this),this.g=new kg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ks(this)}N(Ht,pt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){vd(this.g)},Ht.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=od(l),l=g);h.i.push(new GE(h.Ya++,l)),h.G==3&&pl(h)},Ht.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Ht.aa.N.call(this)};function Ug(l){ld.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}N(Ug,ld);function Fg(){cd.call(this),this.status=1}N(Fg,cd);function Ks(l){this.g=l}N(Ks,Vg),Ks.prototype.ua=function(){St(this.g,"a")},Ks.prototype.ta=function(l){St(this.g,new Ug(l))},Ks.prototype.sa=function(l){St(this.g,new Fg)},Ks.prototype.ra=function(){St(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,s1=function(){return new yl},r1=function(){return sl()},n1=as,xf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,ic=il,ng.COMPLETE="complete",t1=ng,Xp.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Vo=Xp,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,e1=Ve}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Mm("@firebase/firestore");function So(){return Rs.logLevel}function G(t,...e){if(Rs.logLevel<=ae.DEBUG){const n=e.map(Km);Rs.debug(`Firestore (${Xi}): ${t}`,...n)}}function lr(t,...e){if(Rs.logLevel<=ae.ERROR){const n=e.map(Km);Rs.error(`Firestore (${Xi}): ${t}`,...n)}}function Ri(t,...e){if(Rs.logLevel<=ae.WARN){const n=e.map(Km);Rs.warn(`Firestore (${Xi}): ${t}`,...n)}}function Km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function ye(t,e){t||Z()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class zC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new i1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new _t(e)}}class WC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ye(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new HC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=KC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Di(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Je(0,0))}static max(){return new ne(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends Ia{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Ia{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new W(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(be.fromString(e))}static fromName(e){return new Q(be.fromString(e).popFirst(5))}static empty(){return new Q(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new be(e.slice()))}}function YC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Qr(s,Q.empty(),e)}function XC(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(ne.min(),Q.empty(),-1)}static max(){return new Qr(ne.max(),Q.empty(),-1)}}function JC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==ZC)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(m=>{o[d]=m,++c,c===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function tP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ka(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qm.oe=-1;function Ru(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function nP(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vl(this.root,e,this.comparator,!0)}}class Vl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ly(this.data.getIterator())}getIteratorFrom(e){return new Ly(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Ly{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new ct(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Di(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new l1("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const rP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=rP.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xm(t){const e=t.mapValue.fields.__previous_value__;return Ym(e)?Xm(e):e}function ba(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul={mapValue:{}};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ym(t)?4:oP(t)?9007199254740991:iP(t)?10:11:Z()}function Mn(t,e){if(t===e)return!0;const n=Os(t);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ba(t).isEqual(ba(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),c=Yr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ds(s.bytesValue).isEqual(Ds(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ze(s.geoPointValue.latitude)===ze(i.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ze(s.integerValue)===ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ze(s.doubleValue),c=ze(i.doubleValue);return o===c?Kc(o)===Kc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Di(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(My(o)!==My(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Mn(o[u],c[u])))return!1;return!0}(t,e);default:return Z()}}function Sa(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Os(t),r=Os(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=ze(i.integerValue||i.doubleValue),u=ze(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Vy(t.timestampValue,e.timestampValue);case 4:return Vy(ba(t),ba(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Ds(i),u=Ds(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=me(c[d],u[d]);if(m!==0)return m}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=me(ze(i.latitude),ze(o.latitude));return c!==0?c:me(ze(i.longitude),ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Uy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,m;const f=i.fields||{},p=o.fields||{},y=(c=f.value)===null||c===void 0?void 0:c.arrayValue,N=(u=p.value)===null||u===void 0?void 0:u.arrayValue,b=me(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0);return b!==0?b:Uy(y,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ul.mapValue&&o===Ul.mapValue)return 0;if(i===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const p=me(u[f],m[f]);if(p!==0)return p;const y=Oi(c[u[f]],d[m[f]]);if(y!==0)return y}return me(u.length,m.length)}(t.mapValue,e.mapValue);default:throw Z()}}function Vy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=Yr(t),r=Yr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Uy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Mi(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wf(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Fy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _f(t){return!!t&&"integerValue"in t}function Jm(t){return!!t&&"arrayValue"in t}function By(t){return!!t&&"nullValue"in t}function zy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oc(t){return!!t&&"mapValue"in t}function iP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $s(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.value=e}static empty(){return new Vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Jo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){$s(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Vt(Jo(this.value))}}function c1(t){const e=[];return $s(t.fields,(n,r)=>{const s=new at([n]);if(oc(r)){const i=c1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Tt(e,0,ne.min(),ne.min(),ne.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,s){return new Tt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new Tt(e,2,n,ne.min(),ne.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ne.min(),ne.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function $y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n="asc"){this.field=e,this.dir=n}}function aP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{}class He extends u1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cP(e,n,r):n==="array-contains"?new hP(e,r):n==="in"?new fP(e,r):n==="not-in"?new mP(e,r):n==="array-contains-any"?new pP(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uP(e,r):new dP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oi(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends u1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tn(e,n)}matches(e){return d1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function d1(t){return t.op==="and"}function h1(t){return lP(t)&&d1(t)}function lP(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function Ef(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Mi(t.value);if(h1(t))return t.filters.map(e=>Ef(e)).join(",");{const e=t.filters.map(n=>Ef(n)).join(",");return`${t.op}(${e})`}}function f1(t,e){return t instanceof He?function(r,s){return s instanceof He&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)}(t,e):t instanceof Tn?function(r,s){return s instanceof Tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&f1(o,s.filters[c]),!0):!1}(t,e):void Z()}function m1(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Mi(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(m1).join(" ,")+"}"}(t):"Filter"}class cP extends He{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class uP extends He{constructor(e,n){super(e,"in",n),this.keys=p1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dP extends He{constructor(e,n){super(e,"not-in",n),this.keys=p1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class hP extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jm(n)&&Sa(n.arrayValue,this.value)}}class fP extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sa(this.value.arrayValue,n)}}class mP extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sa(this.value.arrayValue,n)}}class pP extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function qy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new gP(t,e,n,r,s,i,o)}function Zm(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ef(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mi(r)).join(",")),e.ue=n}return e.ue}function ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!f1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Wy(t.startAt,e.startAt)&&Wy(t.endAt,e.endAt)}function Tf(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yP(t,e,n,r,s,i,o,c){return new Ji(t,e,n,r,s,i,o,c)}function Du(t){return new Ji(t)}function Hy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function g1(t){return t.collectionGroup!==null}function Zo(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ct(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ca(i,r))}),n.has(at.keyField().canonicalString())||e.ce.push(new Ca(at.keyField(),r))}return e.ce}function Rn(t){const e=re(t);return e.le||(e.le=vP(e,Zo(t))),e.le}function vP(t,e){if(t.limitType==="F")return qy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ca(s.field,i)});const n=t.endAt?new Qc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qc(t.startAt.position,t.startAt.inclusive):null;return qy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nf(t,e){const n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yc(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ou(t,e){return ep(Rn(t),Rn(e))&&t.limitType===e.limitType}function y1(t){return`${Zm(Rn(t))}|lt:${t.limitType}`}function Zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m1(s)).join(", ")}]`),Ru(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Mi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Mi(s)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function Mu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=$y(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Zo(r),s)||r.endAt&&!function(o,c,u){const d=$y(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Zo(r),s))}(t,e)}function xP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v1(t){return(e,n)=>{let r=!1;for(const s of Zo(t)){const i=wP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wP(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Oi(u,d):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return a1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new Me(Q.comparator);function cr(){return _P}const x1=new Me(Q.comparator);function Uo(...t){let e=x1;for(const n of t)e=e.insert(n.key,n);return e}function w1(t){let e=x1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xs(){return ea()}function _1(){return ea()}function ea(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const EP=new Me(Q.comparator),TP=new ct(Q.comparator);function oe(...t){let e=TP;for(const n of t)e=e.add(n);return e}const NP=new ct(me);function IP(){return NP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function E1(t){return{integerValue:""+t}}function T1(t,e){return nP(e)?E1(e):tp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function bP(t,e,n){return t instanceof Pa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ym(i)&&(i=Xm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Li?I1(t,e):t instanceof ja?b1(t,e):function(s,i){const o=N1(s,i),c=Gy(o)+Gy(s.Pe);return _f(o)&&_f(s.Pe)?E1(c):tp(s.serializer,c)}(t,e)}function kP(t,e,n){return t instanceof Li?I1(t,e):t instanceof ja?b1(t,e):n}function N1(t,e){return t instanceof Aa?function(r){return _f(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pa extends Lu{}class Li extends Lu{constructor(e){super(),this.elements=e}}function I1(t,e){const n=k1(e);for(const r of t.elements)n.some(s=>Mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends Lu{constructor(e){super(),this.elements=e}}function b1(t,e){let n=k1(e);for(const r of t.elements)n=n.filter(s=>!Mn(s,r));return{arrayValue:{values:n}}}class Aa extends Lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Gy(t){return ze(t.integerValue||t.doubleValue)}function k1(t){return Jm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.field=e,this.transform=n}}function SP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Li&&s instanceof Li||r instanceof ja&&s instanceof ja?Di(r.elements,s.elements,Mn):r instanceof Aa&&s instanceof Aa?Mn(r.Pe,s.Pe):r instanceof Pa&&s instanceof Pa}(t.transform,e.transform)}class CP{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vu{}function S1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P1(t.key,wn.none()):new Qa(t.key,t.data,wn.none());{const n=t.data,r=Vt.empty();let s=new ct(at.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new is(t.key,r,new Qt(s.toArray()),wn.none())}}function PP(t,e,n){t instanceof Qa?function(s,i,o){const c=s.value.clone(),u=Qy(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof is?function(s,i,o){if(!ac(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Qy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(C1(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ta(t,e,n,r){return t instanceof Qa?function(i,o,c,u){if(!ac(i.precondition,o))return c;const d=i.value.clone(),m=Yy(i.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof is?function(i,o,c,u){if(!ac(i.precondition,o))return c;const d=Yy(i.fieldTransforms,u,o),m=o.data;return m.setAll(C1(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,c){return ac(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function jP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=N1(r.transform,s||null);i!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,i))}return n||null}function Ky(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Di(r,s,(i,o)=>SP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends Vu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class is extends Vu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function C1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qy(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,kP(o,c,n[s]))}return r}function Yy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bP(i,o,e))}return r}class P1 extends Vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AP extends Vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ta(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=S1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Di(this.mutations,e.mutations,(n,r)=>Ky(n,r))&&Di(this.baseMutations,e.baseMutations,(n,r)=>Ky(n,r))}}class rp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return EP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new rp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ce;function MP(t){switch(t){default:return Z();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function j1(t){if(t===void 0)return lr("GRPC error has no .code"),V.UNKNOWN;switch(t){case We.OK:return V.OK;case We.CANCELLED:return V.CANCELLED;case We.UNKNOWN:return V.UNKNOWN;case We.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case We.INTERNAL:return V.INTERNAL;case We.UNAVAILABLE:return V.UNAVAILABLE;case We.UNAUTHENTICATED:return V.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case We.NOT_FOUND:return V.NOT_FOUND;case We.ALREADY_EXISTS:return V.ALREADY_EXISTS;case We.PERMISSION_DENIED:return V.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case We.ABORTED:return V.ABORTED;case We.OUT_OF_RANGE:return V.OUT_OF_RANGE;case We.UNIMPLEMENTED:return V.UNIMPLEMENTED;case We.DATA_LOSS:return V.DATA_LOSS;default:return Z()}}(ce=We||(We={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=new Es([4294967295,4294967295],0);function Xy(t){const e=LP().encode(t),n=new Z_;return n.update(e),new Uint8Array(n.digest())}function Jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Es([n,r],0),new Es([s,i],0)]}class sp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Es.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Es.fromNumber(r)));return s.compare(VP)===1&&(s=new Es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Xy(e),[r,s]=Jy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new sp(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=Xy(e),[r,s]=Jy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uu(ne.min(),s,new Me(me),cr(),oe())}}class Ya{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ya(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class A1{constructor(e,n){this.targetId=e,this.me=n}}class R1{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zy{constructor(){this.fe=0,this.ge=tv(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new Ya(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=tv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UP{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=ev(),this.Qe=new Me(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Tf(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,Tt.newNoDocument(o,ne.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Ds(r).toUint8Array()}catch(u){if(u instanceof l1)return Ri("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new sp(o,s,i)}catch(u){return Ri(u instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Tf(c.target)){const u=new Q(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Tt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=oe();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Uu(e,n,this.Qe,this.ke,r);return this.ke=cr(),this.qe=ev(),this.Qe=new Me(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ev(){return new Me(Q.comparator)}function tv(){return new Me(Q.comparator)}const FP={asc:"ASCENDING",desc:"DESCENDING"},BP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zP={and:"AND",or:"OR"};class $P{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function If(t,e){return t.useProto3Json||Ru(e)?e:{value:e}}function Xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WP(t,e){return Xc(t,e.toTimestamp())}function Dn(t){return ye(!!t),ne.fromTimestamp(function(n){const r=Yr(n);return new Je(r.seconds,r.nanos)}(t))}function ip(t,e){return bf(t,e).canonicalString()}function bf(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function O1(t){const e=be.fromString(t);return ye(F1(e)),e}function kf(t,e){return ip(t.databaseId,e.path)}function nh(t,e){const n=O1(e);if(n.get(1)!==t.databaseId.projectId)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(L1(n))}function M1(t,e){return ip(t.databaseId,e)}function qP(t){const e=O1(t);return e.length===4?be.emptyPath():L1(e)}function Sf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L1(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nv(t,e,n){return{name:kf(t,e),fields:n.value.mapValue.fields}}function HP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ye(m===void 0||typeof m=="string"),ht.fromBase64String(m||"")):(ye(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const m=d.code===void 0?V.UNKNOWN:j1(d.code);return new W(m,d.message||"")}(o);n=new R1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=nh(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):ne.min(),c=new Vt({mapValue:{fields:r.document.fields}}),u=Tt.newFoundDocument(s,i,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new lc(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=nh(t,r.document),i=r.readTime?Dn(r.readTime):ne.min(),o=Tt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new lc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=nh(t,r.document),i=r.removedTargetIds||[];n=new lc([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OP(s,i),c=r.targetId;n=new A1(c,o)}}return n}function GP(t,e){let n;if(e instanceof Qa)n={update:nv(t,e.key,e.value)};else if(e instanceof P1)n={delete:kf(t,e.key)};else if(e instanceof is)n={update:nv(t,e.key,e.data),updateMask:nj(e.fieldMask)};else{if(!(e instanceof AP))return Z();n={verify:kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Li)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ja)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Aa)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:WP(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function KP(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dn(s.updateTime):Dn(i);return o.isEqual(ne.min())&&(o=Dn(i)),new CP(o,s.transformResults||[])}(n,e))):[]}function QP(t,e){return{documents:[M1(t,e.path)]}}function YP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M1(t,s);const i=function(d){if(d.length!==0)return U1(Tn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(p){return{field:ei(p.field),direction:ZP(p.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=If(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function XP(t){let e=qP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(f){const p=V1(f);return p instanceof Tn&&h1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(N){return new Ca(ti(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(f){let p;return p=typeof f=="object"?f.value:f,Ru(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,y=f.values||[];return new Qc(y,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,y=f.values||[];return new Qc(y,p)}(n.endAt)),yP(e,s,o,i,c,"F",u,d)}function JP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ti(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ti(n.unaryFilter.field);return He.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ti(n.unaryFilter.field);return He.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ti(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return He.create(ti(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>V1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function ZP(t){return FP[t]}function ej(t){return BP[t]}function tj(t){return zP[t]}function ei(t){return{fieldPath:t.canonicalString()}}function ti(t){return at.fromServerFormat(t.fieldPath)}function U1(t){return t instanceof He?function(n){if(n.op==="=="){if(zy(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NAN"}};if(By(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zy(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NAN"}};if(By(n.value))return{unaryFilter:{field:ei(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ei(n.field),op:ej(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(s=>U1(s));return r.length===1?r[0]:{compositeFilter:{op:tj(n.op),filters:r}}}(t):Z()}function nj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),c=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.ct=e}}function sj(t){const e=XP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.un=new oj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Qr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ct(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ct(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vi(0)}static kn(){return new Vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ta(r.mutation,s,Qt.empty(),Je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Uo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=cr();const o=ea(),c=function(){return ea()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof is)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),ta(m.mutation,d,m.mutation.getFieldMask(),Je.now())):o.set(d.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var f;return c.set(d,new lj(m,(f=o.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ea();let s=new Me((o,c)=>o-c),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Qt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const f=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=_1();m.forEach(p=>{if(!i.has(p)){const y=S1(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):g1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(xs());let c=-1,u=i;return o.next(d=>U.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{u=u.insert(m,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(m=>({batchId:c,changes:w1(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Uo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Uo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(f,p){return new Ji(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,Tt.newInvalidDocument(m)))});let c=Uo();return o.forEach((u,d)=>{const m=i.get(u);m!==void 0&&ta(m.mutation,d,Qt.empty(),Je.now()),Mu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:sj(s.bundledQuery),readTime:Dn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.overlays=new Me(Q.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=xs(),i=n.length+1,o=new Q(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Me((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=xs(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=xs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DP(n,r));let i=this.Ir.get(n);i===void 0&&(i=oe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.Tr=new ct(et.Er),this.dr=new ct(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new be([])),r=new et(n,e),s=new et(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new be([])),r=new et(n,e),s=new et(n,e+1);let i=oe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(et.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RP(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new et(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),s=new et(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(me);return n.forEach(s=>{const i=new et(s,0),o=new et(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new et(new Q(i),0);let c=new ct(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Mr=e,this.docs=function(){return new Me(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Tt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cr();const o=n.path,c=new Q(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||JC(XC(m),r)<=0||(s.has(m.key)||Mu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pj(this)}getSize(e){return U.resolve(this.size)}}class pj extends aj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.persistence=e,this.Nr=new Zi(n=>Zm(n),ep),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new op,this.targetCount=0,this.kr=Vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qm(0),this.Kr=!1,this.Kr=!0,this.$r=new hj,this.referenceDelegate=e(this),this.Ur=new gj(this),this.indexManager=new ij,this.remoteDocumentCache=function(s){return new mj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rj(n),this.Gr=new uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new vj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vj extends eP{constructor(e){super(),this.currentSequenceNumber=e}}class ap{constructor(e){this.persistence=e,this.Jr=new op,this.Yr=null}static Zr(e){return new ap(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ob()?8:tP(bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xj;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(So()<=ae.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(So()<=ae.DEBUG&&G("QueryEngine","Query:",Zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(So()<=ae.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):U.resolve())}Yi(e,n){if(Hy(n))return U.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yc(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Yc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Hy(n)||s.isEqual(ne.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(So()<=ae.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zs(n)),this.rs(e,o,n,YC(s,-1)).next(c=>c))})}ts(e,n){let r=new ct(v1(e));return n.forEach((s,i)=>{Mu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return So()<=ae.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Me(me),this._s=new Zi(i=>Zm(i),ep),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Ej(t,e,n,r){return new _j(t,e,n,r)}async function B1(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=oe();for(const d of s){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of i){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function Tj(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,p=f.keys();let y=U.resolve();return p.forEach(N=>{y=y.next(()=>m.getEntry(u,N)).next(b=>{const C=d.docVersions.get(N);ye(C!==null),b.version.compareTo(C)<0&&(f.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),m.addEntry(b)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function z1(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Nj(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((m,f)=>{const p=s.get(f);if(!p)return;c.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ht.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):m.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(m.resumeToken,r)),s=s.insert(f,y),function(b,C,w){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,y,m)&&c.push(n.Ur.updateTargetData(i,y))});let u=cr(),d=oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(Ij(i,o,e.documentUpdates).next(m=>{u=m.Ps,d=m.Is})),!r.isEqual(ne.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function Ij(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):G("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function bj(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kj(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ka(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function rv(t,e,n){const r=re(t);let s=ne.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,m){const f=re(u),p=f._s.get(m);return p!==void 0?U.resolve(f.os.get(p)):f.Ur.getTargetData(d,m)}(r,o,Rn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:oe())).next(c=>(Sj(r,xP(e),c),{documents:c,Ts:i})))}function Sj(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class sv{constructor(){this.activeTargetIds=IP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cj{constructor(){this.so=new sv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function rh(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class Rj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=rh(),u=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(m=>(G("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw Ri("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=jj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=rh();return new Promise((o,c)=>{const u=new e1;u.setWithCredentials(!0),u.listenOnce(t1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ic.NO_ERROR:const m=u.getResponseJson();G(wt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case ic.TIMEOUT:G(wt,`RPC '${e}' ${i} timed out`),c(new W(V.DEADLINE_EXCEEDED,"Request time out"));break;case ic.HTTP_ERROR:const f=u.getStatus();if(G(wt,`RPC '${e}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const N=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(w)>=0?w:V.UNKNOWN}(y.status);c(new W(N,y.message))}else c(new W(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(V.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{G(wt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(wt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=rh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=s1(),c=r1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");G(wt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const f=o.createWebChannel(m,u);let p=!1,y=!1;const N=new Aj({Io:C=>{y?G(wt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(G(wt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(wt,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},To:()=>f.close()}),b=(C,w,E)=>{C.listen(w,T=>{try{E(T)}catch(A){setTimeout(()=>{throw A},0)}})};return b(f,Vo.EventType.OPEN,()=>{y||(G(wt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),b(f,Vo.EventType.CLOSE,()=>{y||(y=!0,G(wt,`RPC '${e}' stream ${s} transport closed`),N.So())}),b(f,Vo.EventType.ERROR,C=>{y||(y=!0,Ri(wt,`RPC '${e}' stream ${s} transport errored:`,C),N.So(new W(V.UNAVAILABLE,"The operation could not be completed")))}),b(f,Vo.EventType.MESSAGE,C=>{var w;if(!y){const E=C.data[0];ye(!!E);const T=E,A=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(A){G(wt,`RPC '${e}' stream ${s} received error:`,A);const L=A.status;let M=function(I){const S=We[I];if(S!==void 0)return j1(S)}(L),v=A.message;M===void 0&&(M=V.INTERNAL,v="Unknown error status: "+L+" with message "+A.message),y=!0,N.So(new W(M,v)),f.close()}else G(wt,`RPC '${e}' stream ${s} received:`,E),N.bo(E)}}),b(c,n1.STAT_EVENT,C=>{C.stat===xf.PROXY?G(wt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===xf.NOPROXY&&G(wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return new $P(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dj extends W1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HP(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Dn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sf(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Tf(u)?{documents:QP(i,u)}:{query:YP(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=D1(i,o.resumeToken);const d=If(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){c.readTime=Xc(i,o.snapshotVersion.toTimestamp());const d=If(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=JP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sf(this.serializer),n.removeTarget=e,this.a_(n)}}class Oj extends W1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KP(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,bf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,bf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Lj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await Xa(d),d.q_.set("Unknown"),d.L_.delete(4),await Bu(d)}(this))})}),this.q_=new Lj(r,s)}}async function Bu(t){if(Ws(t))for(const e of t.B_)await e(!0)}async function Xa(t){for(const e of t.B_)await e(!1)}function q1(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hp(n)?dp(n):eo(n).r_()&&up(n,e))}function cp(t,e){const n=re(t),r=eo(n);n.N_.delete(e),r.r_()&&H1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ws(n)&&n.q_.set("Unknown"))}function up(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(t).A_(e)}function H1(t,e){t.Q_.xe(e),eo(t).R_(e)}function dp(t){t.Q_=new UP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.q_.v_()}function hp(t){return Ws(t)&&!eo(t).n_()&&t.N_.size>0}function Ws(t){return re(t).L_.size===0}function G1(t){t.Q_=void 0}async function Uj(t){t.q_.set("Online")}async function Fj(t){t.N_.forEach((e,n)=>{up(t,e)})}async function Bj(t,e){G1(t),hp(t)?(t.q_.M_(e),dp(t)):t.q_.set("Unknown")}async function zj(t,e,n){if(t.q_.set("Online"),e instanceof R1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jc(t,r)}else if(e instanceof lc?t.Q_.Ke(e):e instanceof A1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await z1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=i.N_.get(d);m&&i.N_.set(d,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const m=i.N_.get(u);if(!m)return;i.N_.set(u,m.withResumeToken(ht.EMPTY_BYTE_STRING,m.snapshotVersion)),H1(i,u);const f=new Rr(m.target,u,d,m.sequenceNumber);up(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await Jc(t,r)}}async function Jc(t,e,n){if(!Ka(e))throw e;t.L_.add(1),await Xa(t),t.q_.set("Offline"),n||(n=()=>z1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bu(t)})}function K1(t,e){return e().catch(n=>Jc(t,n,e))}async function zu(t){const e=re(t),n=Xr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$j(e);)try{const s=await bj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Wj(e,s)}catch(s){await Jc(e,s)}Q1(e)&&Y1(e)}function $j(t){return Ws(t)&&t.O_.length<10}function Wj(t,e){t.O_.push(e);const n=Xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Q1(t){return Ws(t)&&!Xr(t).n_()&&t.O_.length>0}function Y1(t){Xr(t).start()}async function qj(t){Xr(t).p_()}async function Hj(t){const e=Xr(t);for(const n of t.O_)e.m_(n.mutations)}async function Gj(t,e,n){const r=t.O_.shift(),s=rp.from(r,e,n);await K1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zu(t)}async function Kj(t,e){e&&Xr(t).V_&&await async function(r,s){if(function(o){return MP(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Xr(r).s_(),await K1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zu(r)}}(t,e),Q1(t)&&Y1(t)}async function ov(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Ws(n);n.L_.add(3),await Xa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bu(n)}async function Qj(t,e){const n=re(t);e?(n.L_.delete(2),await Bu(n)):e||(n.L_.add(2),await Xa(n),n.q_.set("Unknown"))}function eo(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new Dj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Uj.bind(null,t),Ro:Fj.bind(null,t),mo:Bj.bind(null,t),d_:zj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),hp(t)?dp(t):t.q_.set("Unknown")):(await t.K_.stop(),G1(t))})),t.K_}function Xr(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new Oj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qj.bind(null,t),mo:Kj.bind(null,t),f_:Hj.bind(null,t),g_:Gj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await zu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new fp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(t,e){if(lr("AsyncQueue",`${e}: ${t}`),Ka(t))return new W(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Uo(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Ni(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.W_=new Me(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ui(e,n,Ni.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Xj{constructor(){this.queries=lv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=lv(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new W(V.ABORTED,"Firestore shutting down"))}}function lv(){return new Zi(t=>y1(t),Ou)}async function pp(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Yj,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=mp(o,`Initialization of query '${Zs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&yp(n)}async function gp(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jj(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&yp(n)}function Zj(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function yp(t){t.Y_.forEach(e=>{e.next()})}var Pf,cv;(cv=Pf||(Pf={})).ea="default",cv.Cache="cache";class vp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Pf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.key=e}}class J1{constructor(e){this.key=e}}class eA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=v1(e),this.Ra=new Ni(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new av,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,f)=>{const p=s.get(m),y=Mu(this.query,f)?f:null,N=!!p&&this.mutatedKeys.has(p.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;p&&y?p.data.isEqual(y.data)?N!==b&&(r.track({type:3,doc:y}),C=!0):this.ga(p,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(c=!0)):!p&&y?(r.track({type:0,doc:y}),C=!0):p&&!y&&(r.track({type:1,doc:p}),C=!0,(u||d)&&(c=!0)),C&&(y?(o=o.add(y),i=b?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,f)=>function(y,N){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return b(y)-b(N)}(m.type,f.type)||this.Aa(m.doc,f.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ui(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new av,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new J1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new X1(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ui.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class nA{constructor(e){this.key=e,this.va=!1}}class rA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zi(c=>y1(c),Ou),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(Q.comparator),this.Na=new Map,this.La=new op,this.Ba={},this.ka=new Map,this.qa=Vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sA(t,e,n=!0){const r=sE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Z1(r,e,n,!0),s}async function iA(t,e){const n=sE(t);await Z1(n,e,!0,!1)}async function Z1(t,e,n,r){const s=await kj(t.localStore,Rn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await oA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q1(t.remoteStore,s),c}async function oA(t,e,n,r,s){t.Ka=(f,p,y)=>async function(b,C,w,E){let T=C.view.ma(w);T.ns&&(T=await rv(b.localStore,C.query,!1).then(({documents:v})=>C.view.ma(v,T)));const A=E&&E.targetChanges.get(C.targetId),L=E&&E.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(T,b.isPrimaryClient,A,L);return dv(b,C.targetId,M.wa),M.snapshot}(t,f,p,y);const i=await rv(t.localStore,e,!0),o=new eA(e,i.Ts),c=o.ma(i.documents),u=Ya.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);dv(t,n,d.wa);const m=new tA(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function aA(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ou(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&cp(r.remoteStore,s.targetId),jf(r,s.targetId)}).catch(Ga)):(jf(r,s.targetId),await Cf(r.localStore,s.targetId,!0))}async function lA(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cp(n.remoteStore,r.targetId))}async function cA(t,e,n){const r=gA(t);try{const s=await function(o,c){const u=re(o),d=Je.now(),m=c.reduce((y,N)=>y.add(N.key),oe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=cr(),b=oe();return u.cs.getEntries(y,m).next(C=>{N=C,N.forEach((w,E)=>{E.isValidDocument()||(b=b.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,N)).next(C=>{f=C;const w=[];for(const E of c){const T=jP(E,f.get(E.key).overlayedDocument);T!=null&&w.push(new is(E.key,T,c1(T.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,w,c)}).next(C=>{p=C;const w=C.applyToLocalDocumentSet(f,b);return u.documentOverlayCache.saveOverlays(y,C.batchId,w)})}).then(()=>({batchId:p.batchId,changes:w1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Me(me)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ja(r,s.changes),await zu(r.remoteStore)}catch(s){const i=mp(s,"Failed to persist write");n.reject(i)}}async function eE(t,e){const n=re(t);try{const r=await Nj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await Ja(n,r,e)}catch(r){await Ga(r)}}function uv(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=re(o);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const p of f.j_)p.Z_(c)&&(d=!0)}),d&&yp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uA(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Me(Q.comparator);o=o.insert(i,Tt.newNoDocument(i,ne.min()));const c=oe().add(i),u=new Uu(ne.min(),new Map,new Me(me),o,c);await eE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),xp(r)}else await Cf(r.localStore,e,!1).then(()=>jf(r,e,n)).catch(Ga)}async function dA(t,e){const n=re(t),r=e.batch.batchId;try{const s=await Tj(n.localStore,e);nE(n,r,null),tE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,s)}catch(s){await Ga(s)}}async function hA(t,e,n){const r=re(t);try{const s=await function(o,c){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(ye(f!==null),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);nE(r,e,n),tE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,s)}catch(s){await Ga(s)}}function tE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function nE(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||rE(t,r)})}function rE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(cp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xp(t))}function dv(t,e,n){for(const r of n)r instanceof X1?(t.La.addReference(r.key,e),fA(t,r)):r instanceof J1?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||rE(t,r.key)):Z()}function fA(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),xp(t))}function xp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(be.fromString(e)),r=t.qa.next();t.Na.set(r,new nA(n)),t.Oa=t.Oa.insert(n,r),q1(t.remoteStore,new Rr(Rn(Du(n.path)),r,"TargetPurposeLimboResolution",Qm.oe))}}async function Ja(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=lp.Wi(u.targetId,d);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const m=re(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,p=>U.forEach(p.$i,y=>m.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>U.forEach(p.Ui,y=>m.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!Ka(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const y=m.os.get(p),N=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(N);m.os=m.os.insert(p,b)}}}(r.localStore,i))}async function mA(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await B1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new W(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.hs)}}function pA(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function sE(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uA.bind(null,e),e.Ca.d_=Jj.bind(null,e.eventManager),e.Ca.$a=Zj.bind(null,e.eventManager),e}function gA(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hA.bind(null,e),e}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Ej(this.persistence,new wj,e.initialUser,this.serializer)}Ga(e){return new yj(ap.Zr,this.serializer)}Wa(e){return new Cj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class Af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mA.bind(null,this.syncEngine),await Qj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xj}()}createDatastore(e){const n=Fu(e.databaseInfo.databaseId),r=function(i){return new Rj(i)}(e.databaseInfo);return function(i,o,c,u){return new Mj(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new Vj(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>uv(this.syncEngine,n,0),function(){return iv.D()?new iv:new Pj}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,m){const f=new rA(s,i,o,c,u,d);return m&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Xa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Af.provider={build:()=>new Af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=o1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ih(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await B1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vA(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ov(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ov(e.remoteStore,s)),t._onlineComponents=e}async function vA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await ih(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await ih(t,new Zc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await ih(t,new Zc);return t._offlineComponents}async function iE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await hv(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await hv(t,new Af))),t._onlineComponents}function xA(t){return iE(t).then(e=>e.syncEngine)}async function eu(t){const e=await iE(t),n=e.eventManager;return n.onListen=sA.bind(null,e.syncEngine),n.onUnlisten=aA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lA.bind(null,e.syncEngine),n}function wA(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new wp({next:p=>{m.Za(),o.enqueueAndForget(()=>gp(i,f));const y=p.docs.has(c);!y&&p.fromCache?d.reject(new W(V.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?d.reject(new W(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new vp(Du(c.path),m,{includeMetadataChanges:!0,_a:!0});return pp(i,f)}(await eu(t),t.asyncQueue,e,n,r)),r.promise}function _A(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const m=new wp({next:p=>{m.Za(),o.enqueueAndForget(()=>gp(i,f)),p.fromCache&&u.source==="server"?d.reject(new W(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new vp(c,m,{includeMetadataChanges:!0,_a:!0});return pp(i,f)}(await eu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,n){if(!n)throw new W(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EA(t,e,n,r){if(e===!0&&r===!0)throw new W(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mv(t){if(!Q.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pv(t){if(Q.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $u(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Xt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$u(t);throw new W(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TA(t,e){if(e<=0)throw new W(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BC;switch(r.type){case"firstParty":return new qC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=fv.get(n);r&&(G("ComponentProvider","Removing Datastore"),fv.delete(n),r.terminate())}(this),Promise.resolve()}}function NA(t,e,n,r={}){var s;const i=(t=Xt(t,Wu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=_t.MOCK_USER;else{c=f_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _t(d)}t._authCredentials=new zC(new i1(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pr(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Wr extends pr{constructor(e,n,r){super(e,n,Du(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Q(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function Be(t,e,...n){if(t=Ge(t),aE("collection","path",e),t instanceof Wu){const r=be.fromString(e,...n);return pv(r),new Wr(t,null,r)}{if(!(t instanceof Nt||t instanceof Wr))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return pv(r),new Wr(t.firestore,null,r)}}function ut(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=o1.newId()),aE("doc","path",e),t instanceof Wu){const r=be.fromString(e,...n);return mv(r),new Nt(t,null,new Q(r))}{if(!(t instanceof Nt||t instanceof Wr))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return mv(r),new Nt(t.firestore,t instanceof Wr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $1(this,"async_queue_retry"),this.Vu=()=>{const r=sh();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ka(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=fp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Jr extends Wu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new yv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yv(e),this._firestoreClient=void 0,await e}}}function IA(t,e){const n=typeof t=="object"?t:Vm(),r=typeof t=="string"?t:"(default)",s=Cu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=u_("firestore");i&&NA(s,...i)}return s}function qu(t){if(t._terminated)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bA(t),t._firestoreClient}function bA(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,m){return new sP(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,oE(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yA(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fi(ht.fromBase64String(e))}catch(n){throw new W(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fi(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=/^__.*__$/;class SA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new is(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}class lE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new is(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Gu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cE(this.Cu)&&kA.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fu(e)}Qu(e,n,r,s=!1){return new Gu({Cu:e,methodName:n,qu:r,path:at.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ku(t){const e=t._freezeSettings(),n=Fu(t._databaseId);return new CA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);bp("Data must be an object, but it was:",o,r);const c=dE(r,o);let u,d;if(i.merge)u=new Qt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const f of i.mergeFields){const p=Rf(e,f,n);if(!o.contains(p))throw new W(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fE(m,p)||m.push(p)}u=new Qt(m),d=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=o.fieldTransforms;return new SA(new Vt(c),u,d)}class Qu extends to{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function PA(t,e,n){return new Gu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tp extends to{_toFieldTransform(e){return new np(e.path,new Pa)}isEqual(e){return e instanceof Tp}}class Np extends to{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=PA(this,e,!0),r=this.Ku.map(i=>no(i,n)),s=new Li(r);return new np(e.path,s)}isEqual(e){return e instanceof Np&&_a(this.Ku,e.Ku)}}class Ip extends to{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Aa(e.serializer,T1(e.serializer,this.$u));return new np(e.path,n)}isEqual(e){return e instanceof Ip&&this.$u===e.$u}}function jA(t,e,n,r){const s=t.Qu(1,e,n);bp("Data must be an object, but it was:",s,r);const i=[],o=Vt.empty();$s(r,(u,d)=>{const m=kp(e,u,n);d=Ge(d);const f=s.Nu(m);if(d instanceof Qu)i.push(m);else{const p=no(d,f);p!=null&&(i.push(m),o.set(m,p))}});const c=new Qt(i);return new lE(o,c,s.fieldTransforms)}function AA(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Rf(e,r,n)],u=[s];if(i.length%2!=0)throw new W(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)c.push(Rf(e,i[p])),u.push(i[p+1]);const d=[],m=Vt.empty();for(let p=c.length-1;p>=0;--p)if(!fE(d,c[p])){const y=c[p];let N=u[p];N=Ge(N);const b=o.Nu(y);if(N instanceof Qu)d.push(y);else{const C=no(N,b);C!=null&&(d.push(y),m.set(y,C))}}const f=new Qt(d);return new lE(m,f,o.fieldTransforms)}function RA(t,e,n,r=!1){return no(n,t.Qu(r?4:3,e))}function no(t,e){if(hE(t=Ge(t)))return bp("Unsupported field value:",e,t),dE(t,e);if(t instanceof to)return function(r,s){if(!cE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=no(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Je.fromDate(r);return{timestampValue:Xc(s.serializer,i)}}if(r instanceof Je){const i=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xc(s.serializer,i)}}if(r instanceof _p)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fi)return{bytesValue:D1(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ip(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ep)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return tp(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$u(r)}`)}(t,e)}function dE(t,e){const n={};return a1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(t,(r,s)=>{const i=no(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof _p||t instanceof Fi||t instanceof Nt||t instanceof to||t instanceof Ep)}function bp(t,e,n){if(!hE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$u(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rf(t,e,n){if((e=Ge(e))instanceof Hu)return e._internalPath;if(typeof e=="string")return kp(t,e);throw tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const DA=new RegExp("[~\\*/\\[\\]]");function kp(t,e,n){if(e.search(DA)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hu(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(V.INVALID_ARGUMENT,c+t+u)}function fE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OA extends mE{data(){return super.data()}}function Yu(t,e){return typeof e=="string"?kp(t,e):e instanceof Hu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sp{}class Cp extends Sp{}function At(t,e,...n){let r=[];e instanceof Sp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Pp).length,c=i.filter(u=>u instanceof Xu).length;if(o>1||o>0&&c>0)throw new W(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xu extends Cp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xu(e,n,r)}_apply(e){const n=this._parse(e);return gE(e._query,n),new pr(e.firestore,e.converter,Nf(e._query,n))}_parse(e){const n=Ku(e.firestore);return function(i,o,c,u,d,m,f){let p;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new W(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){wv(f,m);const y=[];for(const N of f)y.push(xv(u,i,N));p={arrayValue:{values:y}}}else p=xv(u,i,f)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||wv(f,m),p=RA(c,o,f,m==="in"||m==="not-in");return He.create(d,m,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bi(t,e,n){const r=e,s=Yu("where",t);return Xu._create(s,r,n)}class Pp extends Sp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Tn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)gE(o,u),o=Nf(o,u)}(e._query,n),new pr(e.firestore,e.converter,Nf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jp extends Cp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ca(i,o)}(e._query,this._field,this._direction);return new pr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ji(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Wt(t,e="asc"){const n=e,r=Yu("orderBy",t);return jp._create(r,n)}class Ap extends Cp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ap(e,n,r)}_apply(e){return new pr(e.firestore,e.converter,Yc(e._query,this._limit,this._limitType))}}function Ra(t){return TA("limit",t),Ap._create("limit",t,"F")}function xv(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new W(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!g1(e)&&n.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!Q.isDocumentKey(r))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fy(t,new Q(r))}if(n instanceof Nt)return Fy(t,n._key);throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$u(n)}.`)}function wv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MA{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $s(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ze(o.doubleValue));return new Ep(i)}convertGeoPoint(e){return new _p(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ba(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ye(F1(r));const s=new ka(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vE extends mE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cc extends vE{data(e={}){return super.data(e)}}class xE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cc(this._firestore,this._userDataWriter,r.key,r,new Bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new cc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Bo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new cc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Bo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:LA(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){t=Xt(t,Nt);const e=Xt(t.firestore,Jr);return wA(qu(e),t._key).then(n=>_E(e,t,n))}class Rp extends MA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Ft(t){t=Xt(t,pr);const e=Xt(t.firestore,Jr),n=qu(e),r=new Rp(e);return pE(t._query),_A(n,t._query).then(s=>new xE(e,r,t,s))}function VA(t,e,n){t=Xt(t,Nt);const r=Xt(t.firestore,Jr),s=yE(t.converter,e);return Dp(r,[uE(Ku(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wn.none())])}function Ms(t,e,n,...r){t=Xt(t,Nt);const s=Xt(t.firestore,Jr),i=Ku(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Hu?AA(i,"updateDoc",t._key,e,n,r):jA(i,"updateDoc",t._key,e),Dp(s,[o.toMutation(t._key,wn.exists(!0))])}function zi(t,e){const n=Xt(t.firestore,Jr),r=ut(t),s=yE(t.converter,e);return Dp(n,[uE(Ku(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function wE(t,...e){var n,r,s;t=Ge(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vv(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(vv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let u,d,m;if(t instanceof Nt)d=Xt(t.firestore,Jr),m=Du(t._key.path),u={next:f=>{e[o]&&e[o](_E(d,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Xt(t,pr);d=Xt(f.firestore,Jr),m=f._query;const p=new Rp(d);u={next:y=>{e[o]&&e[o](new xE(d,p,f,y))},error:e[o+1],complete:e[o+2]},pE(t._query)}return function(p,y,N,b){const C=new wp(b),w=new vp(y,C,N);return p.asyncQueue.enqueueAndForget(async()=>pp(await eu(p),w)),()=>{C.Za(),p.asyncQueue.enqueueAndForget(async()=>gp(await eu(p),w))}}(qu(d),m,c,u)}function Dp(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>cA(await xA(r),s,i)),i.promise}(qu(t),e)}function _E(t,e,n){const r=n.docs.get(e._key),s=new Rp(t);return new vE(t,s,e._key,r,new Bo(n.hasPendingWrites,n.fromCache),e.converter)}function On(){return new Tp("serverTimestamp")}function Op(...t){return new Np("arrayUnion",t)}function Xn(t){return new Ip("increment",t)}(function(e,n=!0){(function(s){Xi=s})(zs),Ps(new Kr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Jr(new $C(r.getProvider("auth-internal")),new GC(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Pn(Oy,"4.7.3",e),Pn(Oy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebasestorage.googleapis.com",UA="storageBucket",FA=2*60*1e3,BA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Vn{constructor(e,n,r=0){super(oh(e),`Firebase Storage: ${n} (${oh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return oh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function oh(t){return"storage/"+t}function zA(){const t="An unknown error occurred, please check the error payload for server response.";return new Un(Ln.UNKNOWN,t)}function $A(){return new Un(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WA(){return new Un(Ln.CANCELED,"User canceled the upload/download.")}function qA(t){return new Un(Ln.INVALID_URL,"Invalid URL '"+t+"'.")}function HA(t){return new Un(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _v(t){return new Un(Ln.INVALID_ARGUMENT,t)}function TE(){return new Un(Ln.APP_DELETED,"The Firebase app was deleted.")}function GA(t){return new Un(Ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(r.path==="")return r;throw HA(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(A){A.path_=decodeURIComponent(A.path)}const m="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${m}/b/${s}/o${p}`,"i"),N={bucket:1,path:3},b=n===EE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",w=new RegExp(`^https?://${b}/${s}/${C}`,"i"),T=[{regex:c,indices:u,postModify:i},{regex:y,indices:N,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let A=0;A<T.length;A++){const L=T[A],M=L.regex.exec(e);if(M){const v=M[L.indices.bucket];let x=M[L.indices.path];x||(x=""),r=new yn(v,x),L.postModify(r);break}}if(r==null)throw qA(e);return r}}class KA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function m(...C){d||(d=!0,e.apply(null,C))}function f(C){s=setTimeout(()=>{s=null,t(y,u())},C)}function p(){i&&clearTimeout(i)}function y(C,...w){if(d){p();return}if(C){p(),m.call(null,C,...w);return}if(u()||o){p(),m.call(null,C,...w);return}r<64&&(r*=2);let T;c===1?(c=2,T=0):T=(r+Math.random())*1e3,f(T)}let N=!1;function b(C){N||(N=!0,p(),!d&&(s!==null?(C||(c=2),clearTimeout(s),f(0)):C||(c=1)))}return f(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function YA(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){return t!==void 0}function Ev(t,e,n,r){if(r<e)throw _v(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _v(`Invalid value for '${t}'. Expected ${n} or less.`)}function JA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var nu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(nu||(nu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,s,i,o,c,u,d,m,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=m,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,N)=>{this.resolve_=y,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===nu.NO_ERROR,u=i.getStatus();if(!c||ZA(u,this.additionalRetryCodes_)&&this.retry){const m=i.getErrorCode()===nu.ABORT;r(!1,new Bl(!1,null,m));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Bl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());XA(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=zA();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?TE():WA();o(u)}else{const u=$A();o(u)}};this.canceled_?n(!1,new Bl(!1,null,!0)):this.backoffId_=QA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iR(t,e,n,r,s,i,o=!0){const c=JA(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return rR(d,e),tR(d,n),nR(d,i),sR(d,r),new eR(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ru(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aR(this._location.path)}get storage(){return this._service}get parent(){const e=oR(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new ru(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GA(e)}}function Tv(t,e){const n=e==null?void 0:e[UA];return n==null?null:yn.makeFromBucketSpec(n,t)}function lR(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:f_(s,t.app.options.projectId))}class cR{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=EE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FA,this._maxUploadRetryTime=BA,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=Tv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Tv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ev("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ev("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ru(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new KA(TE());{const o=iR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Nv="@firebase/storage",Iv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="storage";function uR(t=Vm(),e){t=Ge(t);const r=Cu(t,NE).getImmediate({identifier:e}),s=u_("storage");return s&&dR(r,...s),r}function dR(t,e,n,r={}){lR(t,e,n,r)}function hR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cR(n,r,s,e,zs)}function fR(){Ps(new Kr(NE,hR,"PUBLIC").setMultipleInstances(!0)),Pn(Nv,Iv,""),Pn(Nv,Iv,"esm2017")}fR();const mR={apiKey:"AIzaSyCdrH2241iaDDuo33lS7gEswhmwwiEDXWw",authDomain:"last-zone-91af9.firebaseapp.com",projectId:"last-zone-91af9",storageBucket:"last-zone-91af9.firebasestorage.app",messagingSenderId:"58463070590",appId:"1:58463070590:web:4b67aab1defe19cb176b2f"},Ju=g_(mR),Co=UC(Ju),se=IA(Ju);uR(Ju);let zl=null;const pR=()=>{if(typeof window>"u")return!1;const t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e="serviceWorker"in navigator,n="Notification"in window,r="PushManager"in window;return t?(console.log("iOS detected - FCM not supported, using Firestore notifications only"),!1):e&&n&&r},bv=async()=>{if(zl)return zl;if(!pR())return console.log("Firebase Messaging not supported on this browser"),null;try{const{getMessaging:t}=await uf(async()=>{const{getMessaging:e}=await import("./index.esm-Bw4i_Wio.js");return{getMessaging:e}},[]);return zl=t(Ju),zl}catch(t){return console.error("Failed to initialize Firebase Messaging:",t),null}},IE=P.createContext();function Ze(){return P.useContext(IE)}function gR({children:t}){const[e,n]=P.useState(null),[r,s]=P.useState(null),[i,o]=P.useState(!0);async function c(N,b){return await NS(Co,N,b)}async function u(N,b,C,w=""){const E=await TS(Co,N,b),T=ut(se,"users",E.user.uid);return await VA(T,{displayName:C,email:N,phone:"",walletBalance:0,depositedBalance:0,winningBalance:0,bonusBalance:0,status:"active",role:"user",referralCode:d(),referredBy:w||null,matchesPlayed:0,totalKills:0,totalWinnings:0,kycStatus:"pending",createdAt:On(),updatedAt:On()}),E}function d(){return"LZL"+Math.random().toString(36).substring(2,8).toUpperCase()}function m(){return SS(Co)}function f(N){return ES(Co,N)}async function p(){if(e){const N=await Zr(ut(se,"users",e.uid));N.exists()&&s({id:N.id,...N.data()})}}P.useEffect(()=>kS(Co,async b=>{if(n(b),b){const C=await Zr(ut(se,"users",b.uid));C.exists()&&s({id:C.id,...C.data()})}else s(null);o(!1)}),[]);const y={currentUser:e,userData:r,login:c,register:u,logout:m,resetPassword:f,refreshUserData:p,loading:i};return a.jsx(IE.Provider,{value:y,children:t})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},m)=>P.createElement("svg",{ref:m,...yR,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${vR(t)}`,c].join(" "),...d},[...e.map(([f,p])=>P.createElement(f,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Y("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Y("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Y("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Y("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Y("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Y("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Y("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=Y("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=Y("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Y("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Y("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=Y("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Y("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Y("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Y("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Y("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=Y("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Y("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Y("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=Y("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Y("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Cv={success:Vp,error:Mp,info:nd,notification:Ts},Pv={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",notification:"bg-gradient-to-r from-primary-500 to-purple-600"};function OR({message:t,type:e="info",title:n,onClose:r,duration:s=5e3}){const[i,o]=P.useState(!1),c=Cv[e]||Cv.info;P.useEffect(()=>{if(requestAnimationFrame(()=>o(!0)),s){const d=setTimeout(()=>{o(!1),setTimeout(r,300)},s);return()=>clearTimeout(d)}},[s,r]);const u=()=>{o(!1),setTimeout(r,300)};return a.jsx("div",{className:`
        fixed top-4 left-4 right-4 z-50 md:left-auto md:w-96
        transform transition-all duration-300 ease-out
        ${i?"translate-y-0 opacity-100":"-translate-y-4 opacity-0"}
      `,children:a.jsxs("div",{className:"bg-dark-400 border border-dark-300 rounded-xl shadow-xl p-4 flex gap-3 relative overflow-hidden backdrop-blur-sm",children:[s&&a.jsx("div",{className:`absolute bottom-0 left-0 h-1 ${Pv[e]||"bg-primary-500"}`,style:{transition:`width ${s}ms linear`,width:i?"0%":"100%"}}),a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${Pv[e]||"bg-dark-300"} text-white shadow-lg`,children:a.jsx(c,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[n&&a.jsx("h4",{className:"font-semibold text-white mb-0.5 truncate",children:n}),a.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:t})]}),a.jsx("button",{onClick:u,className:"p-1 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors h-fit",children:a.jsx(Oa,{className:"w-4 h-4"})})]})})}const CE=P.createContext();function MR(){const t=P.useContext(CE);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}function LR({children:t}){const[e,n]=P.useState([]),r=P.useCallback(({message:i,title:o,type:c="info",duration:u=5e3})=>{const d=Date.now();n(m=>[...m,{id:d,message:i,title:o,type:c,duration:u}])},[]),s=P.useCallback(i=>{n(o=>o.filter(c=>c.id!==i))},[]);return a.jsxs(CE.Provider,{value:{showToast:r},children:[t,a.jsx("div",{className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none p-4 flex flex-col items-center gap-2 sm:items-end",children:e.map(i=>a.jsx("div",{className:"pointer-events-auto w-full max-w-sm",children:a.jsx(OR,{...i,onClose:()=>s(i.id)})},i.id))})]})}const Xs=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function PE(){const t=P.useRef(null),e=P.useRef(!0),{showToast:n}=MR(),{currentUser:r}=Ze(),[s,i]=P.useState(null),[o,c]=P.useState(!1);P.useEffect(()=>{const f=wE(At(Be(se,"notifications"),Wt("createdAt","desc"),Ra(1)),p=>{p.docChanges().forEach(y=>{if(y.type==="added"){const N={id:y.doc.id,...y.doc.data()};if(e.current){t.current=N.id,e.current=!1;return}N.id!==t.current&&(n({title:N.title,message:N.message,type:"notification",duration:6e3}),t.current=N.id)}})},p=>{console.warn("Notification listener error:",p)});return()=>f()},[n]),P.useEffect(()=>{typeof window<"u"&&(async()=>{if(Xs()){console.log("iOS detected - skipping FCM initialization, using Firestore notifications");return}try{if(!("serviceWorker"in navigator)){console.log("Service Worker not supported");return}const p=await bv();if(!p){console.log("Firebase Messaging not available on this browser");return}c(!0);try{const y=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registered with scope:",y.scope)}catch(y){console.warn("Service Worker registration failed:",y)}try{const{onMessage:y}=await uf(async()=>{const{onMessage:N}=await import("./index.esm-Bw4i_Wio.js");return{onMessage:N}},[]);y(p,N=>{if(console.log("[usePushNotifications] Foreground Message:",N),N.notification){const{title:b,body:C}=N.notification;n({title:b,message:C,type:"notification",duration:6e3})}})}catch(y){console.warn("Failed to setup message listener:",y)}}catch(p){console.error("Error initializing FCM:",p)}})()},[n]);const u=async()=>{if(Xs())return console.log("Push notifications not supported on iOS Safari"),"unsupported";if(!("Notification"in window))return"unsupported";try{const f=await Notification.requestPermission();return f==="granted"&&await d(),f}catch(f){return console.error("Error requesting permission:",f),"denied"}},d=async()=>{if(!Xs())try{const f=await bv();if(!f)return;const{getToken:p}=await uf(async()=>{const{getToken:b}=await import("./index.esm-Bw4i_Wio.js");return{getToken:b}},[]),y=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js"),N=await p(f,{serviceWorkerRegistration:y}).catch(b=>(console.warn("Failed to get FCM token:",b),null));if(N&&(console.log("FCM Token obtained:",N.substring(0,20)+"..."),i(N),r))try{const b=ut(se,"users",r.uid);await Ms(b,{fcmTokens:Op(N)}),console.log("FCM Token saved to user profile")}catch(b){console.warn("Failed to save FCM token:",b)}}catch(f){console.error("Error getting FCM token:",f)}};return P.useEffect(()=>{Xs()||r&&"Notification"in window&&Notification.permission==="granted"&&d()},[r]),{permission:typeof window>"u"||Xs()||!("Notification"in window)?"unsupported":Notification.permission,requestPermission:u,fcmToken:s,isSupported:!Xs()&&o}}function ft({size:t="md",text:e=""}){const n={sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"};return a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`${n[t]} rounded-full border-4 border-transparent animate-spin`,style:{borderTopColor:"#3b82f6",borderRightColor:"#8b5cf6",borderBottomColor:"#ec4899",borderLeftColor:"transparent"}}),a.jsx("div",{className:`absolute inset-0 ${n[t]} rounded-full border-4 border-transparent animate-spin`,style:{borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"#3b82f6",animationDirection:"reverse",animationDuration:"0.8s"}})]}),e&&a.jsx("p",{className:"mt-4 text-gray-400 text-sm animate-pulse",children:e})]})}function ou(t){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(t)}function Vs(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Se(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Ee(t){Se(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ou(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function VR(t,e){Se(2,arguments);var n=Ee(t).getTime(),r=Vs(e);return new Date(n+r)}var UR={};function Za(){return UR}function Lf(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function fc(t,e){Se(2,arguments);var n=Ee(t),r=Ee(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function FR(t){return Se(1,arguments),t instanceof Date||ou(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function BR(t){if(Se(1,arguments),!FR(t)&&typeof t!="number")return!1;var e=Ee(t);return!isNaN(Number(e))}function zR(t,e){Se(2,arguments);var n=Ee(t),r=Ee(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function $R(t,e){return Se(2,arguments),Ee(t).getTime()-Ee(e).getTime()}var WR={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},qR="trunc";function HR(t){return WR[qR]}function GR(t){Se(1,arguments);var e=Ee(t);return e.setHours(23,59,59,999),e}function KR(t){Se(1,arguments);var e=Ee(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function QR(t){Se(1,arguments);var e=Ee(t);return GR(e).getTime()===KR(e).getTime()}function YR(t,e){Se(2,arguments);var n=Ee(t),r=Ee(e),s=fc(n,r),i=Math.abs(zR(n,r)),o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);var c=fc(n,r)===-s;QR(Ee(t))&&i===1&&fc(t,r)===1&&(c=!1),o=s*(i-Number(c))}return o===0?0:o}function XR(t,e,n){Se(2,arguments);var r=$R(t,e)/1e3;return HR()(r)}function JR(t,e){Se(2,arguments);var n=Vs(e);return VR(t,-n)}var ZR=864e5;function e4(t){Se(1,arguments);var e=Ee(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/ZR)+1}function au(t){Se(1,arguments);var e=1,n=Ee(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function jE(t){Se(1,arguments);var e=Ee(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=au(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=au(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function t4(t){Se(1,arguments);var e=jE(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=au(n);return r}var n4=6048e5;function r4(t){Se(1,arguments);var e=Ee(t),n=au(e).getTime()-t4(e).getTime();return Math.round(n/n4)+1}function lu(t,e){var n,r,s,i,o,c,u,d;Se(1,arguments);var m=Za(),f=Vs((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&s!==void 0?s:m.weekStartsOn)!==null&&r!==void 0?r:(u=m.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=Ee(t),y=p.getUTCDay(),N=(y<f?7:0)+y-f;return p.setUTCDate(p.getUTCDate()-N),p.setUTCHours(0,0,0,0),p}function AE(t,e){var n,r,s,i,o,c,u,d;Se(1,arguments);var m=Ee(t),f=m.getUTCFullYear(),p=Za(),y=Vs((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(u=p.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=new Date(0);N.setUTCFullYear(f+1,0,y),N.setUTCHours(0,0,0,0);var b=lu(N,e),C=new Date(0);C.setUTCFullYear(f,0,y),C.setUTCHours(0,0,0,0);var w=lu(C,e);return m.getTime()>=b.getTime()?f+1:m.getTime()>=w.getTime()?f:f-1}function s4(t,e){var n,r,s,i,o,c,u,d;Se(1,arguments);var m=Za(),f=Vs((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(u=m.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=AE(t,e),y=new Date(0);y.setUTCFullYear(p,0,f),y.setUTCHours(0,0,0,0);var N=lu(y,e);return N}var i4=6048e5;function o4(t,e){Se(1,arguments);var n=Ee(t),r=lu(n,e).getTime()-s4(n,e).getTime();return Math.round(r/i4)+1}function pe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var _r={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return pe(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):pe(r+1,2)},d:function(e,n){return pe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return pe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return pe(e.getUTCHours(),n.length)},m:function(e,n){return pe(e.getUTCMinutes(),n.length)},s:function(e,n){return pe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return pe(i,n.length)}},Js={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},a4={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return _r.y(e,n)},Y:function(e,n,r,s){var i=AE(e,s),o=i>0?i:1-i;if(n==="YY"){var c=o%100;return pe(c,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):pe(o,n.length)},R:function(e,n){var r=jE(e);return pe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return pe(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return pe(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return pe(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return _r.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return pe(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=o4(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):pe(i,n.length)},I:function(e,n,r){var s=r4(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):pe(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):_r.d(e,n)},D:function(e,n,r){var s=e4(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):pe(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return pe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return pe(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return pe(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=Js.noon:s===0?i=Js.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=Js.evening:s>=12?i=Js.afternoon:s>=4?i=Js.morning:i=Js.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return _r.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):_r.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):pe(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):pe(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):_r.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):_r.s(e,n)},S:function(e,n){return _r.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Av(o);case"XXXX":case"XX":return ps(o);case"XXXXX":case"XXX":default:return ps(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return Av(o);case"xxxx":case"xx":return ps(o);case"xxxxx":case"xxx":default:return ps(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+jv(o,":");case"OOOO":default:return"GMT"+ps(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+jv(o,":");case"zzzz":default:return"GMT"+ps(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return pe(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return pe(o,n.length)}};function jv(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+pe(i,2)}function Av(t,e){if(t%60===0){var n=t>0?"-":"+";return n+pe(Math.abs(t)/60,2)}return ps(t,e)}function ps(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=pe(Math.floor(s/60),2),o=pe(s%60,2);return r+i+n+o}var Rv=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},RE=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},l4=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Rv(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Rv(s,n)).replace("{{time}}",RE(i,n))},c4={p:RE,P:l4},u4=["D","DD"],d4=["YY","YYYY"];function h4(t){return u4.indexOf(t)!==-1}function f4(t){return d4.indexOf(t)!==-1}function Dv(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var m4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},p4=function(e,n,r){var s,i=m4[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function ch(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var g4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},v4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},x4={date:ch({formats:g4,defaultWidth:"full"}),time:ch({formats:y4,defaultWidth:"full"}),dateTime:ch({formats:v4,defaultWidth:"full"})},w4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_4=function(e,n,r,s){return w4[e]};function Po(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var c=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[c]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var E4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},T4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},I4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},b4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},k4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S4=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},C4={ordinalNumber:S4,era:Po({values:E4,defaultWidth:"wide"}),quarter:Po({values:T4,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Po({values:N4,defaultWidth:"wide"}),day:Po({values:I4,defaultWidth:"wide"}),dayPeriod:Po({values:b4,defaultWidth:"wide",formattingValues:k4,defaultFormattingWidth:"wide"})};function jo(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?j4(c,function(f){return f.test(o)}):P4(c,function(f){return f.test(o)}),d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;var m=e.slice(o.length);return{value:d,rest:m}}}function P4(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function j4(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function A4(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var c=e.slice(s.length);return{value:o,rest:c}}}var R4=/^(\d+)(th|st|nd|rd)?/i,D4=/\d+/i,O4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},M4={any:[/^b/i,/^(a|c)/i]},L4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V4={any:[/1/i,/2/i,/3/i,/4/i]},U4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},F4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},B4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q4={ordinalNumber:A4({matchPattern:R4,parsePattern:D4,valueCallback:function(e){return parseInt(e,10)}}),era:jo({matchPatterns:O4,defaultMatchWidth:"wide",parsePatterns:M4,defaultParseWidth:"any"}),quarter:jo({matchPatterns:L4,defaultMatchWidth:"wide",parsePatterns:V4,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:jo({matchPatterns:U4,defaultMatchWidth:"wide",parsePatterns:F4,defaultParseWidth:"any"}),day:jo({matchPatterns:B4,defaultMatchWidth:"wide",parsePatterns:z4,defaultParseWidth:"any"}),dayPeriod:jo({matchPatterns:$4,defaultMatchWidth:"any",parsePatterns:W4,defaultParseWidth:"any"})},DE={code:"en-US",formatDistance:p4,formatLong:x4,formatRelative:_4,localize:C4,match:q4,options:{weekStartsOn:0,firstWeekContainsDate:1}},H4=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G4=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K4=/^'([^]*?)'?$/,Q4=/''/g,Y4=/[a-zA-Z]/;function OE(t,e,n){var r,s,i,o,c,u,d,m,f,p,y,N,b,C;Se(2,arguments);var w=String(e),E=Za(),T=(r=(s=void 0)!==null&&s!==void 0?s:E.locale)!==null&&r!==void 0?r:DE,A=Vs((i=(o=(c=(u=void 0)!==null&&u!==void 0?u:void 0)!==null&&c!==void 0?c:E.firstWeekContainsDate)!==null&&o!==void 0?o:(d=E.locale)===null||d===void 0||(m=d.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=Vs((f=(p=(y=(N=void 0)!==null&&N!==void 0?N:void 0)!==null&&y!==void 0?y:E.weekStartsOn)!==null&&p!==void 0?p:(b=E.locale)===null||b===void 0||(C=b.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&f!==void 0?f:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var M=Ee(t);if(!BR(M))throw new RangeError("Invalid time value");var v=Lf(M),x=JR(M,v),I={firstWeekContainsDate:A,weekStartsOn:L,locale:T,_originalDate:M},S=w.match(G4).map(function(j){var R=j[0];if(R==="p"||R==="P"){var k=c4[R];return k(j,T.formatLong)}return j}).join("").match(H4).map(function(j){if(j==="''")return"'";var R=j[0];if(R==="'")return X4(j);var k=a4[R];if(k)return f4(j)&&Dv(j,e,String(t)),h4(j)&&Dv(j,e,String(t)),k(x,j,T.localize,I);if(R.match(Y4))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return j}).join("");return S}function X4(t){var e=t.match(K4);return e?e[1].replace(Q4,"'"):t}function ME(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function J4(t){return ME({},t)}var Ov=1440,Z4=2520,uh=43200,e5=86400;function t5(t,e,n){var r,s;Se(2,arguments);var i=Za(),o=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:i.locale)!==null&&r!==void 0?r:DE;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var c=fc(t,e);if(isNaN(c))throw new RangeError("Invalid time value");var u=ME(J4(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:c}),d,m;c>0?(d=Ee(e),m=Ee(t)):(d=Ee(t),m=Ee(e));var f=XR(m,d),p=(Lf(m)-Lf(d))/1e3,y=Math.round((f-p)/60),N;if(y<2)return n!=null&&n.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,u):f<10?o.formatDistance("lessThanXSeconds",10,u):f<20?o.formatDistance("lessThanXSeconds",20,u):f<40?o.formatDistance("halfAMinute",0,u):f<60?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",1,u):y===0?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",y,u);if(y<45)return o.formatDistance("xMinutes",y,u);if(y<90)return o.formatDistance("aboutXHours",1,u);if(y<Ov){var b=Math.round(y/60);return o.formatDistance("aboutXHours",b,u)}else{if(y<Z4)return o.formatDistance("xDays",1,u);if(y<uh){var C=Math.round(y/Ov);return o.formatDistance("xDays",C,u)}else if(y<e5)return N=Math.round(y/uh),o.formatDistance("aboutXMonths",N,u)}if(N=YR(m,d),N<12){var w=Math.round(y/uh);return o.formatDistance("xMonths",w,u)}else{var E=N%12,T=Math.floor(N/12);return E<3?o.formatDistance("aboutXYears",T,u):E<9?o.formatDistance("overXYears",T,u):o.formatDistance("almostXYears",T+1,u)}}function n5(t,e){return Se(1,arguments),t5(t,Date.now(),e)}const K=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),Bp=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return OE(e,"dd MMM yyyy")},qs=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return OE(e,"dd MMM yyyy, hh:mm a")},r5=t=>{if(!t)return"N/A";const e=t.toDate?t.toDate():new Date(t);return n5(e,{addSuffix:!0})};function s5(){const{userData:t}=Ze();return a.jsx("header",{className:"sticky top-0 z-40 gradient-header safe-top",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[a.jsxs(Ae,{to:"/",className:"flex items-center gap-2",children:[a.jsx("img",{src:"/logo.jpeg",alt:"Last Zone Legends",className:"w-10 h-10 rounded-xl object-cover ring-2 ring-white/20"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-sm font-bold text-white leading-tight",children:"Last Zone"}),a.jsx("p",{className:"text-[10px] text-white/70",children:"Legends"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Ae,{to:"/wallet",className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 backdrop-blur-sm rounded-full border border-white/10 hover:bg-white/20 transition-all",children:[a.jsx(ro,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-sm font-semibold text-white",children:K((t==null?void 0:t.walletBalance)||0)})]}),a.jsxs(Ae,{to:"/notifications",className:"relative p-2.5 bg-white/10 backdrop-blur-sm rounded-full border border-white/10 hover:bg-white/20 transition-all",children:[a.jsx(Ts,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]})]})]})})}const i5=[{path:"/",icon:TR,label:"Home"},{path:"/wallet",icon:ro,label:"Wallet"},{path:"/lottery",icon:Ls,label:"Lottery"},{path:"/profile",icon:Da,label:"Profile"}];function o5(){return a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bottom-nav-shadow safe-bottom z-50",children:a.jsx("div",{className:"flex items-center justify-around py-2 px-2",children:i5.map(t=>a.jsx(FI,{to:t.path,className:({isActive:e})=>`
              relative flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all duration-300
              ${e?"text-white":"text-gray-500 hover:text-gray-300"}
            `,children:({isActive:e})=>a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20 rounded-xl"}),a.jsx("div",{className:`relative p-1.5 rounded-lg transition-all duration-300 ${e?"bg-gradient-to-r from-blue-600 to-purple-600 shadow-lg shadow-blue-500/30":""}`,children:a.jsx(t.icon,{className:`w-5 h-5 transition-transform ${e?"scale-110":""}`})}),a.jsx("span",{className:`text-xs font-medium ${e?"text-white":""}`,children:t.label})]})},t.path))})})}function le({children:t,hideHeader:e=!1,hideNav:n=!1}){return PE(),a.jsxs("div",{className:"min-h-screen bg-dark-500 flex flex-col",children:[!e&&a.jsx(s5,{}),a.jsx("main",{className:`flex-1 ${n?"":"pb-20"}`,children:t}),!n&&a.jsx(o5,{})]})}function ee({children:t,className:e="",onClick:n,glow:r=!1,glass:s=!1}){return a.jsx("div",{onClick:n,className:`
        rounded-2xl p-4 card-shadow
        ${s?"glass":"gradient-card"}
        ${r?"card-glow":""}
        ${n?"cursor-pointer active:scale-[0.98] transition-all duration-200":""}
        ${e}
      `,children:t})}const a5={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",approved:"bg-green-500/20 text-green-400 border-green-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30",completed:"bg-green-500/20 text-green-400 border-green-500/30",upcoming:"bg-blue-500/20 text-blue-400 border-blue-500/30",live:"bg-green-500/20 text-green-400 border-green-500/30 animate-pulse",ongoing:"bg-green-500/20 text-green-400 border-green-500/30 animate-pulse",finished:"bg-gray-500/20 text-gray-400 border-gray-500/30",cancelled:"bg-orange-500/20 text-orange-400 border-orange-500/30",active:"bg-green-500/20 text-green-400 border-green-500/30"};function so({status:t,className:e=""}){const n=a5[t==null?void 0:t.toLowerCase()]||"bg-gray-500/20 text-gray-400 border-gray-500/30";return a.jsxs("span",{className:`
        inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
        border backdrop-blur-sm
        ${n}
        ${e}
      `,children:[(t==="live"||t==="ongoing")&&a.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-ping"}),t]})}function l5(){const{currentUser:t}=Ze(),[e,n]=P.useState([]),[r,s]=P.useState([]),[i,o]=P.useState([]),[c,u]=P.useState(!0);P.useEffect(()=>{d()},[]);const d=async()=>{try{let f=[];try{f=(await Ft(At(Be(se,"games"),Wt("displayOrder","asc")))).docs.map(w=>({id:w.id,...w.data()}))}catch{console.warn("Falling back to client-side sorting for games"),f=(await Ft(Be(se,"games"))).docs.map(E=>({id:E.id,...E.data()})),f.sort((E,T)=>(E.displayOrder||0)-(T.displayOrder||0))}const[p,y]=await Promise.all([Ft(At(Be(se,"promotions"),Bi("isActive","==",!0),Wt("order","asc"))),Ft(At(Be(se,"tournaments"),Wt("startDateTime","desc")))]);n(p.docs.map(C=>({id:C.id,...C.data()}))),s(f);const N=y.docs.map(C=>({id:C.id,...C.data()})),b=t?N.filter(C=>{var w;return(w=C.participantDetails)==null?void 0:w.some(E=>E.odeuUserId===t.uid)}):[];o(b)}catch(f){console.error("Error fetching data:",f)}finally{u(!1)}},m=[{icon:Da,label:"My Profile",path:"/profile",color:"from-blue-500 to-cyan-500"},{icon:ro,label:"My Wallet",path:"/wallet",color:"from-green-500 to-emerald-500"},{icon:Rt,label:"Top Players",path:"/leaderboard",color:"from-yellow-500 to-orange-500"},{icon:iu,label:"Contact Us",path:"/contact",color:"from-purple-500 to-pink-500"}];return c?a.jsx(le,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{text:"Loading..."})})}):a.jsx(le,{children:a.jsxs("div",{className:"px-4 py-4 space-y-6",children:[e.length>0&&a.jsx("div",{className:"overflow-x-auto hide-scrollbar -mx-4 px-4",children:a.jsx("div",{className:"flex gap-3",style:{width:"max-content"},children:e.map(f=>a.jsx("div",{className:"w-[85vw] max-w-sm flex-shrink-0",children:a.jsxs("a",{href:f.link||"#",target:f.link?"_blank":"_self",rel:f.link?"noopener noreferrer":"",className:`block aspect-[2/1] rounded-2xl overflow-hidden bg-dark-300 relative group ${!f.link&&"cursor-default"}`,onClick:p=>!f.link&&p.preventDefault(),children:[f.image?a.jsx("img",{src:f.image,alt:"Promotion",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 animate-pulse-slow"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})},f.id))})}),a.jsx("div",{className:"grid grid-cols-4 gap-3",children:m.map((f,p)=>a.jsxs(Ae,{to:f.path,className:"flex flex-col items-center gap-2 group",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${f.color} flex items-center justify-center shadow-lg transition-all duration-300 group-hover:scale-110 group-hover:shadow-xl group-active:scale-95`,style:{boxShadow:`0 8px 20px ${f.color.includes("blue")?"rgba(59,130,246,0.3)":f.color.includes("green")?"rgba(16,185,129,0.3)":f.color.includes("yellow")?"rgba(245,158,11,0.3)":"rgba(168,85,247,0.3)"}`},children:a.jsx(f.icon,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xs text-gray-400 text-center group-hover:text-white transition-colors",children:f.label})]},p))}),a.jsxs("section",{className:"animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[a.jsx(Zu,{className:"w-5 h-5 text-yellow-400"}),"My Contests"]}),a.jsxs(Ae,{to:"/my-contests",className:"text-primary-400 text-sm flex items-center gap-1 hover:text-primary-300 transition-colors",children:["View All ",a.jsx(ed,{className:"w-4 h-4"})]})]}),t?i.length===0?a.jsxs(ee,{className:"text-center py-8",glow:!0,children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Rt,{className:"w-8 h-8 text-yellow-400"})}),a.jsx("p",{className:"text-gray-400",children:"You haven't joined any contests yet"}),a.jsx(Ae,{to:"/tournaments",className:"text-primary-400 text-sm mt-2 inline-block hover:text-primary-300",children:"Join a tournament "})]}):a.jsx("div",{className:"space-y-3",children:i.slice(0,3).map((f,p)=>a.jsx(Ae,{to:`/tournament/${f.id}`,children:a.jsxs(ee,{className:"flex items-center gap-3 hover:border-primary-500/30 transition-all duration-300",glow:!0,style:{animationDelay:`${p*100}ms`},children:[a.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-dark-200 flex-shrink-0 ring-2 ring-white/10",children:f.gameImage?a.jsx("img",{src:f.gameImage,alt:f.gameName,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-700 to-gray-800",children:a.jsx(qr,{className:"w-6 h-6 text-gray-500"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-white truncate",children:f.name}),a.jsx(so,{status:f.status})]}),a.jsx("p",{className:"text-sm text-gray-400",children:f.gameName}),a.jsx("p",{className:"text-xs text-gray-500",children:qs(f.startDateTime)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-green-400 font-bold text-lg prize-glow",children:K(f.prizePool)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prize Pool"})]})]})},f.id))}):a.jsxs(ee,{className:"text-center py-8",glow:!0,children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Da,{className:"w-8 h-8 text-blue-400"})}),a.jsx("p",{className:"text-gray-400",children:"Login to see your contests"}),a.jsx(Ae,{to:"/login",className:"text-primary-400 text-sm mt-2 inline-block hover:text-primary-300",children:"Login now "})]})]}),a.jsxs("section",{className:"animate-fade-in",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[a.jsx(qr,{className:"w-5 h-5 text-purple-400"}),"Games"]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:r.map((f,p)=>a.jsx(Ae,{to:`/game/${f.id}`,className:"group w-full",style:{animationDelay:`${p*50}ms`},children:a.jsxs("div",{className:"bg-dark-400 rounded-2xl p-4 flex flex-col items-center gap-3 border border-transparent group-hover:border-primary-500/30 transition-all duration-300 group-active:scale-95 shadow-lg shadow-black/20",children:[a.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden bg-dark-300 relative shadow-inner",children:f.image?a.jsx("img",{src:f.image,alt:f.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-700 to-gray-800",children:a.jsx(qr,{className:"w-8 h-8 text-gray-600"})})}),a.jsx("span",{className:"text-sm font-medium text-gray-200 text-center truncate w-full group-hover:text-white transition-colors",children:f.name})]})},f.id))})]})]})})}function de({children:t,variant:e="primary",size:n="md",disabled:r=!1,loading:s=!1,icon:i,onClick:o,type:c="button",className:u="",fullWidth:d=!1,glow:m=!1}){const f={primary:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg shadow-blue-500/25",secondary:"bg-dark-200/80 hover:bg-dark-100 text-gray-300 backdrop-blur-sm",danger:"bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700 text-white shadow-lg shadow-red-500/25",success:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg shadow-green-500/25",warning:"bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white shadow-lg shadow-yellow-500/25",ghost:"bg-transparent hover:bg-white/5 text-gray-300",outline:"bg-transparent border border-blue-500/50 text-blue-400 hover:bg-blue-500/10 hover:border-blue-400"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"};return a.jsxs("button",{type:c,onClick:o,disabled:r||s,className:`
        ${f[e]} 
        ${p[n]} 
        ${d?"w-full":""}
        ${m?"animate-glow":""}
        rounded-xl font-medium transition-all duration-300
        flex items-center justify-center gap-2
        disabled:opacity-50 disabled:cursor-not-allowed
        active:scale-95 btn-glow ripple
        ${u}
      `,children:[s?a.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):i?a.jsx(i,{className:"w-5 h-5"}):null,t]})}function ot({label:t,type:e="text",name:n,value:r,onChange:s,placeholder:i,required:o=!1,disabled:c=!1,error:u,icon:d,className:m=""}){return a.jsxs("div",{className:`mb-4 ${m}`,children:[t&&a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:[t,o&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[d&&a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:a.jsx(d,{className:"w-5 h-5 text-gray-500"})}),a.jsx("input",{type:e,name:n,value:r,onChange:s,placeholder:i,required:o,disabled:c,className:`
            w-full px-4 py-3 rounded-xl
            bg-dark-300 border border-dark-200
            text-white placeholder-gray-500
            focus:border-primary-500 focus:ring-1 focus:ring-primary-500
            transition-colors duration-200
            disabled:opacity-50 disabled:cursor-not-allowed
            ${d?"pl-11":""}
            ${u?"border-red-500":""}
          `})]}),u&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:u})]})}const c5=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u5=()=>typeof window>"u"||c5()?!1:"Notification"in window&&"serviceWorker"in navigator;function d5(){const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(!1),[o,c]=P.useState(""),[u,d]=P.useState(!1),[m,f]=P.useState(!1),[p,y]=P.useState(!1),[N,b]=P.useState("default"),{login:C}=Ze(),w=kt();P.useEffect(()=>{if(!u5()){console.log("Notifications not supported on this device");return}if(b(Notification.permission),Notification.permission!=="default"){console.log("Notification permission already:",Notification.permission);return}if(sessionStorage.getItem("notification_permission_asked")){console.log("Already asked for notification permission in this session");return}const v=setTimeout(()=>{y(!0)},1500);return()=>clearTimeout(v)},[]);const E=async()=>{try{sessionStorage.setItem("notification_permission_asked","true");const M=await Notification.requestPermission();if(console.log("Notification permission result:",M),b(M),M==="granted"&&(new Notification("Notifications Enabled! ",{body:"You will now receive updates about tournaments and winnings.",icon:"/logo.jpeg"}),"serviceWorker"in navigator))try{await navigator.serviceWorker.register("/firebase-messaging-sw.js"),console.log("Firebase Messaging SW registered for push notifications")}catch(v){console.warn("SW registration failed:",v)}y(!1)}catch(M){console.error("Error requesting notification permission:",M),y(!1)}},T=()=>{sessionStorage.setItem("notification_permission_asked","true"),y(!1)};P.useEffect(()=>{if(!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"))){const v=setTimeout(()=>{p||f(!0)},3e3);return()=>clearTimeout(v)}},[p]);const A=()=>{f(!1)},L=async M=>{M.preventDefault(),c(""),d(!0);try{await C(t,n),w("/")}catch(v){const x=v.code||"";let I="Failed to login. Please try again.";x==="auth/invalid-credential"||x==="auth/wrong-password"?I="Incorrect email or password. Please try again.":x==="auth/user-not-found"?I="No account found with this email. Please sign up.":x==="auth/invalid-email"?I="Please enter a valid email address.":x==="auth/user-disabled"?I="This account has been disabled. Contact support.":x==="auth/too-many-requests"?I="Too many failed attempts. Please try again later.":x==="auth/network-request-failed"&&(I="Network error. Please check your internet connection."),c(I)}finally{d(!1)}};return a.jsxs("div",{className:"min-h-screen bg-dark-500 flex flex-col",children:[a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:a.jsxs("div",{className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/logo.jpeg",alt:"Last Zone Legends",className:"w-20 h-20 rounded-3xl mx-auto mb-4 object-cover"}),a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Sign in to continue"})]}),o&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-xl",children:a.jsx("p",{className:"text-red-400 text-sm text-center",children:o})}),a.jsxs("form",{onSubmit:L,children:[a.jsx(ot,{label:"Email",type:"email",value:t,onChange:M=>e(M.target.value),placeholder:"Enter your email",icon:$i,required:!0}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Mf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{type:s?"text":"password",value:n,onChange:M=>r(M.target.value),placeholder:"Enter your password",required:!0,className:"w-full pl-11 pr-11 py-3 rounded-xl bg-dark-300 border border-dark-200 text-white placeholder-gray-500 focus:border-primary-500"}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:s?a.jsx(Up,{className:"w-5 h-5"}):a.jsx(Fp,{className:"w-5 h-5"})})]})]}),a.jsx(Ae,{to:"/forgot-password",className:"text-primary-400 text-sm block text-right mb-6",children:"Forgot Password?"}),a.jsx(de,{type:"submit",loading:u,fullWidth:!0,size:"lg",children:"Sign In"})]}),a.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Don't have an account?"," ",a.jsx(Ae,{to:"/register",className:"text-primary-400 font-medium",children:"Sign Up"})]})]})}),p&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:T}),a.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-dark-400 to-dark-500 rounded-2xl border border-primary-500/30 shadow-2xl shadow-primary-500/20 animate-slide-up overflow-hidden",children:[a.jsx("button",{onClick:T,className:"absolute top-3 right-3 p-1.5 rounded-full bg-dark-300 hover:bg-dark-200 transition-colors z-10",children:a.jsx(Oa,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/30 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-purple-500/20 rounded-full blur-3xl"}),a.jsxs("div",{className:"relative p-6",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-primary-500/30 animate-pulse",children:a.jsx(Lp,{className:"w-8 h-8 text-white"})})}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Enable Notifications"}),a.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:"Get instant updates about tournaments, winnings, and exclusive offers!"}),a.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Tournaments"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Winnings"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Offers"})]})]}),a.jsxs(de,{fullWidth:!0,size:"lg",onClick:E,className:"bg-gradient-to-r from-primary-500 to-purple-600 hover:from-primary-600 hover:to-purple-700",children:[a.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Enable Notifications"]}),a.jsx("button",{onClick:T,className:"w-full text-center text-sm text-gray-500 hover:text-gray-400 mt-3 py-2",children:"Maybe Later"})]})]})]}),m&&!p&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:A}),a.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-dark-400 to-dark-500 rounded-2xl border border-primary-500/30 shadow-2xl shadow-primary-500/20 animate-slide-up overflow-hidden",children:[a.jsx("button",{onClick:A,className:"absolute top-3 right-3 p-1.5 rounded-full bg-dark-300 hover:bg-dark-200 transition-colors z-10",children:a.jsx(Oa,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/30 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-green-500/20 rounded-full blur-3xl"}),a.jsxs("div",{className:"relative p-6",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg shadow-green-500/30",children:a.jsx(jR,{className:"w-8 h-8 text-white"})})}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Download Our App"}),a.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:"Get the best experience with our Android app. Faster, smoother, and always accessible!"}),a.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:"Fast"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Loading"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"Easy"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Access"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"Free"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Forever"})]})]}),a.jsx("a",{href:"/LastZone.apk",download:"LastZone.apk",className:"block",onClick:()=>f(!1),children:a.jsx(de,{fullWidth:!0,size:"lg",icon:hc,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:"Download APK"})}),a.jsx("button",{onClick:A,className:"w-full text-center text-sm text-gray-500 hover:text-gray-400 mt-3 py-2",children:"Maybe Later"})]})]})]})]})}function h5(){const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,c]=P.useState(!1),{resetPassword:u}=Ze(),d=async m=>{m.preventDefault();try{i(""),r(""),c(!0),await u(t),i("Check your inbox for further instructions")}catch(f){console.error(f),r("Failed to reset password. Please check your email.")}finally{c(!1)}};return a.jsx("div",{className:"min-h-screen bg-dark-500 flex flex-col",children:a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:a.jsxs("div",{className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-primary-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx($i,{className:"w-8 h-8 text-primary-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reset Password"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Enter your email to receive reset instructions"})]}),n&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-xl",children:a.jsx("p",{className:"text-red-400 text-sm text-center",children:n})}),s&&a.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-xl",children:a.jsx("p",{className:"text-green-400 text-sm text-center",children:s})}),a.jsxs("form",{onSubmit:d,children:[a.jsx(ot,{label:"Email",type:"email",value:t,onChange:m=>e(m.target.value),placeholder:"Enter your email",icon:$i,required:!0}),a.jsx(de,{type:"submit",loading:o,fullWidth:!0,size:"lg",className:"mt-6",children:"Reset Password"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(Ae,{to:"/login",className:"text-gray-400 hover:text-white flex items-center justify-center gap-2 text-sm transition-colors",children:[a.jsx(qt,{className:"w-4 h-4"})," Back to Login"]})})]})})})}const f5=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,m5=()=>typeof window>"u"||f5()?!1:"Notification"in window&&"serviceWorker"in navigator;function p5(){const[t,e]=P.useState({displayName:"",email:"",password:"",confirmPassword:"",referralCode:""}),[n,r]=P.useState(!1),[s,i]=P.useState(""),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[m,f]=P.useState("default"),{register:p}=Ze(),y=kt();P.useEffect(()=>{if(!m5()){console.log("Notifications not supported on this device");return}if(f(Notification.permission),Notification.permission!=="default"){console.log("Notification permission already:",Notification.permission);return}if(sessionStorage.getItem("notification_permission_asked")){console.log("Already asked for notification permission in this session");return}const E=setTimeout(()=>{d(!0)},1500);return()=>clearTimeout(E)},[]);const N=async()=>{try{sessionStorage.setItem("notification_permission_asked","true");const w=await Notification.requestPermission();if(console.log("Notification permission result:",w),f(w),w==="granted"&&(new Notification("Notifications Enabled! ",{body:"You will now receive updates about tournaments and winnings.",icon:"/logo.jpeg"}),"serviceWorker"in navigator))try{await navigator.serviceWorker.register("/firebase-messaging-sw.js"),console.log("Firebase Messaging SW registered for push notifications")}catch(E){console.warn("SW registration failed:",E)}d(!1)}catch(w){console.error("Error requesting notification permission:",w),d(!1)}},b=()=>{sessionStorage.setItem("notification_permission_asked","true"),d(!1)},C=async w=>{if(w.preventDefault(),i(""),t.password!==t.confirmPassword)return i("Passwords do not match");if(t.password.length<6)return i("Password must be at least 6 characters");c(!0);try{await p(t.email,t.password,t.displayName,t.referralCode),y("/")}catch(E){const T=E.code||"";let A="Failed to create account. Please try again.";T==="auth/email-already-in-use"?A="This email is already registered. Please login instead.":T==="auth/invalid-email"?A="Please enter a valid email address.":T==="auth/weak-password"?A="Password is too weak. Use at least 6 characters.":T==="auth/operation-not-allowed"?A="Registration is currently disabled. Try again later.":T==="auth/network-request-failed"&&(A="Network error. Please check your internet connection."),i(A)}finally{c(!1)}};return a.jsxs("div",{className:"min-h-screen bg-dark-500 flex flex-col",children:[a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:a.jsxs("div",{className:"w-full max-w-sm",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/logo.jpeg",alt:"Last Zone Legends",className:"w-20 h-20 rounded-3xl mx-auto mb-4 object-cover"}),a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Create Account"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Join Last Zone Legends"})]}),s&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-xl",children:a.jsx("p",{className:"text-red-400 text-sm text-center",children:s})}),a.jsxs("form",{onSubmit:C,children:[a.jsx(ot,{label:"Display Name",value:t.displayName,onChange:w=>e({...t,displayName:w.target.value}),placeholder:"Enter your name",icon:Da,required:!0}),a.jsx(ot,{label:"Email",type:"email",value:t.email,onChange:w=>e({...t,email:w.target.value}),placeholder:"Enter your email",icon:$i,required:!0}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Mf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{type:n?"text":"password",value:t.password,onChange:w=>e({...t,password:w.target.value}),placeholder:"Create password",required:!0,className:"w-full pl-11 pr-11 py-3 rounded-xl bg-dark-300 border border-dark-200 text-white placeholder-gray-500 focus:border-primary-500"}),a.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:n?a.jsx(Up,{className:"w-5 h-5"}):a.jsx(Fp,{className:"w-5 h-5"})})]})]}),a.jsx(ot,{label:"Confirm Password",type:"password",value:t.confirmPassword,onChange:w=>e({...t,confirmPassword:w.target.value}),placeholder:"Confirm password",icon:Mf,required:!0}),a.jsx(ot,{label:"Referral Code (Optional)",value:t.referralCode,onChange:w=>e({...t,referralCode:w.target.value.toUpperCase()}),placeholder:"Enter referral code",icon:Ls}),a.jsx(de,{type:"submit",loading:o,fullWidth:!0,size:"lg",className:"mt-2",children:"Create Account"})]}),a.jsxs("p",{className:"text-center text-gray-400 mt-6",children:["Already have an account?"," ",a.jsx(Ae,{to:"/login",className:"text-primary-400 font-medium",children:"Sign In"})]})]})}),u&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center p-4 sm:items-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:b}),a.jsxs("div",{className:"relative w-full max-w-sm bg-gradient-to-br from-dark-400 to-dark-500 rounded-2xl border border-primary-500/30 shadow-2xl shadow-primary-500/20 animate-slide-up overflow-hidden",children:[a.jsx("button",{onClick:b,className:"absolute top-3 right-3 p-1.5 rounded-full bg-dark-300 hover:bg-dark-200 transition-colors z-10",children:a.jsx(Oa,{className:"w-4 h-4 text-gray-400"})}),a.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-primary-500/30 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-purple-500/20 rounded-full blur-3xl"}),a.jsxs("div",{className:"relative p-6",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-primary-500/30 animate-pulse",children:a.jsx(Lp,{className:"w-8 h-8 text-white"})})}),a.jsx("h3",{className:"text-xl font-bold text-white text-center mb-2",children:"Enable Notifications"}),a.jsx("p",{className:"text-gray-400 text-sm text-center mb-6",children:"Get instant updates about tournaments, winnings, and exclusive offers!"}),a.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Tournaments"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Winnings"})]}),a.jsx("div",{className:"w-px bg-dark-200"}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:""}),a.jsx("div",{className:"text-xs text-gray-500",children:"Offers"})]})]}),a.jsxs(de,{fullWidth:!0,size:"lg",onClick:N,className:"bg-gradient-to-r from-primary-500 to-purple-600 hover:from-primary-600 hover:to-purple-700",children:[a.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Enable Notifications"]}),a.jsx("button",{onClick:b,className:"w-full text-center text-sm text-gray-500 hover:text-gray-400 mt-3 py-2",children:"Maybe Later"})]})]})]})]})}function zp({tabs:t,activeTab:e,onChange:n,className:r=""}){return a.jsx("div",{className:`flex flex-wrap gap-2 ${r}`,children:t.map(s=>a.jsx("button",{onClick:()=>n(s.value),className:`
            px-3 py-1.5 rounded-full text-xs font-medium transition-all
            ${e===s.value?"bg-primary-600 text-white":"bg-dark-300 text-gray-400 hover:text-white"}
          `,children:s.label},s.value))})}function es({icon:t=NR,title:e="No data found",description:n="",action:r}){return a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[a.jsx("div",{className:"w-16 h-16 bg-dark-300 rounded-full flex items-center justify-center mb-4",children:a.jsx(t,{className:"w-8 h-8 text-gray-500"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-1",children:e}),n&&a.jsx("p",{className:"text-gray-500 text-sm text-center max-w-sm",children:n}),r&&a.jsx("div",{className:"mt-4",children:r})]})}function g5(){const[t,e]=P.useState([]),[n,r]=P.useState(!0),[s,i]=P.useState("all");P.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await Ft(At(Be(se,"tournaments"),Wt("startDateTime","asc")));e(d.docs.map(m=>({id:m.id,...m.data()})))}catch(d){console.error("Error fetching tournaments:",d)}finally{r(!1)}},c=[{value:"all",label:"All"},{value:"upcoming",label:"Upcoming"},{value:"live",label:"Live"},{value:"finished",label:"Finished"}],u=s==="all"?t:t.filter(d=>d.status===s);return n?a.jsx(le,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{text:"Loading tournaments..."})})}):a.jsx(le,{children:a.jsxs("div",{className:"px-4 py-4",children:[a.jsx("h1",{className:"text-xl font-bold text-white mb-4",children:"Tournaments"}),a.jsx(zp,{tabs:c,activeTab:s,onChange:i,className:"mb-4"}),u.length===0?a.jsx(es,{icon:Rt,title:"No tournaments found",description:`No ${s==="all"?"":s} tournaments available`}):a.jsx("div",{className:"space-y-3",children:u.map(d=>a.jsx(Ae,{to:`/tournament/${d.id}`,children:a.jsxs(ee,{className:"flex gap-3",children:[a.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-dark-200 flex-shrink-0",children:d.gameImage?a.jsx("img",{src:d.gameImage,alt:d.gameName,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(qr,{className:"w-8 h-8 text-gray-600"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white truncate",children:d.name}),a.jsx("p",{className:"text-sm text-gray-400",children:d.gameName})]}),a.jsx(so,{status:d.status})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[d.matchType&&a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${d.matchType==="squad"?"bg-purple-500/20 text-purple-400":d.matchType==="duo"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:d.matchType}),d.map&&a.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-500/20 text-orange-400",children:d.map})]}),a.jsx("div",{className:"flex items-center gap-4 mt-1.5 text-sm",children:a.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[a.jsx(td,{className:"w-4 h-4"}),a.jsx("span",{children:qs(d.startDateTime)})]})}),a.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["Entry: ",a.jsx("span",{className:"text-white",children:K(d.entryFee)})]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[a.jsx(Wi,{className:"w-3 h-3 inline mr-1"}),d.participantCount||0,"/",d.maxPlayers||""]})]}),a.jsx("span",{className:"text-green-400 font-semibold",children:K(d.prizePool)})]})]})]})},d.id))})]})})}function Ns({isOpen:t,onClose:e,title:n,children:r}){return P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-dark-400 rounded-t-3xl sm:rounded-2xl w-full sm:max-w-lg max-h-[75vh] mb-20 sm:mb-0 overflow-hidden animate-slide-up",children:[a.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-dark-200 bg-dark-400",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:n}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-dark-200 rounded-full transition-colors",children:a.jsx(Oa,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"p-4 pb-6 overflow-y-auto max-h-[calc(75vh-70px)]",children:r})]})]}):null}function y5(){var el,tl,os;const{id:t}=t_(),e=kt(),{currentUser:n,userData:r,refreshUserData:s}=Ze(),[i,o]=P.useState(null),[c,u]=P.useState(!0),[d,m]=P.useState(!1),[f,p]=P.useState(!1),[y,N]=P.useState(!1),[b,C]=P.useState({roomId:!1,password:!1}),[w,E]=P.useState("details"),[T,A]=P.useState({open:!1,message:""}),[L,M]=P.useState(1),[v,x]=P.useState([]),[I,S]=P.useState({}),j={solo:{size:1,positions:["A"]},duo:{size:2,positions:["A","B"]},squad:{size:4,positions:["A","B","C","D"]}},R=(i==null?void 0:i.matchType)||"solo",k=((el=j[R])==null?void 0:el.size)||1,mt=((tl=j[R])==null?void 0:tl.positions)||["A"],Fn=i!=null&&i.maxPlayers?Math.ceil(i.maxPlayers/k):100,Bn=P.useMemo(()=>{if(!(i!=null&&i.participantDetails))return{};const B={};return i.participantDetails.forEach(q=>{q.slotNumber&&(B[q.slotNumber]||(B[q.slotNumber]={}),B[q.slotNumber][q.position]=q)}),B},[i==null?void 0:i.participantDetails]),Mt=P.useMemo(()=>{if(!(i!=null&&i.participantDetails))return[];const B={};return i.participantDetails.forEach(q=>{const ve=q.slotNumber||0;B[ve]||(B[ve]={slotNumber:ve,members:[]}),B[ve].members.push(q)}),Object.values(B).sort((q,ve)=>q.slotNumber-ve.slotNumber)},[i==null?void 0:i.participantDetails]),$=P.useMemo(()=>!n||!(i!=null&&i.participantDetails)?[]:i.participantDetails.filter(B=>B.odeuUserId===n.uid).map(B=>({slot:B.slotNumber,position:B.position})),[i==null?void 0:i.participantDetails,n]),X=$.length>0;P.useEffect(()=>{te()},[t]);const te=async()=>{try{const B=await Zr(ut(se,"tournaments",t));B.exists()&&o({id:B.id,...B.data()})}catch(B){console.error("Error fetching tournament:",B)}finally{u(!1)}},Te=()=>{if(!n){e("/login");return}M(1),x([]),S({}),p(!0)},ue=k,Pe=(B,q)=>{const ve=`${B}-${q}`;if(v.find(Ke=>Ke.slot===B&&Ke.position===q)){x(v.filter(Qe=>!(Qe.slot===B&&Qe.position===q)));const Ke={...I};delete Ke[ve],S(Ke)}else{if(v.length>=ue){A({open:!0,message:`You can only select up to ${ue} position${ue>1?"s":""} in a ${R.toUpperCase()} match.`});return}x([...v,{slot:B,position:q}]),S({...I,[ve]:""})}},cn=(B,q)=>v.some(ve=>ve.slot===B&&ve.position===q),un=()=>{if(v.length===0){A({open:!0,message:"Please select at least one position."});return}M(2)},dn=async()=>{var q,ve;for(const Le of v){const Ke=`${Le.slot}-${Le.position}`;if(!((q=I[Ke])!=null&&q.trim())){A({open:!0,message:`Please enter Game ID for Slot ${Le.slot} - Position ${Le.position}`});return}}for(const Le of v){const Ke=`${Le.slot}-${Le.position}`;if((ve=i.participantDetails)==null?void 0:ve.some(io=>{var nl;return((nl=io.odeuGameId)==null?void 0:nl.toLowerCase())===I[Ke].trim().toLowerCase()})){A({open:!0,message:`Game ID "${I[Ke]}" is already registered in this tournament.`});return}}const B=i.entryFee*v.length;if(r.walletBalance<B){A({open:!0,message:`Insufficient balance. You need ${K(B)} but have ${K(r.walletBalance)}`});return}m(!0);try{const Le=v.map(Qe=>{const io=`${Qe.slot}-${Qe.position}`;return{odeuId:crypto.randomUUID(),odeuUserId:n.uid,odeuName:r.displayName||"Unknown",odeuEmail:r.email||"",odeuGameId:I[io].trim(),slotNumber:Qe.slot,position:Qe.position,odeuJoinedAt:new Date().toISOString()}});for(const Qe of Le)await Ms(ut(se,"tournaments",t),{participantDetails:Op(Qe),participantCount:Xn(1)});await Ms(ut(se,"users",n.uid),{walletBalance:Xn(-B),depositedBalance:Xn(-B),matchesPlayed:Xn(1)});const Ke=v.map(Qe=>`${Qe.slot}${Qe.position}`).join(", ");await zi(Be(se,"transactions"),{userId:n.uid,userName:r.displayName,userEmail:r.email,type:"entry_fee",amount:B,description:`Entry fee for ${i.name} - Positions: ${Ke}`,status:"completed",tournamentId:t,positions:v,createdAt:On()}),await s(),await te(),p(!1),M(1),x([]),S({})}catch(Le){console.error("Error joining tournament:",Le),alert("Failed to join tournament")}finally{m(!1)}},tn=(B,q)=>{navigator.clipboard.writeText(B),C({...b,[q]:!0}),setTimeout(()=>C({...b,[q]:!1}),2e3)};return c?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):i?(Object.keys(Bn).filter(B=>{const q=Bn[B];return Object.keys(q).length===k}).length,a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"font-semibold text-white truncate",children:i.name}),a.jsx("p",{className:"text-xs text-gray-400",children:i.gameName})]}),a.jsx(so,{status:i.status})]})}),a.jsx("div",{className:"pb-24",children:a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[i.gameImage&&a.jsxs("div",{className:"relative h-40 rounded-2xl overflow-hidden",children:[a.jsx("img",{src:i.gameImage,alt:i.gameName,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-500 via-transparent to-transparent"}),a.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${R==="squad"?"bg-purple-500":R==="duo"?"bg-blue-500":"bg-green-500"}`,children:R}),i.map&&a.jsx("span",{className:"px-2 py-1 bg-orange-500 rounded text-xs font-bold",children:i.map})]})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs(ee,{className:"text-center bg-dark-400",children:[a.jsx(ro,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),a.jsx("p",{className:"text-lg font-bold text-white",children:K(i.entryFee)}),a.jsx("p",{className:"text-xs text-gray-400",children:"Per Player"})]}),a.jsxs(ee,{className:"text-center bg-dark-400",children:[a.jsx(Rt,{className:"w-5 h-5 text-green-400 mx-auto mb-1"}),a.jsx("p",{className:"text-lg font-bold text-green-400",children:K(i.prizePool)}),a.jsx("p",{className:"text-xs text-gray-400",children:"Prize Pool"})]}),a.jsxs(ee,{className:"text-center bg-dark-400",children:[a.jsx(Wi,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),a.jsxs("p",{className:"text-lg font-bold text-white",children:[i.participantCount||0,"/",i.maxPlayers||""]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Players"})]})]}),a.jsxs(ee,{className:"flex items-center gap-3 bg-dark-400",children:[a.jsx(td,{className:"w-5 h-5 text-primary-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Starts at"}),a.jsx("p",{className:"text-white font-medium",children:qs(i.startDateTime)})]})]}),a.jsxs("div",{className:"flex bg-dark-400 rounded-xl p-1",children:[a.jsx("button",{onClick:()=>E("details"),className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all ${w==="details"?"bg-primary-500 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Details"}),a.jsx("button",{onClick:()=>E("participants"),className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all ${w==="participants"?"bg-primary-500 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Teams"}),a.jsx("button",{onClick:()=>E("prizes"),className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-medium transition-all ${w==="prizes"?"bg-primary-500 text-white shadow-lg":"text-gray-400 hover:text-white"}`,children:"Prizes"})]}),a.jsxs("div",{children:[w==="details"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[X&&i.showRoomDetails&&(i.roomId||i.roomPassword)&&a.jsxs(ee,{className:"bg-dark-400",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-white",children:"Room Details"}),a.jsx("button",{onClick:()=>N(!y),className:"p-2 hover:bg-dark-300 rounded-lg",children:y?a.jsx(Up,{className:"w-4 h-4 text-gray-400"}):a.jsx(Fp,{className:"w-4 h-4 text-gray-400"})})]}),y?a.jsxs("div",{className:"space-y-3",children:[i.roomId&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-300 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Room ID"}),a.jsx("p",{className:"text-white font-mono",children:i.roomId})]}),a.jsx("button",{onClick:()=>tn(i.roomId,"roomId"),className:"p-2 hover:bg-dark-200 rounded-lg",children:b.roomId?a.jsx(dc,{className:"w-4 h-4 text-green-400"}):a.jsx(Of,{className:"w-4 h-4 text-gray-400"})})]}),i.roomPassword&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-300 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Password"}),a.jsx("p",{className:"text-white font-mono",children:i.roomPassword})]}),a.jsx("button",{onClick:()=>tn(i.roomPassword,"password"),className:"p-2 hover:bg-dark-200 rounded-lg",children:b.password?a.jsx(dc,{className:"w-4 h-4 text-green-400"}):a.jsx(Of,{className:"w-4 h-4 text-gray-400"})})]})]}):a.jsx("p",{className:"text-gray-400 text-sm",children:"Tap the eye icon to reveal room details"})]}),$.length>0&&a.jsxs(ee,{className:"bg-green-500/10 border border-green-500/30",children:[a.jsx("h3",{className:"font-semibold text-green-400 mb-2",children:"Your Bookings"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:$.map((B,q)=>a.jsxs("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:["Slot ",B.slot," - ",B.position]},q))})]}),i.map&&a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx(qr,{className:"w-5 h-5 text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Map"}),a.jsx("p",{className:"text-white font-medium",children:i.map})]})]})}),((os=i.tags)==null?void 0:os.length)>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((B,q)=>a.jsx("span",{className:"px-3 py-1 bg-dark-300 rounded-full text-xs text-gray-300",children:B},q))}),i.description&&a.jsxs(ee,{className:"bg-dark-400",children:[a.jsx("h3",{className:"font-semibold text-white mb-2",children:"Description"}),a.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-line",children:i.description})]}),i.rules&&a.jsxs(ee,{className:"bg-dark-400",children:[a.jsx("h3",{className:"font-semibold text-white mb-2",children:"Rules"}),a.jsx("p",{className:"text-gray-400 text-sm whitespace-pre-line",children:i.rules})]})]}),w==="participants"&&a.jsx("div",{className:"space-y-3 animate-fade-in",children:Mt.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Wi,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-400",children:R==="solo"?"No players yet":"No teams yet"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Be the first to join!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:R==="solo"?`${(i==null?void 0:i.participantCount)||0} player${((i==null?void 0:i.participantCount)||0)!==1?"s":""} registered`:`${Mt.length} team${Mt.length>1?"s":""} registered`}),Mt.map(B=>a.jsxs(ee,{className:"bg-dark-400",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-primary-400",children:R==="solo"?`#${B.slotNumber}`:`Slot #${B.slotNumber}`}),R!=="solo"&&a.jsxs("span",{className:"text-xs text-gray-500",children:[B.members.length,"/",k," players"]})]}),a.jsxs("div",{className:"space-y-2",children:[B.members.sort((q,ve)=>(q.position||"Z").localeCompare(ve.position||"Z")).map(q=>a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-300 rounded-lg",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${q.position==="A"?"bg-yellow-500/20 text-yellow-400":q.position==="B"?"bg-blue-500/20 text-blue-400":q.position==="C"?"bg-green-500/20 text-green-400":q.position==="D"?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"}`,children:R==="solo"?B.slotNumber:q.position||"-"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white text-sm truncate",children:q.odeuName}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.odeuGameId})]}),q.odeuUserId===(n==null?void 0:n.uid)&&a.jsx("span",{className:"text-xs text-green-400 px-2 py-0.5 bg-green-500/20 rounded",children:"You"})]},q.odeuId)),R!=="solo"&&mt.filter(q=>!B.members.find(ve=>ve.position===q)).map(q=>a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-dark-300/50 rounded-lg border border-dashed border-dark-200",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-dark-200 flex items-center justify-center text-xs font-bold text-gray-500",children:q}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Position Available"})]},q))]})]},B.slotNumber))]})}),w==="prizes"&&a.jsx("div",{className:"space-y-4 animate-fade-in",children:a.jsxs(ee,{className:"bg-dark-400",children:[a.jsx("h3",{className:"font-semibold text-white mb-4",children:"Prize Distribution"}),a.jsxs("div",{className:"space-y-3",children:[i.prize1>0&&a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-yellow-500/20 to-transparent rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-500/30 rounded-full flex items-center justify-center",children:a.jsx(uc,{className:"w-5 h-5 text-yellow-400"})}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-yellow-400 font-semibold",children:"1st Place"})}),a.jsx("p",{className:"text-yellow-400 font-bold",children:K(i.prize1)})]}),i.prize2>0&&a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-gray-400/20 to-transparent rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-400/30 rounded-full flex items-center justify-center",children:a.jsx(uc,{className:"w-5 h-5 text-gray-300"})}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-gray-300 font-semibold",children:"2nd Place"})}),a.jsx("p",{className:"text-gray-300 font-bold",children:K(i.prize2)})]}),i.prize3>0&&a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-orange-500/20 to-transparent rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-500/30 rounded-full flex items-center justify-center",children:a.jsx(uc,{className:"w-5 h-5 text-orange-400"})}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-orange-400 font-semibold",children:"3rd Place"})}),a.jsx("p",{className:"text-orange-400 font-bold",children:K(i.prize3)})]}),i.perKillPrize>0&&a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-red-500/20 to-transparent rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-red-500/30 rounded-full flex items-center justify-center",children:a.jsx(wR,{className:"w-5 h-5 text-red-400"})}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-red-400 font-semibold",children:"Per Kill"})}),a.jsx("p",{className:"text-red-400 font-bold",children:K(i.perKillPrize)})]})]})]})})]})]})}),i.status!=="finished"&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-dark-500 border-t border-dark-300 safe-bottom",children:X?a.jsx(de,{fullWidth:!0,size:"lg",disabled:!0,variant:"secondary",children:"Already Joined "}):(i.participantCount||0)>=(i.maxPlayers||1/0)?a.jsxs(de,{fullWidth:!0,size:"lg",disabled:!0,variant:"secondary",children:["Tournament Full (",i.participantCount||0,"/",i.maxPlayers||""," Players)"]}):a.jsxs(de,{fullWidth:!0,size:"lg",onClick:Te,children:["Join Tournament - ",K(i.entryFee),"/player"]})}),a.jsx(Ns,{isOpen:f&&L===1,onClose:()=>p(!1),title:"Select Your Positions",size:"lg",children:a.jsxs("div",{className:"py-2",children:[a.jsxs("div",{className:"mb-4 p-3 bg-primary-500/10 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-primary-400",children:[a.jsx("span",{className:"font-bold",children:R.toUpperCase()})," Tournament",a.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(Max ",ue," position",ue>1?"s":"",")"]})]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Click on empty positions to select. Entry Fee: ",a.jsx("span",{className:"text-white font-bold",children:K(i.entryFee)})," per position"]})]}),a.jsxs("div",{className:"bg-dark-400 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"grid gap-2 p-3 bg-dark-300 text-sm font-medium",style:{gridTemplateColumns:`60px repeat(${k}, 1fr)`},children:[a.jsx("div",{className:"text-gray-400",children:"Slot"}),mt.map(B=>a.jsx("div",{className:`text-center font-bold ${B==="A"?"text-yellow-400":B==="B"?"text-blue-400":B==="C"?"text-green-400":"text-purple-400"}`,children:B},B))]}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:Array.from({length:Fn},(B,q)=>q+1).map(B=>{const q=Bn[B]||{},ve=Object.keys(q).length===k;return a.jsxs("div",{className:`grid gap-2 p-3 border-b border-dark-300 ${ve?"bg-red-500/5":""}`,style:{gridTemplateColumns:`60px repeat(${k}, 1fr)`},children:[a.jsx("div",{className:`font-medium text-sm ${ve?"text-red-400":"text-white"}`,children:B}),mt.map(Le=>{const Ke=q[Le],Qe=cn(B,Le);return Ke?a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-7 h-7 bg-red-500/30 rounded flex items-center justify-center",title:`Booked: ${Ke.odeuGameId}`,children:a.jsx(Da,{className:"w-4 h-4 text-red-400"})})},Le):a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>Pe(B,Le),className:`w-7 h-7 border-2 rounded flex items-center justify-center transition-all ${Qe?"border-green-500 bg-green-500/30":"border-gray-600 hover:border-primary-500 hover:bg-primary-500/10"}`,children:Qe&&a.jsx(dc,{className:"w-4 h-4 text-green-400"})})},Le)})]},B)})})]}),v.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Selected Positions"}),a.jsx("span",{className:"text-green-400 font-bold",children:v.length})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.sort((B,q)=>B.slot-q.slot||B.position.localeCompare(q.position)).map(B=>a.jsxs("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-xs",children:[B.slot,B.position]},`${B.slot}-${B.position}`))}),a.jsxs("div",{className:"flex justify-between border-t border-green-500/30 pt-2 mt-2",children:[a.jsx("span",{className:"text-gray-400",children:"Total Cost"}),a.jsx("span",{className:"text-green-400 font-bold text-lg",children:K(i.entryFee*v.length)})]})]}),a.jsxs(de,{fullWidth:!0,size:"lg",className:"mt-4",onClick:un,disabled:v.length===0,children:["Next - Enter Game IDs (",v.length,") ",a.jsx(ed,{className:"w-4 h-4 ml-1"})]})]})}),a.jsx(Ns,{isOpen:f&&L===2,onClose:()=>p(!1),title:"Enter Player Details",children:a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{onClick:()=>M(1),className:"flex items-center gap-1 text-gray-400 hover:text-white mb-4",children:[a.jsx(qt,{className:"w-4 h-4"})," Back to position selection"]}),a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:v.sort((B,q)=>B.slot-q.slot||B.position.localeCompare(q.position)).map(B=>{const q=`${B.slot}-${B.position}`;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[a.jsxs("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-2 ${B.position==="A"?"bg-yellow-500/20 text-yellow-400":B.position==="B"?"bg-blue-500/20 text-blue-400":B.position==="C"?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:["Slot ",B.slot," - ",B.position]}),"Game Username ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",value:I[q]||"",onChange:ve=>S({...I,[q]:ve.target.value}),placeholder:`Enter ${i.gameName||"Game"} Username`,className:"w-full px-4 py-3 bg-dark-300 border border-dark-200 rounded-xl text-white placeholder-gray-500 focus:border-primary-500 focus:outline-none"})]},q)})}),a.jsx("p",{className:"text-xs text-yellow-400/80 mt-3 px-1",children:" Note: Make sure you enter your Game Username (IGN) and not Character ID."}),a.jsxs("div",{className:"mt-6 p-4 bg-dark-300 rounded-xl",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Positions"}),a.jsx("span",{className:"text-white font-semibold",children:v.length})]}),a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Per Position"}),a.jsx("span",{className:"text-white",children:K(i.entryFee)})]}),a.jsx("div",{className:"border-t border-dark-200 my-2 pt-2",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-white font-semibold",children:"Total"}),a.jsx("span",{className:"text-green-400 font-bold text-lg",children:K(i.entryFee*v.length)})]})}),a.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Your Balance"}),a.jsx("span",{className:`font-semibold ${((r==null?void 0:r.walletBalance)||0)>=i.entryFee*v.length?"text-green-400":"text-red-400"}`,children:K((r==null?void 0:r.walletBalance)||0)})]})]}),((r==null?void 0:r.walletBalance)||0)<i.entryFee*v.length?a.jsx(de,{fullWidth:!0,size:"lg",className:"mt-4",onClick:()=>e("/wallet/add"),variant:"warning",children:"Add Money to Wallet"}):a.jsxs(de,{fullWidth:!0,size:"lg",className:"mt-4",onClick:dn,loading:d,children:["Confirm & Pay ",K(i.entryFee*v.length)]})]})}),a.jsx(Ns,{isOpen:T.open,onClose:()=>A({open:!1,message:""}),title:"Error",size:"sm",children:a.jsxs("div",{className:"py-4 text-center",children:[a.jsx(Mp,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:T.message}),a.jsx(de,{fullWidth:!0,className:"mt-4",onClick:()=>A({open:!1,message:""}),children:"OK"})]})})]})):a.jsx(le,{hideNav:!0,children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[a.jsx(Rt,{className:"w-16 h-16 text-gray-600 mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Tournament not found"}),a.jsx(de,{onClick:()=>e(-1),className:"mt-4",children:"Go Back"})]})})}function v5(){const{id:t}=t_(),e=kt(),[n,r]=P.useState(null),[s,i]=P.useState([]),[o,c]=P.useState(!0),[u,d]=P.useState("all"),m=[{value:"all",label:"All"},{value:"upcoming",label:"Upcoming"},{value:"live",label:"Live"},{value:"finished",label:"Finished"}],f=u==="all"?s:s.filter(y=>y.status===u);P.useEffect(()=>{p()},[t]);const p=async()=>{try{const[y,N]=await Promise.all([Zr(ut(se,"games",t)),Ft(At(Be(se,"tournaments"),Bi("gameId","==",t),Wt("startDateTime","asc")))]);y.exists()&&r({id:y.id,...y.data()}),i(N.docs.map(b=>({id:b.id,...b.data()})))}catch(y){console.error("Error fetching data:",y)}finally{c(!1)}};return o?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsxs("h1",{className:"font-semibold text-white",children:[(n==null?void 0:n.name)||"Game"," Tournaments"]})]})}),n&&a.jsxs("div",{className:"aspect-video bg-dark-300 relative",children:[n.image?a.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(qr,{className:"w-16 h-16 text-gray-600"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-500 to-transparent"}),a.jsxs("div",{className:"absolute bottom-4 left-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:n.name}),a.jsxs("p",{className:"text-gray-300",children:[s.length," tournaments available"]})]})]}),a.jsxs("div",{className:"px-4 py-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:m.map(y=>a.jsxs("button",{onClick:()=>d(y.value),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 ${u===y.value?"bg-gradient-to-r from-primary-500 to-purple-500 text-white shadow-lg shadow-primary-500/30":"bg-dark-400 text-gray-400 hover:text-white hover:bg-dark-300"}`,children:[y.label,y.value!=="all"&&a.jsx("span",{className:`ml-1 px-1 py-0.5 rounded-full text-xs ${u===y.value?"bg-white/20":"bg-dark-300"}`,children:s.filter(N=>N.status===y.value).length})]},y.value))}),f.length===0?a.jsx(es,{icon:Rt,title:u==="all"?"No tournaments":`No ${u} tournaments`,description:u==="all"?`No tournaments available for ${(n==null?void 0:n.name)||"this game"}`:`No ${u} tournaments for ${(n==null?void 0:n.name)||"this game"}`}):a.jsx("div",{className:"space-y-3.5",children:f.map(y=>a.jsx(Ae,{to:`/tournament/${y.id}`,className:"block",children:a.jsx(ee,{className:"flex gap-3",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-semibold text-white truncate",children:y.name}),a.jsx(so,{status:y.status})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[y.matchType&&a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${y.matchType==="squad"?"bg-purple-500/20 text-purple-400":y.matchType==="duo"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:y.matchType}),y.map&&a.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-orange-500/20 text-orange-400",children:y.map})]}),a.jsx("div",{className:"flex items-center gap-4 mt-2 text-sm",children:a.jsxs("div",{className:"flex items-center gap-1 text-gray-400",children:[a.jsx(td,{className:"w-4 h-4"}),a.jsx("span",{children:qs(y.startDateTime)})]})}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["Entry: ",a.jsx("span",{className:"text-white",children:K(y.entryFee)})]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[a.jsx(Wi,{className:"w-3 h-3 inline mr-1"}),y.participantCount||0,"/",y.maxPlayers||""]})]}),a.jsx("span",{className:"text-green-400 font-semibold",children:K(y.prizePool)})]})]})})},y.id))})]})]})}function x5(){const{currentUser:t,userData:e}=Ze(),[n,r]=P.useState([]),[s,i]=P.useState(!0);P.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{const d=await Ft(At(Be(se,"transactions"),Bi("userId","==",t.uid),Wt("createdAt","desc"),Ra(10)));r(d.docs.map(m=>({id:m.id,...m.data()})))}catch(d){console.error("Error fetching transactions:",d)}finally{i(!1)}},c=d=>["deposit","winning","bonus","manual_credit","refund"].includes(d),u=d=>c(d)?bE:Df;return s?a.jsx(le,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsx(le,{children:a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsxs(ee,{className:"bg-gradient-to-br from-primary-600 to-purple-600 text-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(ro,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70 text-sm",children:"Total Balance"}),a.jsx("p",{className:"text-3xl font-bold",children:K((e==null?void 0:e.walletBalance)||0)})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t border-white/20",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-white/70 text-xs",children:"Deposited"}),a.jsx("p",{className:"font-semibold",children:K((e==null?void 0:e.depositedBalance)||0)})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-white/70 text-xs",children:"Winnings"}),a.jsx("p",{className:"font-semibold",children:K((e==null?void 0:e.winningBalance)||0)})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-white/70 text-xs",children:"Bonus"}),a.jsx("p",{className:"font-semibold",children:K((e==null?void 0:e.bonusBalance)||0)})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Ae,{to:"/wallet/add",children:a.jsx(de,{fullWidth:!0,icon:SR,size:"lg",children:"Add Money"})}),a.jsx(Ae,{to:"/wallet/withdraw",children:a.jsx(de,{fullWidth:!0,variant:"outline",icon:Df,size:"lg",children:"Withdraw"})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Transactions"}),a.jsxs(Ae,{to:"/transactions",className:"text-primary-400 text-sm flex items-center gap-1",children:["View All ",a.jsx(ed,{className:"w-4 h-4"})]})]}),n.length===0?a.jsxs(ee,{className:"text-center py-8",children:[a.jsx(kE,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-400",children:"No transactions yet"})]}):a.jsx("div",{className:"space-y-2",children:n.map(d=>{const m=u(d.type),f=c(d.type),p=d.status==="pending",y=d.status==="rejected";return a.jsxs(ee,{className:`flex items-center gap-3 bg-dark-400 ${p?"opacity-70":""}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${y?"bg-gray-500/20":f?"bg-green-500/20":"bg-red-500/20"}`,children:a.jsx(m,{className:`w-5 h-5 ${y?"text-gray-400":f?"text-green-400":"text-red-400"}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-white capitalize",children:d.type.replace("_"," ")}),p&&a.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-yellow-500/20 text-yellow-400 rounded",children:"Pending"}),y&&a.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-red-500/20 text-red-400 rounded",children:"Rejected"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:qs(d.createdAt)})]}),a.jsxs("p",{className:`font-semibold ${y?"text-gray-400 line-through":f?"text-green-400":"text-red-400"}`,children:[f?"+":"-",K(d.amount)]})]},d.id)})})]})]})})}const w5=(t,e=800,n=.7)=>new Promise((r,s)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=o=>{const c=new Image;c.src=o.target.result,c.onload=()=>{const u=document.createElement("canvas");let d=c.width,m=c.height;d>e&&(m=m*e/d,d=e),u.width=d,u.height=m,u.getContext("2d").drawImage(c,0,0,d,m);const p=u.toDataURL("image/jpeg",n);r(p)},c.onerror=s},i.onerror=s});function _5(){const t=kt(),{currentUser:e,userData:n}=Ze(),r=P.useRef(null),[s,i]=P.useState(null),[o,c]=P.useState(!0),[u,d]=P.useState(!1),[m,f]=P.useState(!1),[p,y]=P.useState({amount:"",utr:"",screenshot:""});P.useEffect(()=>{N()},[]);const N=async()=>{try{const w=await Zr(ut(se,"app_settings","main"));w.exists()&&i(w.data())}catch(w){console.error("Error fetching settings:",w)}finally{c(!1)}},b=async w=>{const E=w.target.files[0];if(E)try{const T=await w5(E,800,.7);y({...p,screenshot:T})}catch(T){console.error("Error compressing image:",T)}},C=async w=>{if(w.preventDefault(),!p.amount||!p.utr||!p.screenshot){alert("Please fill all fields and upload screenshot");return}if(parseFloat(p.amount)<((s==null?void 0:s.minDeposit)||100)){alert(`Minimum deposit amount is ${K((s==null?void 0:s.minDeposit)||100)}`);return}d(!0);try{const E=await zi(Be(se,"deposit_requests"),{userId:e.uid,userName:n.displayName,userEmail:n.email,amount:parseFloat(p.amount),utr:p.utr,screenshot:p.screenshot,status:"pending",createdAt:On()});await zi(Be(se,"transactions"),{userId:e.uid,userName:n.displayName,userEmail:n.email,type:"deposit",amount:parseFloat(p.amount),description:`Deposit Request - UTR: ${p.utr}`,status:"pending",referenceId:E.id,createdAt:On()}),f(!0)}catch(E){console.error("Error submitting deposit:",E),alert("Failed to submit deposit request")}finally{d(!1)}};return o?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):m?a.jsx(le,{hideNav:!0,children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(Vp,{className:"w-10 h-10 text-green-400"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Request Submitted!"}),a.jsx("p",{className:"text-gray-400 text-center mb-6",children:"Your deposit request has been submitted. It will be verified and credited within 24 hours."}),a.jsx(de,{onClick:()=>t("/wallet"),children:"Back to Wallet"})]})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Add Money"})]})}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsxs(ee,{className:"text-center",children:[a.jsx("h3",{className:"font-semibold text-white mb-3",children:"Scan & Pay"}),s!=null&&s.upiQrImage?a.jsx("div",{className:"bg-white p-4 rounded-xl inline-block mb-3",children:a.jsx("img",{src:s.upiQrImage,alt:"UPI QR",className:"w-48 h-48 mx-auto"})}):a.jsx("div",{className:"w-48 h-48 bg-dark-200 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(CR,{className:"w-16 h-16 text-gray-600"})}),(s==null?void 0:s.upiId)&&a.jsx("p",{className:"text-primary-400 font-mono",children:s.upiId})]}),a.jsx(ee,{className:"bg-blue-500/10 border border-blue-500/30",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(nd,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-300",children:[a.jsx("p",{className:"font-medium mb-1",children:"Instructions:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-blue-300/80",children:[a.jsx("li",{children:"Scan the QR code or pay to UPI ID"}),a.jsxs("li",{children:["Minimum deposit: ",K((s==null?void 0:s.minDeposit)||100)]}),a.jsx("li",{children:"Enter your username in UPI remark"}),a.jsx("li",{children:"Fill the form below after payment"})]})]})]})}),a.jsxs("form",{onSubmit:C,children:[a.jsx(ot,{label:"Amount Paid ()",type:"number",value:p.amount,onChange:w=>y({...p,amount:w.target.value}),placeholder:`Minimum ${K((s==null?void 0:s.minDeposit)||100)}`,required:!0}),a.jsx(ot,{label:"Transaction ID / UTR Number",value:p.utr,onChange:w=>y({...p,utr:w.target.value}),placeholder:"Enter 12-digit UTR number",required:!0}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:["Payment Screenshot ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:b,className:"hidden"}),p.screenshot?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:p.screenshot,alt:"Screenshot",className:"w-full max-h-48 object-contain rounded-xl bg-dark-300"}),a.jsx("button",{type:"button",onClick:()=>y({...p,screenshot:""}),className:"absolute top-2 right-2 p-2 bg-red-500 rounded-full",children:""})]}):a.jsxs("button",{type:"button",onClick:()=>{var w;return(w=r.current)==null?void 0:w.click()},className:"w-full py-8 border-2 border-dashed border-dark-200 rounded-xl flex flex-col items-center gap-2 hover:border-primary-500 transition-colors",children:[a.jsx(RR,{className:"w-8 h-8 text-gray-500"}),a.jsx("span",{className:"text-gray-400",children:"Upload Screenshot"})]})]}),a.jsx(de,{type:"submit",fullWidth:!0,size:"lg",loading:u,children:"Submit Deposit Request"})]})]})]})}function E5(){const t=kt(),{currentUser:e,userData:n}=Ze(),[r,s]=P.useState(null),[i,o]=P.useState(!0),[c,u]=P.useState(!1),[d,m]=P.useState(!1),[f,p]=P.useState("upi"),[y,N]=P.useState({amount:"",upiId:"",bankName:"",accountNumber:"",ifsc:"",accountName:""});P.useEffect(()=>{b()},[]);const b=async()=>{try{const w=await Zr(ut(se,"app_settings","main"));w.exists()&&s(w.data())}catch(w){console.error("Error fetching settings:",w)}finally{o(!1)}},C=async w=>{w.preventDefault();const E=parseFloat(y.amount),T=(r==null?void 0:r.minWithdrawal)||200,A=(n==null?void 0:n.winningBalance)||0;if(E<T){alert(`Minimum withdrawal amount is ${K(T)}`);return}if(E>A){alert("You can only withdraw from your winnings balance");return}if(f==="upi"&&!y.upiId){alert("Please enter UPI ID");return}if(f==="bank"&&(!y.bankName||!y.accountNumber||!y.ifsc||!y.accountName)){alert("Please fill all bank details");return}u(!0);try{const L={userId:e.uid,userName:n.displayName,userEmail:n.email,amount:E,paymentMethod:f==="upi"?"UPI":"Bank Transfer",status:"pending",createdAt:On()};f==="upi"?L.upiId=y.upiId:L.bankDetails={bankName:y.bankName,accountNumber:y.accountNumber,ifsc:y.ifsc,accountName:y.accountName};const M=await zi(Be(se,"withdrawals"),L),v=ut(se,"users",e.uid);await Ms(v,{walletBalance:Xn(-E),winningBalance:Xn(-E),updatedAt:On()}),await zi(Be(se,"transactions"),{userId:e.uid,userName:n.displayName,userEmail:n.email,type:"withdrawal",amount:E,description:`Withdrawal Request - ${f==="upi"?"UPI":"Bank Transfer"}`,status:"pending",referenceId:M.id,createdAt:On()}),m(!0)}catch(L){console.error("Error submitting withdrawal:",L),alert("Failed to submit withdrawal request")}finally{u(!1)}};return i?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):d?a.jsx(le,{hideNav:!0,children:a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] px-4",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(Vp,{className:"w-10 h-10 text-green-400"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Request Submitted!"}),a.jsx("p",{className:"text-gray-400 text-center mb-6",children:"Your withdrawal request has been submitted. It will be processed within 24-48 hours."}),a.jsx(de,{onClick:()=>t("/wallet"),children:"Back to Wallet"})]})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Withdraw"})]})}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:a.jsx(ro,{className:"w-6 h-6 text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm",children:"Withdrawable Balance"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:K((n==null?void 0:n.winningBalance)||0)})]})]})}),a.jsx(ee,{className:"bg-yellow-500/10 border border-yellow-500/30",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(nd,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-300",children:[a.jsxs("p",{children:["Minimum withdrawal: ",K((r==null?void 0:r.minWithdrawal)||200)]}),a.jsx("p",{children:"Only winnings can be withdrawn"})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Method"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>p("upi"),className:`p-4 rounded-xl border-2 transition-colors ${f==="upi"?"border-primary-500 bg-primary-500/10":"border-dark-200 bg-dark-300"}`,children:[a.jsx("p",{className:"font-medium text-white",children:"UPI"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Instant transfer"})]}),a.jsxs("button",{type:"button",onClick:()=>p("bank"),className:`p-4 rounded-xl border-2 transition-colors ${f==="bank"?"border-primary-500 bg-primary-500/10":"border-dark-200 bg-dark-300"}`,children:[a.jsx("p",{className:"font-medium text-white",children:"Bank"}),a.jsx("p",{className:"text-xs text-gray-400",children:"1-2 days"})]})]})]}),a.jsxs("form",{onSubmit:C,children:[a.jsx(ot,{label:"Amount ()",type:"number",value:y.amount,onChange:w=>N({...y,amount:w.target.value}),placeholder:`Minimum ${K((r==null?void 0:r.minWithdrawal)||200)}`,required:!0}),f==="upi"?a.jsx(ot,{label:"UPI ID",value:y.upiId,onChange:w=>N({...y,upiId:w.target.value}),placeholder:"yourname@upi",required:!0}):a.jsxs(a.Fragment,{children:[a.jsx(ot,{label:"Bank Name",value:y.bankName,onChange:w=>N({...y,bankName:w.target.value}),placeholder:"Enter bank name (e.g. SBI, HDFC)",required:!0}),a.jsx(ot,{label:"Account Number",value:y.accountNumber,onChange:w=>N({...y,accountNumber:w.target.value}),placeholder:"Enter account number",required:!0}),a.jsx(ot,{label:"IFSC Code",value:y.ifsc,onChange:w=>N({...y,ifsc:w.target.value.toUpperCase()}),placeholder:"Enter IFSC code",required:!0}),a.jsx(ot,{label:"Account Holder Name",value:y.accountName,onChange:w=>N({...y,accountName:w.target.value}),placeholder:"Enter account holder name",required:!0})]}),a.jsx(de,{type:"submit",fullWidth:!0,size:"lg",loading:c,disabled:((n==null?void 0:n.winningBalance)||0)<((r==null?void 0:r.minWithdrawal)||200),children:"Submit Withdrawal Request"})]})]})]})}function T5(){const t=kt(),{currentUser:e}=Ze(),[n,r]=P.useState([]),[s,i]=P.useState(!0);P.useEffect(()=>{e&&o()},[e]);const o=async()=>{try{const u=await Ft(At(Be(se,"transactions"),Bi("userId","==",e.uid),Wt("createdAt","desc")));r(u.docs.map(d=>({id:d.id,...d.data()})))}catch(u){console.error("Error fetching transactions:",u)}finally{i(!1)}},c=u=>["deposit","winning","bonus","manual_credit","refund"].includes(u);return s?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Transaction History"})]})}),a.jsx("div",{className:"px-4 py-4",children:n.length===0?a.jsx(es,{icon:kE,title:"No transactions",description:"Your transaction history will appear here"}):a.jsx("div",{className:"space-y-2",children:n.map(u=>{const d=c(u.type),m=d?bE:Df,f=u.status==="pending",p=u.status==="rejected";return a.jsxs(ee,{className:`flex items-center gap-3 bg-dark-400 ${f?"opacity-70":""}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p?"bg-gray-500/20":d?"bg-green-500/20":"bg-red-500/20"}`,children:a.jsx(m,{className:`w-5 h-5 ${p?"text-gray-400":d?"text-green-400":"text-red-400"}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-white capitalize",children:u.type.replace("_"," ")}),f&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded-full",children:"Pending"}),p&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-400 rounded-full",children:"Rejected"})]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.description}),a.jsx("p",{className:"text-xs text-gray-500",children:qs(u.createdAt)})]}),a.jsxs("p",{className:`font-semibold ${p?"text-gray-400 line-through":d?"text-green-400":"text-red-400"}`,children:[d?"+":"-",K(u.amount)]})]},u.id)})})})]})}function N5(){var L,M;const{userData:t,currentUser:e,logout:n,refreshUserData:r}=Ze(),s=kt(),[i,o]=P.useState(!1),[c,u]=P.useState(!1),[d,m]=P.useState(!1),[f,p]=P.useState(null),[y,N]=P.useState(!1),[b,C]=P.useState({displayName:(t==null?void 0:t.displayName)||"",phone:(t==null?void 0:t.phone)||"",dateOfBirth:(t==null?void 0:t.dateOfBirth)||""});P.useEffect(()=>{window.matchMedia("(display-mode: standalone)").matches&&N(!0);const v=I=>{I.preventDefault(),p(I)},x=()=>{N(!0),p(null)};return window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",x),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",x)}},[]);const w=async()=>{if(!f){u(!0);return}f.prompt();const{outcome:v}=await f.userChoice;v==="accepted"&&(p(null),u(!1))},E=async()=>{try{await n(),s("/login")}catch(v){console.error("Logout error:",v)}},T=async v=>{v.preventDefault(),m(!0);try{await Ms(ut(se,"users",e.uid),{displayName:b.displayName,phone:b.phone,dateOfBirth:b.dateOfBirth,updatedAt:On()}),await r(),o(!1)}catch(x){console.error("Error updating profile:",x)}finally{m(!1)}},A=[{icon:xR,label:"My Stats",path:"/my-stats",color:"text-primary-400"},{icon:Ls,label:"Refer & Earn",path:"/refer",color:"text-green-400"},{icon:Rt,label:"Leaderboard",path:"/leaderboard",color:"text-yellow-400"},{icon:ah,label:"Terms & Conditions",path:"/terms",color:"text-blue-400"},{icon:ah,label:"Privacy Policy",path:"/privacy",color:"text-purple-400"},{icon:ah,label:"Refund Policy",path:"/refund",color:"text-red-400"},{icon:Sv,label:"Fair Play Policy",path:"/fairplay",color:"text-emerald-400"},{icon:nd,label:"About Us",path:"/about",color:"text-pink-400"},{icon:iu,label:"Contact Us",path:"/contact",color:"text-orange-400"}];return a.jsxs(le,{children:[a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsxs(ee,{className:"relative",children:[a.jsx("button",{onClick:()=>{C({displayName:(t==null?void 0:t.displayName)||"",phone:(t==null?void 0:t.phone)||"",dateOfBirth:(t==null?void 0:t.dateOfBirth)||""}),o(!0)},className:"absolute top-4 right-4 p-2 bg-dark-200 rounded-full",children:a.jsx(kR,{className:"w-4 h-4 text-gray-400"})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl font-bold text-white",children:((M=(L=t==null?void 0:t.displayName)==null?void 0:L.charAt(0))==null?void 0:M.toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:(t==null?void 0:t.displayName)||"User"}),a.jsx("p",{className:"text-gray-400 text-sm",children:t==null?void 0:t.email}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border backdrop-blur-sm bg-green-500/20 text-green-400 border-green-500/30",children:"Verified"})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-4 border-t border-dark-200",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-1 text-primary-400 mb-1",children:a.jsx(Rt,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-lg font-bold text-white",children:(t==null?void 0:t.matchesPlayed)||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Matches"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-1 text-red-400 mb-1",children:a.jsx(SE,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-lg font-bold text-white",children:(t==null?void 0:t.totalKills)||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Kills"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-1 text-green-400 mb-1",children:a.jsx(su,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-lg font-bold text-green-400",children:K((t==null?void 0:t.totalWinnings)||0)}),a.jsx("p",{className:"text-xs text-gray-400",children:"Won"})]})]})]}),a.jsxs(ee,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx($i,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("p",{className:"text-white",children:t==null?void 0:t.email})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(iu,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),a.jsx("p",{className:"text-white",children:(t==null?void 0:t.phone)||"Not added"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Zu,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Member Since"}),a.jsx("p",{className:"text-white",children:Bp(t==null?void 0:t.createdAt)})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ls,{className:"w-5 h-5 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Referral Code"}),a.jsx("p",{className:"text-primary-400 font-mono",children:(t==null?void 0:t.referralCode)||"N/A"})]})]})]}),a.jsx(ee,{className:"divide-y divide-dark-200",children:A.map((v,x)=>a.jsxs(Ae,{to:v.path,className:"flex items-center justify-between py-3 first:pt-0 last:pb-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(v.icon,{className:`w-5 h-5 ${v.color}`}),a.jsx("span",{className:"text-white",children:v.label})]}),a.jsx(ed,{className:"w-5 h-5 text-gray-500"})]},x))}),a.jsx("a",{href:"/LastZone.apk",download:"LastZone.apk",className:"block",children:a.jsx(de,{variant:"primary",fullWidth:!0,icon:hc,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:"Download App"})}),a.jsx(de,{variant:"danger",fullWidth:!0,icon:IR,onClick:E,children:"Logout"})]}),a.jsx(Ns,{isOpen:i,onClose:()=>o(!1),title:"Edit Profile",children:a.jsxs("form",{onSubmit:T,children:[a.jsx(ot,{label:"Display Name",value:b.displayName,onChange:v=>C({...b,displayName:v.target.value}),required:!0}),a.jsx(ot,{label:"Phone Number",value:b.phone,onChange:v=>C({...b,phone:v.target.value}),placeholder:"+91 9876543210"}),a.jsx(ot,{label:"Date of Birth",type:"date",value:b.dateOfBirth,onChange:v=>C({...b,dateOfBirth:v.target.value})}),a.jsx(de,{type:"submit",fullWidth:!0,loading:d,className:"mt-4",children:"Save Changes"})]})}),a.jsx(Ns,{isOpen:c,onClose:()=>u(!1),title:"Install App",children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-green-500/30",children:a.jsx(hc,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Install Last Zone"}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Get the best experience with our app!"}),a.jsxs("div",{className:"bg-dark-300 rounded-xl p-4 mb-4 text-left space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-500/20 rounded-lg flex items-center justify-center",children:a.jsx(Rt,{className:"w-4 h-4 text-primary-400"})}),a.jsx("span",{className:"text-sm text-gray-300",children:"Quick access to tournaments"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:a.jsx(su,{className:"w-4 h-4 text-green-400"})}),a.jsx("span",{className:"text-sm text-gray-300",children:"Instant notifications for winnings"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx(Sv,{className:"w-4 h-4 text-purple-400"})}),a.jsx("span",{className:"text-sm text-gray-300",children:"Faster & smoother experience"})]})]}),f?a.jsxs(de,{fullWidth:!0,onClick:w,className:"bg-gradient-to-r from-green-500 to-emerald-600",children:[a.jsx(hc,{className:"w-5 h-5 mr-2"}),"Install Now"]}):a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:'To install, tap the menu button in your browser and select "Add to Home Screen"'}),a.jsx(de,{fullWidth:!0,variant:"secondary",onClick:()=>u(!1),children:"Got it!"})]})]})})]})}function I5(){var w,E;const t=kt(),{currentUser:e,userData:n}=Ze(),[r,s]=P.useState(!0),[i,o]=P.useState([]),[c,u]=P.useState([]);P.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{const[T,A]=await Promise.all([Ft(At(Be(se,"transactions"),Bi("userId","==",e.uid),Wt("createdAt","desc"))),Ft(At(Be(se,"tournaments"),Bi("participants","array-contains",e.uid)))]);o(T.docs.map(L=>({id:L.id,...L.data()}))),u(A.docs.map(L=>({id:L.id,...L.data()})))}catch(T){console.error("Error fetching stats:",T)}finally{s(!1)}},m=i.filter(T=>T.type==="deposit").reduce((T,A)=>T+A.amount,0),f=i.filter(T=>T.type==="withdrawal").reduce((T,A)=>T+A.amount,0),p=i.filter(T=>T.type==="entry_fee").reduce((T,A)=>T+A.amount,0),y=i.filter(T=>T.type==="winning"||T.type==="bonus").reduce((T,A)=>T+A.amount,0),N=c.filter(T=>T.status==="finished").length,b=c.filter(T=>T.status==="upcoming").length,C=c.filter(T=>T.status==="live").length;return r?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"My Stats"})]})}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsxs(ee,{className:"bg-gradient-to-br from-primary-600 to-purple-600",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:((E=(w=n==null?void 0:n.displayName)==null?void 0:w.charAt(0))==null?void 0:E.toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:n==null?void 0:n.displayName}),a.jsxs("p",{className:"text-white/70 text-sm",children:["Member since ",Bp(n==null?void 0:n.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx(Rt,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xl font-bold text-white",children:(n==null?void 0:n.matchesPlayed)||0}),a.jsx("p",{className:"text-xs text-white/70",children:"Matches"})]}),a.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx(SE,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xl font-bold text-white",children:(n==null?void 0:n.totalKills)||0}),a.jsx("p",{className:"text-xs text-white/70",children:"Kills"})]}),a.jsxs("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx(su,{className:"w-5 h-5 text-green-400 mx-auto mb-1"}),a.jsx("p",{className:"text-xl font-bold text-green-400",children:K((n==null?void 0:n.totalWinnings)||0)}),a.jsx("p",{className:"text-xs text-white/70",children:"Won"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(qr,{className:"w-5 h-5 text-primary-400"}),"Tournament Stats"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:a.jsx(Zu,{className:"w-5 h-5 text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:c.length}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Joined"})]})]})}),a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-full flex items-center justify-center",children:a.jsx(uc,{className:"w-5 h-5 text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:N}),a.jsx("p",{className:"text-xs text-gray-400",children:"Completed"})]})]})}),a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:a.jsx(DR,{className:"w-5 h-5 text-yellow-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:C}),a.jsx("p",{className:"text-xs text-gray-400",children:"Live Now"})]})]})}),a.jsx(ee,{className:"bg-dark-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:a.jsx(Rt,{className:"w-5 h-5 text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:b}),a.jsx("p",{className:"text-xs text-gray-400",children:"Upcoming"})]})]})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(AR,{className:"w-5 h-5 text-primary-400"}),"Financial Stats"]}),a.jsxs(ee,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-200",children:[a.jsx("span",{className:"text-gray-400",children:"Total Deposited"}),a.jsx("span",{className:"text-green-400 font-semibold",children:K(m)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-200",children:[a.jsx("span",{className:"text-gray-400",children:"Total Withdrawn"}),a.jsx("span",{className:"text-red-400 font-semibold",children:K(f)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-200",children:[a.jsx("span",{className:"text-gray-400",children:"Entry Fees Paid"}),a.jsx("span",{className:"text-orange-400 font-semibold",children:K(p)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-200",children:[a.jsx("span",{className:"text-gray-400",children:"Total Winnings"}),a.jsx("span",{className:"text-green-400 font-semibold",children:K(y)})]}),a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsx("span",{className:"text-white font-medium",children:"Net Profit/Loss"}),a.jsxs("span",{className:`font-bold text-lg ${y-p>=0?"text-green-400":"text-red-400"}`,children:[y-p>=0?"+":"",K(y-p)]})]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(su,{className:"w-5 h-5 text-primary-400"}),"Current Balance"]}),a.jsxs(ee,{className:"bg-dark-400",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Deposited"}),a.jsx("p",{className:"text-lg font-bold text-blue-400",children:K((n==null?void 0:n.depositedBalance)||0)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Winnings"}),a.jsx("p",{className:"text-lg font-bold text-green-400",children:K((n==null?void 0:n.winningBalance)||0)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Bonus"}),a.jsx("p",{className:"text-lg font-bold text-purple-400",children:K((n==null?void 0:n.bonusBalance)||0)})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-200 text-center",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Total Balance"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:K((n==null?void 0:n.walletBalance)||0)})]})]})]})]})]})}function b5(){const t=kt(),{currentUser:e}=Ze(),[n,r]=P.useState([]),[s,i]=P.useState(!0),[o,c]=P.useState("all"),u=[{value:"all",label:"All"},{value:"upcoming",label:"Upcoming"},{value:"live",label:"Live"},{value:"finished",label:"Finished"}];P.useEffect(()=>{d()},[e]);const d=async()=>{if(!e){i(!1);return}try{const N=(await Ft(At(Be(se,"tournaments"),Wt("startDateTime","desc")))).docs.map(b=>({id:b.id,...b.data()})).filter(b=>{var C;return(C=b.participantDetails)==null?void 0:C.some(w=>w.odeuUserId===e.uid)});r(N)}catch(p){console.error("Error fetching contests:",p)}finally{i(!1)}},m=o==="all"?n:n.filter(p=>p.status===o),f=p=>n.filter(y=>y.status===p).length;return s?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):e?a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-semibold text-white",children:"My Contests"}),a.jsxs("p",{className:"text-xs text-gray-400",children:[n.length," contests participated"]})]})]})}),a.jsxs("div",{className:"px-4 py-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:u.map(p=>a.jsxs("button",{onClick:()=>c(p.value),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 ${o===p.value?"bg-gradient-to-r from-primary-500 to-purple-500 text-white shadow-lg shadow-primary-500/30":"bg-dark-400 text-gray-400 hover:text-white hover:bg-dark-300"}`,children:[p.label,p.value!=="all"&&a.jsx("span",{className:`ml-1 px-1 py-0.5 rounded-full text-xs ${o===p.value?"bg-white/20":"bg-dark-300"}`,children:f(p.value)})]},p.value))}),m.length===0?a.jsx(es,{icon:Rt,title:o==="all"?"No contests yet":`No ${o} contests`,description:o==="all"?"You haven't joined any tournaments yet":`You don't have any ${o} tournaments`,action:a.jsx(Ae,{to:"/tournaments",className:"text-primary-400 hover:text-primary-300",children:"Browse tournaments "})}):a.jsx("div",{className:"space-y-5",children:m.map(p=>a.jsx(Ae,{to:`/tournament/${p.id}`,className:"block",children:a.jsxs(ee,{className:"flex gap-3 hover:border-primary-500/30 transition-all",children:[a.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-dark-200 flex-shrink-0 ring-2 ring-white/10",children:p.gameImage?a.jsx("img",{src:p.gameImage,alt:p.gameName,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-700 to-gray-800",children:a.jsx(qr,{className:"w-8 h-8 text-gray-500"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-semibold text-white truncate",children:p.name}),a.jsx(so,{status:p.status})]}),a.jsx("p",{className:"text-sm text-gray-400",children:p.gameName}),a.jsxs("div",{className:"flex items-center gap-4 mt-1.5 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(td,{className:"w-3 h-3"}),a.jsx("span",{children:qs(p.startDateTime)})]}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(Wi,{className:"w-3 h-3"}),a.jsxs("span",{children:[p.participantCount||0,"/",p.maxPlayers||""]})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["Entry: ",a.jsx("span",{className:"text-white",children:K(p.entryFee)})]}),a.jsx("span",{className:"text-green-400 font-semibold text-sm",children:K(p.prizePool)})]})]})]})},p.id))})]})]}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"My Contests"})]})}),a.jsx(es,{icon:Rt,title:"Login Required",description:"Please login to view your contests",action:a.jsx(Ae,{to:"/login",className:"text-primary-400 hover:text-primary-300",children:"Login now "})})]})}function k5(){const{currentUser:t,userData:e,refreshUserData:n}=Ze(),[r,s]=P.useState([]),[i,o]=P.useState(!0),[c,u]=P.useState("ongoing"),[d,m]=P.useState(!1),[f,p]=P.useState(null),[y,N]=P.useState(!1),[b,C]=P.useState({open:!1,message:""});P.useEffect(()=>{w()},[]);const w=async()=>{try{const v=await Ft(At(Be(se,"lotteries"),Wt("createdAt","desc")));s(v.docs.map(x=>({id:x.id,...x.data()})))}catch(v){console.error("Error fetching lotteries:",v)}finally{o(!1)}},E=v=>!t||!v.participants?!1:v.participants.some(x=>x.odeuUserId===t.uid),T=v=>{p(v),m(!0)},A=async()=>{if(!t){m(!1);return}const v=f.entryFee||0;if(v>0&&e.walletBalance<v){C({open:!0,message:"Insufficient balance. Please add money to your wallet."});return}N(!0);try{const x={odeuId:crypto.randomUUID(),odeuUserId:t.uid,odeuName:e.displayName||"Unknown",odeuEmail:e.email||"",odeuJoinedAt:new Date().toISOString()};await Ms(ut(se,"lotteries",f.id),{participants:Op(x),participantCount:Xn(1)}),v>0&&(await Ms(ut(se,"users",t.uid),{walletBalance:Xn(-v),depositedBalance:Xn(-v)}),await zi(Be(se,"transactions"),{userId:t.uid,userName:e.displayName,userEmail:e.email,type:"entry_fee",amount:v,description:`Lottery Entry - ${f.title}`,status:"completed",lotteryId:f.id,createdAt:On()}),await n()),await w(),m(!1)}catch(x){console.error("Error joining lottery:",x),C({open:!0,message:"Failed to join lottery. Please try again."})}finally{N(!1)}},L=[{value:"ongoing",label:"Ongoing"},{value:"results",label:"Results"}],M=c==="ongoing"?r.filter(v=>v.status==="upcoming"||v.status==="ongoing"):r.filter(v=>v.status==="finished");return i?a.jsx(le,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{children:[a.jsxs("div",{className:"px-4 py-4",children:[a.jsx("h1",{className:"text-xl font-bold text-white mb-4",children:"Lucky Draw"}),a.jsx(zp,{tabs:L,activeTab:c,onChange:u,className:"mb-4"}),M.length===0?a.jsx(es,{icon:Ls,title:c==="ongoing"?"No active lotteries":"No results yet",description:c==="ongoing"?"Check back later for new lucky draws":"Results will appear here"}):a.jsx("div",{className:"space-y-4",children:M.map(v=>a.jsxs(ee,{className:"overflow-hidden",children:[v.image&&a.jsx("div",{className:"aspect-video -mx-4 -mt-4 mb-4",children:a.jsx("img",{src:v.image,alt:v.title,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-white",children:v.title}),a.jsx(so,{status:v.status})]}),v.description&&a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:v.description}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsxs("div",{className:"text-center p-2 bg-dark-400 rounded-lg",children:[a.jsx(Rt,{className:"w-4 h-4 text-yellow-400 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-bold text-yellow-400",children:K(v.prizeAmount)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prize"})]}),a.jsxs("div",{className:"text-center p-2 bg-dark-400 rounded-lg",children:[a.jsx(lh,{className:"w-4 h-4 text-green-400 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-bold text-white",children:K(v.entryFee||0)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Entry Fee"})]}),a.jsxs("div",{className:"text-center p-2 bg-dark-400 rounded-lg",children:[a.jsx(Wi,{className:"w-4 h-4 text-blue-400 mx-auto mb-1"}),a.jsx("p",{className:"text-sm font-bold text-white",children:v.participantCount||0}),a.jsx("p",{className:"text-xs text-gray-500",children:"Joined"})]})]}),v.status==="finished"&&v.winnerName&&a.jsxs("div",{className:"p-3 bg-green-500/10 rounded-lg border border-green-500/30 mb-3",children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Winner"}),a.jsx("p",{className:"text-green-400 font-medium",children:v.winnerName})]}),v.status!=="finished"&&a.jsx("div",{className:"mt-3",children:t?E(v)?a.jsxs(de,{fullWidth:!0,variant:"success",disabled:!0,children:[a.jsx(lh,{className:"w-4 h-4 mr-2"})," Already Joined"]}):a.jsxs(de,{fullWidth:!0,onClick:()=>T(v),children:[a.jsx(lh,{className:"w-4 h-4 mr-2"}),"Join - ",v.entryFee>0?K(v.entryFee):"Free"]}):a.jsx(de,{fullWidth:!0,variant:"secondary",onClick:()=>window.location.href="/login",children:"Login to Participate"})}),v.finishedAt&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-dark-200",children:[a.jsx(Zu,{className:"w-4 h-4 text-gray-500"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Draw Date: ",Bp(v.finishedAt)]})]})]},v.id))})]}),a.jsx(Ns,{isOpen:d,onClose:()=>m(!1),title:"Join Lucky Draw",children:f&&a.jsxs("div",{className:"py-4",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx(Ls,{className:"w-16 h-16 text-purple-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:f.title}),a.jsx("p",{className:"text-gray-400",children:"Join this lucky draw for a chance to win!"})]}),a.jsxs("div",{className:"bg-dark-300 rounded-xl p-4 mb-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Prize Amount"}),a.jsx("span",{className:"text-yellow-400 font-bold",children:K(f.prizeAmount)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Entry Fee"}),a.jsx("span",{className:"text-white font-semibold",children:f.entryFee>0?K(f.entryFee):"Free"})]}),f.entryFee>0&&a.jsxs("div",{className:"flex justify-between pt-2 border-t border-dark-200",children:[a.jsx("span",{className:"text-gray-400",children:"Your Balance"}),a.jsx("span",{className:`font-semibold ${((e==null?void 0:e.walletBalance)||0)>=f.entryFee?"text-green-400":"text-red-400"}`,children:K((e==null?void 0:e.walletBalance)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Participants"}),a.jsx("span",{className:"text-blue-400 font-medium",children:f.participantCount||0})]})]}),f.entryFee>0&&((e==null?void 0:e.walletBalance)||0)<f.entryFee?a.jsx(de,{fullWidth:!0,onClick:()=>window.location.href="/wallet/add",variant:"warning",children:"Add Money to Wallet"}):a.jsx(de,{fullWidth:!0,onClick:A,loading:y,children:"Confirm & Join"})]})}),a.jsx(Ns,{isOpen:b.open,onClose:()=>C({open:!1,message:""}),title:"Error",children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Mp,{className:"w-8 h-8 text-red-400"})}),a.jsx("p",{className:"text-gray-300 mb-6",children:b.message}),a.jsx(de,{fullWidth:!0,onClick:()=>C({open:!1,message:""}),children:"OK"})]})})]})}function S5(){const t=kt(),{currentUser:e}=Ze(),[n,r]=P.useState([]),[s,i]=P.useState(!0),[o,c]=P.useState("default"),u=P.useRef(null);P.useEffect(()=>{"Notification"in window&&c(Notification.permission),d();const p=wE(At(Be(se,"notifications"),Wt("createdAt","desc"),Ra(1)),y=>{y.docChanges().forEach(N=>{if(N.type==="added"){const b={id:N.doc.id,...N.doc.data()};u.current&&b.id!==u.current&&b.sendPush&&f(b),u.current=b.id}})});return()=>p()},[e]);const d=async()=>{try{const y=(await Ft(At(Be(se,"notifications"),Wt("createdAt","desc"),Ra(50)))).docs.map(N=>({id:N.id,...N.data()}));r(y),y.length>0&&(u.current=y[0].id)}catch(p){console.error("Error fetching notifications:",p)}finally{i(!1)}},m=async()=>{if(!("Notification"in window)){alert("This browser does not support notifications");return}try{const p=await Notification.requestPermission();c(p),p==="granted"&&new Notification("Notifications Enabled! ",{body:"You will now receive updates about tournaments and winnings.",icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png"})}catch(p){console.error("Error requesting notification permission:",p)}},f=p=>{if(Notification.permission==="granted")try{new Notification(p.title,{body:p.message,icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",tag:p.id,requireInteraction:!0})}catch(y){console.error("Error showing notification:",y)}};return s?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Notifications"})]})}),a.jsxs("div",{className:"px-4 py-4",children:[o==="default"&&a.jsxs(ee,{className:"mb-4 bg-gradient-to-r from-primary-500/20 to-purple-500/20 border-primary-500/30",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(Lp,{className:"w-6 h-6 text-primary-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-white",children:"Enable Push Notifications"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Get instant updates about tournaments, winnings, and more!"})]})]}),a.jsxs(de,{fullWidth:!0,onClick:m,className:"mt-4 bg-gradient-to-r from-primary-500 to-purple-500",children:[a.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Enable Notifications"]})]}),o==="denied"&&a.jsx(ee,{className:"mb-4 bg-red-500/10 border-red-500/30",children:a.jsx("p",{className:"text-sm text-red-400",children:" Notifications are blocked. To receive updates, please enable notifications in your browser settings."})}),o==="granted"&&a.jsxs("div",{className:"mb-4 flex items-center gap-2 text-green-400 text-sm",children:[a.jsx(Ts,{className:"w-4 h-4"}),a.jsx("span",{children:"Push notifications enabled"})]}),n.length===0?a.jsx(es,{icon:Ts,title:"No notifications",description:"You're all caught up!"}):a.jsx("div",{className:"space-y-3",children:n.map(p=>a.jsxs(ee,{className:"flex gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(bR,{className:"w-5 h-5 text-primary-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-white",children:p.title}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:p.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r5(p.createdAt)})]})]},p.id))})]})]})}function C5(){const t=kt(),[e,n]=P.useState([]),[r,s]=P.useState(!0),[i,o]=P.useState("all");P.useEffect(()=>{c()},[]);const c=async()=>{try{const f=await Ft(At(Be(se,"users"),Wt("totalWinnings","desc"),Ra(100)));n(f.docs.map(p=>({id:p.id,...p.data()})))}catch(f){console.error("Error fetching leaderboard:",f)}finally{s(!1)}},u=[{value:"all",label:"All Time"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],d=f=>f===1?a.jsx(_R,{className:"w-6 h-6 text-yellow-400"}):f===2?a.jsx(kv,{className:"w-6 h-6 text-gray-300"}):f===3?a.jsx(kv,{className:"w-6 h-6 text-amber-600"}):null,m=f=>f===1?"bg-gradient-to-r from-yellow-500/20 to-yellow-600/10 border-yellow-500/30":f===2?"bg-gradient-to-r from-gray-400/20 to-gray-500/10 border-gray-400/30":f===3?"bg-gradient-to-r from-amber-600/20 to-amber-700/10 border-amber-600/30":"bg-dark-400";return r?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Leaderboard"})]})}),a.jsxs("div",{className:"px-4 py-4",children:[a.jsx(zp,{tabs:u,activeTab:i,onChange:o,className:"mb-4"}),e.length===0?a.jsx(es,{icon:Rt,title:"No players yet",description:"Be the first to top the leaderboard!"}):a.jsx("div",{className:"space-y-3",children:e.map((f,p)=>{var N,b;const y=p+1;return a.jsxs(ee,{className:`flex items-center gap-3 border ${m(y)}`,children:[a.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:d(y)||a.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",y]})}),a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-lg font-bold text-white",children:((b=(N=f.displayName)==null?void 0:N.charAt(0))==null?void 0:b.toUpperCase())||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-white truncate",children:f.displayName||"Unknown"}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-400",children:[a.jsxs("span",{children:[f.matchesPlayed||0," matches"]}),a.jsxs("span",{children:[f.totalKills||0," kills"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-green-400 font-bold",children:K(f.totalWinnings||0)}),a.jsx("p",{className:"text-xs text-gray-500",children:"Won"})]})]},f.id)})})]})]})}function P5(){const t=kt(),{userData:e}=Ze(),[n,r]=P.useState(null),[s,i]=P.useState(!0),[o,c]=P.useState(!1);P.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await Zr(ut(se,"app_settings","main"));y.exists()&&r(y.data())}catch(y){console.error("Error fetching settings:",y)}finally{i(!1)}},d=(e==null?void 0:e.referralCode)||"N/A",m=`${window.location.origin}/register?ref=${d}`,f=y=>{navigator.clipboard.writeText(y),c(!0),setTimeout(()=>c(!1),2e3)},p=()=>{navigator.share?navigator.share({title:"Join Last Zone Legends",text:`Join Last Zone Legends and get bonus! Use my referral code: ${d}`,url:m}):f(m)};return s?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:"Refer & Earn"})]})}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[a.jsxs(ee,{className:"bg-gradient-to-br from-green-500/20 to-emerald-600/20 border border-green-500/30 text-center py-8",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ls,{className:"w-10 h-10 text-green-400"})}),a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Refer Friends & Earn"}),a.jsxs("p",{className:"text-green-300 text-lg font-semibold",children:["Get ",K((n==null?void 0:n.referralBonus)||50)," for each referral!"]})]}),a.jsxs(ee,{children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Your Referral Code"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-dark-200 rounded-xl px-4 py-3",children:a.jsx("p",{className:"text-xl font-bold text-primary-400 font-mono tracking-wider",children:d})}),a.jsx("button",{onClick:()=>f(d),className:"p-3 bg-primary-600 rounded-xl hover:bg-primary-700 transition-colors",children:o?a.jsx(dc,{className:"w-6 h-6 text-white"}):a.jsx(Of,{className:"w-6 h-6 text-white"})})]})]}),a.jsx(de,{fullWidth:!0,size:"lg",icon:PR,onClick:p,children:"Share with Friends"}),a.jsxs(ee,{children:[a.jsx("h3",{className:"font-semibold text-white mb-4",children:"How it works"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-primary-400 font-bold",children:"1"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Share your code"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Share your referral code with friends"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-primary-400 font-bold",children:"2"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Friend signs up"}),a.jsx("p",{className:"text-sm text-gray-400",children:"They register using your referral code"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-primary-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-primary-400 font-bold",children:"3"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Friend joins a match"}),a.jsx("p",{className:"text-sm text-gray-400",children:"When they join their first paid match"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-green-400 font-bold",children:"4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"You get rewarded!"}),a.jsxs("p",{className:"text-sm text-gray-400",children:[K((n==null?void 0:n.referralBonus)||50)," bonus credited to your wallet"]})]})]})]})]})]})]})}const LE=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),j5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12a12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472c-.18 1.898-.962 6.502-1.36 8.627c-.168.9-.499 1.201-.82 1.23c-.696.065-1.225-.46-1.9-.902c-1.056-.693-1.653-1.124-2.678-1.8c-1.185-.78-.417-1.21.258-1.91c.177-.184 3.247-2.977 3.307-3.23c.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345c-.48.33-.913.49-1.302.48c-.428-.008-1.252-.241-1.865-.44c-.752-.245-1.349-.374-1.297-.789c.027-.216.325-.437.893-.663c3.498-1.524 5.83-2.529 6.998-3.014c3.332-1.386 4.025-1.627 4.476-1.635z"})}),A5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967c-.273-.099-.471-.148-.67.15c-.197.297-.767.966-.94 1.164c-.173.199-.347.223-.644.075c-.297-.15-1.255-.463-2.39-1.475c-.883-.788-1.48-1.761-1.653-2.059c-.173-.297-.018-.458.13-.606c.134-.133.298-.347.446-.52c.149-.174.198-.298.298-.497c.099-.198.05-.371-.025-.52c-.075-.149-.669-1.612-.916-2.207c-.242-.579-.487-.5-.669-.51c-.173-.008-.371-.01-.57-.01c-.198 0-.52.074-.792.372c-.272.297-1.04 1.016-1.04 2.479c0 1.462 1.065 2.875 1.213 3.074c.149.198 2.096 3.2 5.077 4.487c.709.306 1.262.489 1.694.625c.712.227 1.36.195 1.871.118c.571-.085 1.758-.719 2.006-1.413c.248-.694.248-1.289.173-1.413c-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214l-3.741.982l.998-3.648l-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884c2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"})}),R5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),D5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 0C8.74 0 8.333.015 7.053.072C5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053C.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913c.306.788.717 1.459 1.384 2.126c.667.666 1.336 1.079 2.126 1.384c.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558c.788-.306 1.459-.718 2.126-1.384c.666-.667 1.079-1.335 1.384-2.126c.296-.765.499-1.636.558-2.913c.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913c-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071c1.17.055 1.805.249 2.227.415c.562.217.96.477 1.382.896c.419.42.679.819.896 1.381c.164.422.36 1.057.413 2.227c.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227c-.224.562-.479.96-.899 1.382c-.419.419-.824.679-1.38.896c-.42.164-1.065.36-2.235.413c-1.274.057-1.649.07-4.859.07c-3.211 0-3.586-.015-4.859-.074c-1.171-.061-1.816-.256-2.236-.421c-.569-.224-.96-.479-1.379-.899c-.421-.419-.69-.824-.9-1.38c-.165-.42-.359-1.065-.42-2.235c-.045-1.26-.061-1.649-.061-4.844c0-3.196.016-3.586.061-4.861c.061-1.17.255-1.814.42-2.234c.21-.57.479-.96.9-1.381c.419-.419.81-.689 1.379-.898c.42-.166 1.051-.361 2.221-.421c1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162c0 3.405 2.76 6.162 6.162 6.162c3.405 0 6.162-2.76 6.162-6.162c0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4s4 1.79 4 4s-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44c-.795 0-1.44-.646-1.44-1.44c0-.794.646-1.439 1.44-1.439c.793-.001 1.44.645 1.44 1.439z"})}),O5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26l8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),M5=({className:t})=>a.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669c1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),L5=[{key:"discord",name:"Discord",Icon:LE,bgClass:"bg-indigo-500 hover:bg-indigo-600"},{key:"telegram",name:"Telegram",Icon:j5,bgClass:"bg-blue-500 hover:bg-blue-600"},{key:"whatsapp",name:"WhatsApp",Icon:A5,bgClass:"bg-green-500 hover:bg-green-600"},{key:"instagram",name:"Instagram",Icon:D5,bgClass:"bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 hover:from-purple-600 hover:via-pink-600 hover:to-orange-600"},{key:"youtube",name:"YouTube",Icon:R5,bgClass:"bg-red-600 hover:bg-red-700"},{key:"twitter",name:"Twitter/X",Icon:O5,bgClass:"bg-black hover:bg-gray-900"},{key:"facebook",name:"Facebook",Icon:M5,bgClass:"bg-blue-600 hover:bg-blue-700"}],V5=t=>{if(!t)return null;const e=/(https?:\/\/[^\s]+)/g;return t.split(e).map((r,s)=>e.test(r)?(e.lastIndex=0,a.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300 underline inline-flex items-center gap-1 break-all",children:[r,a.jsx(ER,{className:"w-3 h-3 inline flex-shrink-0"})]},s)):a.jsx("span",{children:r},s))},U5={terms:"Terms & Conditions",privacy:"Privacy Policy",refund:"Refund Policy",fairplay:"Fair Play Policy",about:"About Us",contact:"Contact Us",faq:"FAQ"},F5={terms:"termsConditions",privacy:"privacyPolicy",refund:"refundPolicy",fairplay:"fairPlayPolicy",about:"aboutUs",contact:"contactInfo"};function ds(){var f;const e=Bs().pathname.replace("/",""),n=kt(),[r,s]=P.useState(""),[i,o]=P.useState(null),[c,u]=P.useState(!0);P.useEffect(()=>{d()},[e]);const d=async()=>{try{const p=await Zr(ut(se,"app_settings","main"));if(p.exists()){const y=p.data(),N=F5[e];s(y[N]||"Content not available"),o(y)}}catch(p){console.error("Error fetching content:",p),s("Failed to load content")}finally{u(!1)}},m=i!=null&&i.socialLinks?L5.filter(p=>i.socialLinks[p.key]):[];return c?a.jsx(le,{hideNav:!0,children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(ft,{})})}):a.jsxs(le,{hideNav:!0,children:[a.jsx("div",{className:"sticky top-0 z-40 bg-dark-500 border-b border-dark-300",children:a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[a.jsx("button",{onClick:()=>n(-1),className:"p-2 hover:bg-dark-300 rounded-full",children:a.jsx(qt,{className:"w-5 h-5 text-white"})}),a.jsx("h1",{className:"font-semibold text-white",children:U5[e]||"Page"})]})}),a.jsxs("div",{className:"px-4 py-4 space-y-4",children:[e==="contact"&&a.jsxs(a.Fragment,{children:[a.jsxs(ee,{className:"space-y-4",children:[(i==null?void 0:i.supportEmail)&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-lg flex items-center justify-center",children:a.jsx($i,{className:"w-5 h-5 text-primary-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("a",{href:`mailto:${i.supportEmail}`,className:"text-white hover:text-primary-400",children:i.supportEmail})]})]}),(i==null?void 0:i.supportPhone)&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:a.jsx(iu,{className:"w-5 h-5 text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),a.jsx("a",{href:`tel:${i.supportPhone}`,className:"text-white hover:text-green-400",children:i.supportPhone})]})]}),r&&r!=="Content not available"&&a.jsx("div",{className:"pt-4 border-t border-dark-200",children:a.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:V5(r)})})]}),m.length>0&&a.jsxs(ee,{children:[a.jsx("h3",{className:"font-semibold text-white mb-4",children:"Connect With Us"}),((f=i==null?void 0:i.socialLinks)==null?void 0:f.discord)&&a.jsxs("a",{href:i.socialLinks.discord,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 px-6 bg-indigo-500 hover:bg-indigo-600 text-white rounded-xl font-medium text-center transition-colors mb-4",children:[a.jsx(LE,{className:"w-5 h-5"}),"Join Discord Channel"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.filter(p=>p.key!=="discord").map(p=>a.jsxs("a",{href:i.socialLinks[p.key],target:"_blank",rel:"noopener noreferrer",className:`py-3 px-4 ${p.bgClass} text-white rounded-xl font-medium text-center transition-all flex items-center justify-center gap-2`,children:[a.jsx(p.Icon,{className:"w-5 h-5"}),p.name]},p.key))})]})]}),e!=="contact"&&a.jsx("div",{className:"prose prose-invert max-w-none",children:a.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:r})})]})]})}function Ue({children:t}){const{currentUser:e,loading:n}=Ze();return n?a.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:a.jsx(ft,{text:"Loading..."})}):e?t:a.jsx(Om,{to:"/login"})}function dh({children:t}){const{currentUser:e,loading:n}=Ze();return n?a.jsx("div",{className:"min-h-screen bg-dark-500 flex items-center justify-center",children:a.jsx(ft,{text:"Loading..."})}):e?a.jsx(Om,{to:"/"}):t}function B5({children:t}){return PE(),t}function z5(){return a.jsx(B5,{children:a.jsxs(CI,{children:[a.jsx(we,{path:"/login",element:a.jsx(dh,{children:a.jsx(d5,{})})}),a.jsx(we,{path:"/forgot-password",element:a.jsx(dh,{children:a.jsx(h5,{})})}),a.jsx(we,{path:"/register",element:a.jsx(dh,{children:a.jsx(p5,{})})}),a.jsx(we,{path:"/",element:a.jsx(Ue,{children:a.jsx(l5,{})})}),a.jsx(we,{path:"/tournaments",element:a.jsx(Ue,{children:a.jsx(g5,{})})}),a.jsx(we,{path:"/tournament/:id",element:a.jsx(Ue,{children:a.jsx(y5,{})})}),a.jsx(we,{path:"/game/:id",element:a.jsx(Ue,{children:a.jsx(v5,{})})}),a.jsx(we,{path:"/wallet",element:a.jsx(Ue,{children:a.jsx(x5,{})})}),a.jsx(we,{path:"/wallet/add",element:a.jsx(Ue,{children:a.jsx(_5,{})})}),a.jsx(we,{path:"/wallet/withdraw",element:a.jsx(Ue,{children:a.jsx(E5,{})})}),a.jsx(we,{path:"/transactions",element:a.jsx(Ue,{children:a.jsx(T5,{})})}),a.jsx(we,{path:"/profile",element:a.jsx(Ue,{children:a.jsx(N5,{})})}),a.jsx(we,{path:"/my-stats",element:a.jsx(Ue,{children:a.jsx(I5,{})})}),a.jsx(we,{path:"/my-contests",element:a.jsx(Ue,{children:a.jsx(b5,{})})}),a.jsx(we,{path:"/lottery",element:a.jsx(Ue,{children:a.jsx(k5,{})})}),a.jsx(we,{path:"/notifications",element:a.jsx(Ue,{children:a.jsx(S5,{})})}),a.jsx(we,{path:"/leaderboard",element:a.jsx(Ue,{children:a.jsx(C5,{})})}),a.jsx(we,{path:"/refer",element:a.jsx(Ue,{children:a.jsx(P5,{})})}),a.jsx(we,{path:"/terms",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/privacy",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/refund",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/fairplay",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/about",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/contact",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"/faq",element:a.jsx(Ue,{children:a.jsx(ds,{})})}),a.jsx(we,{path:"*",element:a.jsx(Om,{to:"/"})})]})})}function $5(){return a.jsx(LI,{children:a.jsx(gR,{children:a.jsx(LR,{children:a.jsx(z5,{})})})})}const W5=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("Main SW registered:",t.scope)}).catch(t=>{console.warn("Main SW registration failed:",t)}),W5()||navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log("Firebase Messaging SW registered:",t.scope)}).catch(t=>{console.warn("Firebase Messaging SW registration failed:",t)})});hh.createRoot(document.getElementById("root")).render(a.jsx(Hv.StrictMode,{children:a.jsx($5,{})}));export{Kr as C,Ba as E,Vn as F,Ps as _,Cu as a,Ge as b,q5 as c,H5 as d,Vm as g,ab as i,Ab as o,Pn as r,lb as v};
